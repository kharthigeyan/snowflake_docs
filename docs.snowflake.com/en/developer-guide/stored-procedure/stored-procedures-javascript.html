<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Writing Stored Procedures in JavaScript | Snowflake Documentation</title><link rel="canonical" href="stored-procedures-javascript.html"/><meta name="next-head-count" content="4"/><script src="../../../scripts/darkmode.js"></script><link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIHdpZHRoPSIxNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxjbGlwUGF0aCBpZD0iYSI+PHBhdGggZD0ibTAgMGgxNTB2MTUwaC0xNTB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Im0xNTAgMGgtMTUwdjE1MGgxNTB6IiBmaWxsPSIjMjliNWU4Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtMTMwLjM3NSA2Ny4yNTMyLTE0LjA5NiA4LjEyMjEgMTQuMDk2IDguMDUzNmMuODQzLjQ4NzIgMS41ODEgMS4xMzU3IDIuMTc0IDEuOTA4NC41OTIuNzcyNyAxLjAyNiAxLjY1NDUgMS4yNzggMi41OTUxLjI1MS45NDA2LjMxNSAxLjkyMTUuMTg4IDIuODg2Ny0uMTI4Ljk2NTItLjQ0NCAxLjg5NTktLjkzMSAyLjczODgtLjQ4OC44NDMtMS4xMzYgMS41ODE3LTEuOTA5IDIuMTc0cy0xLjY1NCAxLjAyNjctMi41OTUgMS4yNzgyLTEuOTIxLjMxNTQtMi44ODcuMTg3OGMtLjk2NS0uMTI3NS0xLjg5Ni0uNDQ0LTIuNzM5LS45MzEybC0yNS4yNTU5LTE0LjU0OTZjLTEuMTU3NS0uNjY5Ni0yLjExMjgtMS42Mzk0LTIuNzY1LTIuODA2OC0uNjUyMy0xLjE2NzQtLjk3NzMtMi40ODkzLS45NDA4LTMuODI2LjAxOTgtLjU3OTIuMTA4OS0xLjE1MzguMjY1My0xLjcxMTcuNTE3LTEuODcxMSAxLjc0NTgtMy40NjU0IDMuNDIzNC00LjQ0MTlsMjUuMjU2LTE0LjQ5ODNjLjg0Ny0uNDg5MiAxLjc4Mi0uODA2NyAyLjc1MS0uOTM0My45Ny0uMTI3NSAxLjk1NS0uMDYyNyAyLjg5OS4xOTA5Ljk0NS4yNTM2IDEuODMuNjkwOSAyLjYwNSAxLjI4Ny43NzUuNTk2IDEuNDI1IDEuMzM5MSAxLjkxMyAyLjE4NjYuNDkuODQwMi44MDggMS43NjkzLjkzNSAyLjczMzQuMTI4Ljk2NC4wNjMgMS45NDM5LS4xOTEgMi44ODI2LS4yNTQuOTM4OC0uNjkyIDEuODE3Ny0xLjI4OCAyLjU4NTktLjU5Ny43NjgxLTEuMzQgMS40MTAxLTIuMTg2IDEuODg4N3ptLTEzLjM0MyAzOS4zNjk4LTI1LjI0NzgtMTQuNTI0M2MtMS4xMjk2LS42NDgzLTIuNDA5MS0uOTg5Ni0zLjcxMTUtLjk5MDJzLTIuNTgyMy4zMzk3LTMuNzEyNC45ODdjLTEuMTMwMS42NDcyLTIuMDcxMiAxLjU3OS0yLjcyOTcgMi43MDI2LS42NTg1IDEuMTIzNy0xLjAxMTUgMi40MDAxLTEuMDIzOSAzLjcwMjR2MjkuMDEzNWMuMDY1NCAxLjkyOC44NzcyIDMuNzU1IDIuMjY0IDUuMDk1IDEuMzg2OSAxLjM0MSAzLjI0MDMgMi4wOSA1LjE2OTEgMi4wOSAxLjkyODkgMCAzLjc4MjMtLjc0OSA1LjE2OTEtMi4wOSAxLjM4NjgtMS4zNCAyLjE5ODYtMy4xNjcgMi4yNjQtNS4wOTV2LTE2LjI2MWwxNC4xMzAxIDguMTIyYy44NDMuNDg4IDEuNzc0LjgwNSAyLjczOS45MzMuOTY2LjEyOCAxLjk0Ny4wNjQgMi44ODgtLjE4N3MxLjgyMy0uNjg1IDIuNTk2LTEuMjc3Yy43NzQtLjU5MiAxLjQyMy0xLjMzMSAxLjkxLTIuMTc0LjQ4OC0uODQzLjgwNS0xLjc3My45MzMtMi43MzkuMTI4LS45NjUuMDY1LTEuOTQ2LS4xODYtMi44ODdzLS42ODUtMS44MjQtMS4yNzctMi41OTctMS4zMzEtMS40MjItMi4xNzQtMS45MXptLTI5LjA5OTItMjguMzgwNi0xMC41MjcgMTAuMzk4NmMtLjM2MDEuMzM0OS0uODI2OS41MzE5LTEuMzE4LjU1NjNoLTMuMDg5N2MtLjQ5LS4wMjk0LS45NTUxLS4yMjU3LTEuMzE4LS41NTYzbC0xMC40NjcxLTEwLjQzMjljLS4zMjc0LS4zNTczLS41MjEtLjgxNy0uNTQ3OC0xLjMwMDl2LTMuMDgxYy4wMjgzLS40ODYxLjIyMTUtLjk0ODEuNTQ3OC0xLjMwOTVsMTAuNDY3MS0xMC40MzI5Yy4zNjM3LS4zMjgxLjgyOS0uNTIxNCAxLjMxOC0uNTQ3N2gzLjA4OTdjLjQ4OTkuMDIyOC45NTYyLjIxNjYgMS4zMTguNTQ3N2wxMC40OTI4IDEwLjQzMjljLjMyMzcuMzYyMy41MTQuODI0My41MzkyIDEuMzA5NXYzLjA4MWMtLjAyMzcuNDgzLS4yMTQzLjk0MjgtLjUzOTIgMS4zMDA5em0tOC4zODc0LTIuODkyOGMtLjA0MDQtLjQ5OS0uMjQ4NS0uOTY5Ni0uNTkwNS0xLjMzNTJsLTMuMDM4My0zLjAwNGMtLjM2NDEtLjMyNzUtLjgyOTEtLjUyMDctMS4zMTgtLjU0NzhoLS4xMTEzYy0uNDg2Ny4wMjU1LS45NDk1LjIxOTEtMS4zMDk0LjU0NzhsLTMuMDM4MyAzLjAwNGMtLjMyNjIuMzY3Ni0uNTE2NS44MzU4LS41MzkyIDEuMzI2NnYuMTExM2MuMDIxNS40ODM0LjIxMjQuOTQzOS41MzkyIDEuMzAwOWwzLjA1NTQgMi45OTU1Yy4zNjA3LjMyNzQuODIzLjUyMDggMS4zMDk0LjU0NzdoLjExMTNjLjQ4ODktLjAyNy45NTM5LS4yMjAzIDEuMzE4LS41NDc3bDMuMDM4My0zLjAyMTJjLjMyODItLjM1NzYuNTI0NC0uODE2Ni41NTYzLTEuMzAwOXptLTQ3LjQ5MTQtMzEuMjIxNyAyNS4yNTYzIDE0LjQ4MTFjMS4xMzA4LjY0OCAyLjQxMTUuOTg5IDMuNzE0OS45ODg5IDEuMzAzMyAwIDIuNTg0LS4zNDA5IDMuNzE0OC0uOTg5IDEuMTMwOS0uNjQ4IDIuMDcyNS0xLjU4MDYgMi43MzE0LTIuNzA1MS42NTktMS4xMjQ1IDEuMDEyMy0yLjQwMTggMS4wMjQ5LTMuNzA1MXYtMjguOTg3OWMtLjA2NTQtMS45Mjc3LS44NzcyLTMuNzU0Ni0yLjI2NC01LjA5NTJzLTMuMjQwMi0yLjA4OTktNS4xNjkxLTIuMDg5OWMtMS45Mjg4IDAtMy43ODIyLjc0OTMtNS4xNjkgMi4wODk5LTEuMzg2OSAxLjM0MDYtMi4xOTg3IDMuMTY3NS0yLjI2NDEgNS4wOTUydjE2LjI2MTNsLTE0LjE0NzMtOC4xMzA3Yy0uODQyOS0uNDg3Ny0xLjc3MzctLjgwNDctMi43MzkyLS45MzI4LS45NjU0LS4xMjgxLTEuOTQ2Ni0uMDY0Ny0yLjg4NzYuMTg2NHMtMS44MjMyLjY4NTItMi41OTY1IDEuMjc3M2MtLjc3MzIuNTkyMS0xLjQyMjIgMS4zMzA3LTEuOTEgMi4xNzM2LS40ODc4Ljg0My0uODA0OCAxLjc3MzgtLjkzMjkgMi43MzkyLS4xMjguOTY1NS0uMDY0NyAxLjk0NjcuMTg2NCAyLjg4NzYuMjUxMi45NDEuNjg1MiAxLjgyMzMgMS4yNzczIDIuNTk2NS41OTIxLjc3MzMgMS4zMzA3IDEuNDIyMyAyLjE3MzcgMS45MTAxem01NS40MjUyIDE1LjQ3MzljMS40OTE0LjExOCAyLjk4MzYtLjIxOTMgNC4yNzkzLS45NjcxbDI1LjI0NzUtMTQuNTQ5NmMuODQzLS40ODc3IDEuNTgyLTEuMTM2OCAyLjE3NC0xLjkxczEuMDI2LTEuNjU1NSAxLjI3Ny0yLjU5NjUuMzE1LTEuOTIyMi4xODctMi44ODc2Yy0uMTI4LS45NjU1LS40NDUtMS44OTYyLS45MzMtMi43MzkyLS40ODgtLjg0MjktMS4xMzctMS41ODE2LTEuOTEtMi4xNzM3LS43NzQtLjU5MjEtMS42NTYtMS4wMjYxLTIuNTk3LTEuMjc3Mi0xLjktLjUwNzItMy45MjQtLjIzODctNS42MjcuNzQ2NGwtMTQuMTI5OCA4LjE5OTF2LTE2LjI2MTNjLS4wNjU0LTEuOTI3Ny0uODc3Mi0zLjc1NDYtMi4yNjQtNS4wOTUyLTEuMzg2OC0xLjM0MDUtMy4yNDAyLTIuMDg5OS01LjE2OTEtMi4wODk5LTEuOTI4OCAwLTMuNzgyMi43NDk0LTUuMTY5IDIuMDg5OS0xLjM4NjkgMS4zNDA2LTIuMTk4NyAzLjE2NzUtMi4yNjQxIDUuMDk1MnYyOS4wMTM2Yy0uMDAyMyAxLjg3ODQuNzA4NiAzLjY4NzYgMS45ODkyIDUuMDYxOSAxLjI4MDUgMS4zNzQzIDMuMDM1MSAyLjIxMTEgNC45MDkgMi4zNDEyem0tMjUuODU1NCAzMS41Mjk4Yy0xLjQ5MTYtLjEyMTMtMi45ODQ3LjIxNjItNC4yNzkzLjk2NzFsLTI1LjI5MDUgMTQuNDg5M2MtMS43MDI0Ljk4NS0yLjk0MzggMi42MDctMy40NTEgNC41MDdzLS4yMzg3IDMuOTI0Ljc0NjUgNS42MjdjLjk4NTEgMS43MDIgMi42MDYxIDIuOTQzIDQuNTA2NSAzLjQ1MSAxLjkwMDQuNTA3IDMuOTI0NC4yMzggNS42MjY4LS43NDdsMTQuMTQ3My04LjEyMnYxNi4yNjFjLjA2NTQgMS45MjguODc3MiAzLjc1NSAyLjI2NDEgNS4wOTYgMS4zODY4IDEuMzQgMy4yNDAyIDIuMDkgNS4xNjkgMi4wOSAxLjkyODkgMCAzLjc4MjMtLjc1IDUuMTY5MS0yLjA5IDEuMzg2OC0xLjM0MSAyLjE5ODYtMy4xNjggMi4yNjQtNS4wOTZ2LTI5LjA2NDVjLS4wMDM4LTEuODY5LS43MTQ0LTMuNjY3My0xLjk4OTEtNS4wMzQxcy0zLjAxOTItMi4yMDA5LTQuODgzNC0yLjMzNDh6bS02Ljg0NjgtMTMuNTgyNWMuNDg3NS0xLjYwMzIuNDE0LTMuMzI0Ny0uMjA4My00Ljg4MDYtLjYyMjQtMS41NTU5LTEuNzU2NC0yLjg1MzItMy4yMTUyLTMuNjc3OWwtMjUuMjMwNi0xNC41NDFjLTEuNzA0LS45NzYtMy43MjQ4LTEuMjM4NS01LjYyMTYtLjczMDMtMS44OTY4LjUwODMtMy41MTU1IDEuNzQ2MS00LjUwMzIgMy40NDMzLS40ODg5Ljg0LS44MDY1IDEuNzY4Ni0uOTM0MyAyLjczMi0uMTI3OC45NjM1LS4wNjMyIDEuOTQyOC4xODk5IDIuODgxMS4yNTMxLjkzODQuNjg5NyAxLjgxNzMgMS4yODQ2IDIuNTg1OC41OTUuNzY4NiAxLjMzNjQgMS40MTE1IDIuMTgxNCAxLjg5MTdsMTQuMDk2IDguMTIyMS0xNC4wOTYgOC4wNTM2Yy0uODQyOS40ODYxLTEuNTgxOSAxLjEzMzQtMi4xNzQ2IDEuOTA1MS0uNTkyOC43NzE3LTEuMDI3NyAxLjY1MjYtMS4yODAxIDIuNTkyMy0uMjUyMy45Mzk4LS4zMTcgMS45MjAxLS4xOTA1IDIuODg0OXMuNDQxOCAxLjg5NTIuOTI3OSAyLjczODJjLjQ4NjEuODQyOSAxLjEzMzUgMS41ODE5IDEuOTA1MSAyLjE3NDYuNzcxNy41OTI4IDEuNjUyNiAxLjAyNzcgMi41OTI0IDEuMjgwMS45Mzk3LjI1MjMgMS45Mi4zMTcgMi44ODQ4LjE5MDVzMS44OTUyLS40NDE4IDIuNzM4Mi0uOTI3OWwyNS4yMzA2LTE0LjU0OTZjMS42MjQ4LS45MDcxIDIuODQ1MS0yLjM5NjUgMy40MTQ5LTQuMTY4eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvc3ZnPg=="/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"/><link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="../../../_next/static/css/1c3ff358e360dad7.css" as="style"/><link rel="stylesheet" href="../../../_next/static/css/1c3ff358e360dad7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../../_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="../../../_next/static/chunks/304.8a0d80134255b6de.js"></script><script src="../../../_next/static/chunks/webpack-48a9d1c9a83eec21.js" defer=""></script><script src="../../../_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="../../../_next/static/chunks/main-fd514f7d9ee4d3f2.js" defer=""></script><script src="../../../_next/static/chunks/pages/_app-103500770c0400fb.js" defer=""></script><script src="../../../_next/static/chunks/314-3c486869a31a6ad8.js" defer=""></script><script src="../../../_next/static/chunks/141-52e6bd64aca8e746.js" defer=""></script><script src="../../../_next/static/chunks/144-6b784825890c7a2f.js" defer=""></script><script src="../../../_next/static/chunks/pages/[...path]-9731655fe727f940.js" defer=""></script><script src="../../../_next/static/ICZ5MtOK9ZoGg60IkLaJy/_buildManifest.js" defer=""></script><script src="../../../_next/static/ICZ5MtOK9ZoGg60IkLaJy/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap&subset=latin">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="h-full relative overflow-y-hidden flex flex-col"><nav id="masthead" class="print:hidden flex flex-col"><div class="flex items-center justify-between w-full px-6 border-b py-2"><a href="https://docs.snowflake.com" class="flex flex-1 my-2 items-center "><svg xmlns="http://www.w3.org/2000/svg" width="102" height="24" viewBox="0 0 102 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M62.6792 7.50872L62.6761 7.50679C62.6761 7.50679 62.6747 7.50562 62.6729 7.50562C62.6038 7.47437 62.5284 7.45813 62.4562 7.45813C62.3386 7.45898 62.2259 7.49541 62.1277 7.55931C62.0276 7.62524 61.9428 7.72138 61.8943 7.84166V7.84463L59.6011 14.3663L57.8338 9.99498L57.8311 9.9931C57.7813 9.87089 57.6924 9.77644 57.5915 9.7107C57.4896 9.64477 57.372 9.60849 57.2482 9.60849C57.1279 9.60849 57.0157 9.64769 56.917 9.71155C56.8191 9.77733 56.7312 9.87089 56.6818 9.9931L56.6805 9.99498L54.9096 14.3691L52.6043 7.85032H52.6025C52.5625 7.7243 52.4804 7.62609 52.383 7.56119C52.2843 7.49541 52.1685 7.45898 52.0491 7.45813C51.9728 7.45813 51.8961 7.47437 51.8229 7.50562H51.8198L51.8171 7.50872C51.6021 7.61282 51.4707 7.83597 51.4702 8.07917C51.4702 8.15564 51.4846 8.23178 51.5128 8.30722L54.3477 16.22V16.2227C54.3697 16.2818 54.4011 16.3401 54.4469 16.3974C54.4801 16.4383 54.529 16.4728 54.5793 16.5015C54.5887 16.5108 54.6031 16.5241 54.6251 16.5384C54.6489 16.5538 54.6794 16.5645 54.7103 16.57C54.7611 16.5875 54.8279 16.6128 54.9177 16.6128C55.0326 16.6128 55.1389 16.57 55.2345 16.5061C55.3238 16.4442 55.4037 16.3515 55.4477 16.2314L55.4549 16.2257L57.2482 11.7711L59.0437 16.2075H59.0455C59.0868 16.3258 59.1595 16.4185 59.2439 16.4843C59.3332 16.5538 59.4328 16.5968 59.5387 16.6128H59.6141C59.6854 16.6128 59.7555 16.5987 59.8138 16.5748C59.8753 16.5502 59.9251 16.5175 59.9664 16.4853C60.0629 16.4088 60.1369 16.3039 60.1831 16.1874V16.1848L63.0005 8.30722C63.0284 8.23178 63.0427 8.15654 63.0427 8.08039C63.0418 7.83893 62.9049 7.609 62.6792 7.50872ZM49.7164 12.0261C49.7164 11.0969 49.3731 10.2553 48.8269 9.64769C48.2776 9.03889 47.534 8.66675 46.7262 8.66675C45.9184 8.66675 45.173 9.03889 44.6249 9.64769C44.0776 10.2553 43.7343 11.0969 43.7343 12.0261C43.7343 12.9544 44.0776 13.7881 44.6249 14.3919C45.173 14.9979 45.9184 15.3642 46.7262 15.3642C47.534 15.3642 48.2803 14.9979 48.8269 14.3919C49.3731 13.7881 49.7164 12.9544 49.7164 12.0261ZM49.7007 8.80035C50.4591 9.63611 50.92 10.7829 50.9218 12.0261C50.92 13.2692 50.4591 14.4148 49.7007 15.2507C48.9481 16.0853 47.8971 16.613 46.728 16.613C45.5684 16.613 44.5156 16.0853 43.7602 15.2507C43.0036 14.4148 42.5353 13.2692 42.5353 12.0261C42.5353 10.7829 43.0036 9.63611 43.7602 8.80035C44.5156 7.96646 45.5684 7.43898 46.728 7.43898C47.8971 7.43898 48.9481 7.96646 49.7007 8.80035ZM37.7615 7.45522C36.8213 7.45522 35.9631 7.83597 35.3223 8.44355V8.08039C35.3213 7.91333 35.2617 7.75762 35.1569 7.64317C35.0552 7.53065 34.9044 7.45522 34.7393 7.45522C34.5683 7.45522 34.4142 7.52665 34.3069 7.64213C34.2013 7.75573 34.138 7.91333 34.138 8.08039V16.1771L34.1627 16.2027L34.1637 16.2067C34.1702 16.2334 34.1865 16.2629 34.2039 16.2914C34.2857 16.4412 34.4197 16.5548 34.5858 16.6052L34.6097 16.613H34.7393C34.8257 16.613 34.9127 16.594 34.9954 16.5538C35.0643 16.5195 35.1285 16.4642 35.1799 16.3936L35.1818 16.3945C35.1881 16.3879 35.1901 16.3793 35.1974 16.3727C35.2002 16.3717 35.2029 16.3688 35.2047 16.3658C35.2367 16.323 35.2635 16.2792 35.2801 16.2381C35.2976 16.1894 35.3085 16.1435 35.3168 16.1083L35.3223 16.0853V11.2236C35.3397 10.5282 35.6151 9.89955 36.0568 9.44246C36.4955 8.98571 37.0967 8.70317 37.7615 8.70317C38.4373 8.70317 39.0403 8.98571 39.4773 9.44246C39.9161 9.8978 40.1824 10.5254 40.1824 11.2171V15.9911C40.1824 16.1654 40.2539 16.3268 40.3624 16.4375C40.4734 16.5479 40.6248 16.613 40.7828 16.613C40.9434 16.613 41.0941 16.5479 41.2042 16.4375C41.3162 16.3268 41.3841 16.1654 41.3841 15.9911V11.2171C41.3841 9.15644 39.7646 7.45813 37.7615 7.45522ZM96.9417 11.1406C96.6001 9.701 95.384 8.6754 93.9959 8.67832C92.5729 8.67832 91.3728 9.68204 91.0013 11.1406H96.9417ZM98.257 11.7304V11.7922C98.257 11.965 98.183 12.1205 98.0703 12.2227C97.9581 12.3256 97.8123 12.3791 97.6552 12.381H90.9178C91.0892 14.0894 92.4019 15.351 93.969 15.3642H94.3666C94.8849 15.3661 95.3903 15.18 95.8345 14.8719C96.2797 14.5667 96.6643 14.1402 96.9354 13.6707C96.991 13.5706 97.0714 13.4943 97.1584 13.4475C97.2473 13.397 97.3429 13.374 97.4394 13.374C97.5457 13.374 97.6512 13.4027 97.7441 13.4608L97.7504 13.4637L97.758 13.4694C97.9267 13.5982 98.0326 13.7948 98.0326 14.0106C98.0326 14.1202 98.0048 14.2318 97.9469 14.3328L97.9451 14.3368L97.9433 14.3385C97.5668 14.9608 97.0534 15.5283 96.444 15.9396C95.8336 16.3517 95.1259 16.613 94.3666 16.613H93.9627C92.7802 16.6043 91.7117 16.0853 90.9411 15.2554C90.1728 14.4283 89.6994 13.292 89.6994 12.0434C89.6994 10.7734 90.1769 9.62096 90.9514 8.78708C91.7265 7.95423 92.8031 7.43898 93.9959 7.43898C95.134 7.43898 96.1568 7.90933 96.9143 8.67936C97.6718 9.44919 98.1664 10.5185 98.2548 11.7216L98.257 11.7304ZM70.6211 3.67057C70.4569 3.67057 70.3065 3.74221 70.1984 3.85475C70.0898 3.96643 70.0211 4.12384 70.0211 4.29455V15.9911C70.0211 16.1618 70.0898 16.3182 70.1984 16.429C70.3065 16.5395 70.4569 16.613 70.6211 16.613C70.9618 16.613 71.2373 16.3344 71.2391 15.9911V4.29455C71.2373 3.9502 70.9618 3.67057 70.6211 3.67057ZM31.36 11.8027C30.8751 11.5652 30.3252 11.3897 29.7764 11.2008C29.2714 11.0234 28.759 10.8725 28.3936 10.6742C28.2101 10.572 28.0669 10.4643 27.9742 10.3431C27.8795 10.2221 27.8337 10.0989 27.8309 9.93093C27.8319 9.701 27.8961 9.51597 28.0044 9.35183C28.1687 9.10675 28.4441 8.91583 28.7452 8.79258C29.0427 8.669 29.365 8.61065 29.5954 8.61065C30.2765 8.61169 30.7072 8.84731 31.0378 9.09136C31.201 9.21461 31.3389 9.33941 31.4693 9.44246C31.5362 9.49597 31.5987 9.54463 31.6712 9.58072C31.7399 9.61611 31.8207 9.64477 31.909 9.64477C31.9649 9.64477 32.0211 9.63423 32.0722 9.61145C32.1263 9.58868 32.1734 9.55602 32.2184 9.51597C32.2624 9.47319 32.3001 9.42157 32.3267 9.36425C32.3506 9.30505 32.3615 9.24411 32.3615 9.18406C32.3615 9.07324 32.3275 8.96933 32.2788 8.87183C32.188 8.70025 32.0483 8.53625 31.8704 8.37211C31.606 8.12788 31.2572 7.89503 30.8816 7.71964C30.5051 7.54411 30.1013 7.42468 29.7166 7.42468C28.8251 7.42468 28.0807 7.63456 27.5398 8.02119C27.258 8.22331 27.0102 8.44458 26.8349 8.74995C26.6567 9.05616 26.5575 9.43399 26.5447 9.92524C26.5439 9.94717 26.5439 9.9691 26.5439 9.99103C26.5421 10.4681 26.6897 10.8613 26.922 11.1692C27.2746 11.6331 27.798 11.9106 28.3112 12.1072C28.8235 12.3036 29.3356 12.421 29.6588 12.5336C30.114 12.691 30.5979 12.8617 30.9504 13.0878C31.1259 13.2033 31.2681 13.3274 31.3646 13.4637C31.4583 13.6041 31.5113 13.7489 31.5133 13.9322V13.9457C31.5123 14.2108 31.4372 14.4188 31.3131 14.5971C31.1259 14.8624 30.8147 15.0569 30.484 15.18C30.1546 15.3003 29.8121 15.351 29.5917 15.351C28.8142 15.351 28.2938 15.1562 27.9164 14.9608C27.7272 14.8624 27.5739 14.7651 27.4352 14.6829C27.3664 14.6439 27.3022 14.6076 27.2342 14.579C27.1681 14.5505 27.0975 14.532 27.0177 14.532C26.969 14.532 26.9158 14.5408 26.867 14.5607C26.8175 14.5827 26.7725 14.6133 26.7347 14.6504C26.6825 14.7033 26.6366 14.7621 26.6046 14.8299C26.5733 14.8978 26.5575 14.9692 26.5575 15.0436C26.5575 15.1659 26.6015 15.2775 26.6642 15.3785C26.7623 15.5243 26.9065 15.6552 27.0864 15.7859C27.2717 15.9146 27.4932 16.0417 27.7483 16.1667C28.3139 16.4442 29.0391 16.5892 29.59 16.5987H29.5917C30.4484 16.5987 31.1882 16.3936 31.8116 15.9167V15.9155H31.8124C32.422 15.4386 32.8012 14.7297 32.8012 13.9293C32.8012 13.4895 32.7021 13.1164 32.5287 12.8113C32.267 12.3485 31.8418 12.0434 31.36 11.8027ZM79.6751 12.0261C79.6751 11.0881 79.3345 10.2477 78.7901 9.64115C78.2462 9.03616 77.5004 8.669 76.6841 8.66693C75.874 8.66693 75.1309 9.03616 74.5816 9.64115C74.0363 10.2477 73.6912 11.0881 73.6912 12.0261C73.6912 12.963 74.0363 13.7979 74.5816 14.3996C75.1277 15.0017 75.874 15.3642 76.6841 15.3642C77.5022 15.3642 78.2485 15.0017 78.7919 14.4017C79.3345 13.7979 79.6751 12.9639 79.6751 12.0261ZM80.6961 7.61282C80.8069 7.7243 80.8756 7.88571 80.8756 8.06002V15.9911C80.8756 16.1618 80.8056 16.3182 80.6997 16.429C80.5911 16.5395 80.4416 16.613 80.2765 16.613C80.1113 16.613 79.9597 16.5395 79.8533 16.429C79.7447 16.3182 79.6751 16.1618 79.6751 15.9911V15.2173C78.9194 16.0655 77.8581 16.613 76.6841 16.613C75.5155 16.613 74.4631 16.0912 73.7096 15.2554C72.953 14.4236 72.4903 13.2777 72.4903 12.0261C72.4903 10.7745 72.953 9.6275 73.7096 8.79484C74.4631 7.95992 75.5155 7.43898 76.6841 7.43898C77.8576 7.43898 78.9194 7.9706 79.6751 8.8147V8.06002C79.6751 7.88571 79.7438 7.7243 79.8551 7.61282C79.9659 7.50303 80.1158 7.43898 80.2765 7.43898C80.4354 7.43898 80.5866 7.50303 80.6961 7.61282ZM89.1725 8.417C89.2919 8.2939 89.3565 8.1306 89.3565 7.96853C89.3565 7.80924 89.2919 7.64976 89.1712 7.53428H89.1725C89.1712 7.53065 89.1685 7.53065 89.1685 7.53065C89.168 7.52769 89.1658 7.52665 89.1658 7.52665H89.164C89.0482 7.40844 88.8997 7.34355 88.7462 7.34355C88.5914 7.34355 88.4397 7.41065 88.3239 7.53065L83.6302 12.2846V4.29455C83.6302 3.9502 83.3528 3.67057 83.0122 3.67057C82.848 3.67057 82.6976 3.74221 82.5899 3.85475C82.4831 3.96643 82.4117 4.12384 82.4117 4.29455V15.9911C82.4117 16.1618 82.4831 16.3182 82.5899 16.429C82.6976 16.5395 82.848 16.613 83.0122 16.613C83.3528 16.613 83.6302 16.3344 83.6302 15.9911V14.061L85.1587 12.4745L88.2745 16.3812C88.3333 16.4709 88.4132 16.5327 88.4922 16.5653C88.5819 16.6007 88.6694 16.613 88.7471 16.613C88.8548 16.613 89.006 16.5892 89.1393 16.4804L89.1469 16.4758L89.1546 16.467C89.2793 16.3392 89.3502 16.1694 89.3502 15.9957C89.3502 15.8497 89.2982 15.7009 89.2017 15.5819V15.5799L86.0298 11.5728L89.1694 8.417H89.1725ZM68.1444 3.69837H68.0102C67.9927 3.69837 67.9756 3.70026 67.9572 3.70095C67.9406 3.70026 67.9231 3.69837 67.9056 3.69837C67.5596 3.69837 67.2235 3.73927 66.9093 3.84802C66.6001 3.95486 66.3147 4.13144 66.0935 4.3995L66.0926 4.39847L66.0917 4.3995V4.40037C65.8633 4.66463 65.7125 4.98049 65.6209 5.33936C65.5289 5.69992 65.4912 6.10628 65.4876 6.56802V7.46209H64.5389C64.2095 7.46402 63.9479 7.73776 63.9479 8.06882C63.9461 8.24712 64.013 8.41131 64.1216 8.52971C64.2306 8.64604 64.3801 8.72232 64.5465 8.73183H65.4876V16.0063L65.4863 16.0234C65.4863 16.1941 65.5554 16.3515 65.6667 16.4642C65.7766 16.5748 65.931 16.6406 66.0989 16.6406C66.4184 16.6389 66.6809 16.3679 66.6818 16.0234V8.73183H67.7019C67.8661 8.72232 68.0178 8.6507 68.126 8.53522C68.2373 8.41992 68.305 8.25785 68.305 8.08213V8.05846C68.3014 7.73103 68.038 7.46209 67.7082 7.46209H66.6818V6.57178C66.6885 6.1779 66.7276 5.88308 66.7846 5.66853C66.8398 5.45277 66.9152 5.31729 66.9829 5.23338C67.0494 5.15898 67.1355 5.09686 67.276 5.04712C67.4173 4.99969 67.6126 4.9691 67.8773 4.9691H67.9083C67.924 4.9691 67.9406 4.96618 67.9554 4.96618C67.9738 4.96618 67.9909 4.9691 68.0102 4.9691H68.0874H68.1444C68.4827 4.9691 68.756 4.68483 68.756 4.33357C68.756 3.98265 68.4827 3.69837 68.1444 3.69837ZM7.67882 12.439C7.72747 12.2796 7.74775 12.1155 7.74407 11.9534C7.73846 11.836 7.72383 11.7188 7.69174 11.6015C7.59526 11.2371 7.3667 10.9115 7.02419 10.7063L2.153 7.78336C1.46535 7.37202 0.588678 7.61658 0.194023 8.33018C-0.20445 9.0427 0.0305809 9.95268 0.718234 10.3651L3.44027 12.0011L0.718234 13.6325C0.0305809 14.0456 -0.20362 14.9558 0.194023 15.6713C0.588678 16.3829 1.46535 16.6263 2.153 16.215L7.02419 13.2901C7.35292 13.0935 7.576 12.7852 7.67882 12.439ZM9.00081 15.1781C8.72091 15.1532 8.42993 15.2143 8.16816 15.3728L3.29328 18.2938C2.60745 18.706 2.37325 19.6209 2.76907 20.3347C3.16671 21.0465 4.04255 21.2916 4.72737 20.8775L7.45856 19.2403V22.5117C7.45856 23.336 8.10021 24.0038 8.89432 24.0038C9.68461 24.0038 10.3283 23.336 10.3283 22.5117V16.6634C10.3283 15.8782 9.74259 15.2333 9.00081 15.1781ZM13.9931 8.82209C14.2721 8.84609 14.5623 8.78411 14.8241 8.62755L19.6979 5.70373C20.3848 5.29136 20.6178 4.38034 20.223 3.6647C19.8273 2.95235 18.9507 2.70793 18.2648 3.11995L15.5355 4.75903V1.48654C15.5355 0.664582 14.8938 -0.00341797 14.0997 -0.00341797C13.3056 -0.00341797 12.6656 0.664582 12.6656 1.48654V7.33489C12.6656 8.11922 13.2496 8.76515 13.9931 8.82209ZM3.29328 5.70373L8.16816 8.62755C8.42993 8.78411 8.72091 8.84609 9.00081 8.82209C9.74259 8.76515 10.3283 8.11922 10.3283 7.33489V1.48654C10.3283 0.664582 9.68461 -0.00341797 8.89432 -0.00341797C8.10021 -0.00341797 7.45856 0.664582 7.45856 1.48654V4.75903L4.72737 3.11995C4.04255 2.70793 3.16671 2.95235 2.76907 3.6647C2.37325 4.38034 2.60745 5.29136 3.29328 5.70373ZM12.4545 11.9888C12.4545 11.9039 12.405 11.7855 12.3472 11.7227L11.7605 11.1157C11.7027 11.0558 11.5888 11.0061 11.5069 11.0061H11.4841C11.4024 11.0061 11.2887 11.0558 11.2317 11.1157L10.645 11.7227C10.5862 11.7855 10.5412 11.9039 10.5412 11.9888V12.0126C10.5412 12.0965 10.5862 12.2139 10.645 12.275L11.2317 12.8836C11.2895 12.9437 11.4024 12.9932 11.4841 12.9932H11.5069C11.5888 12.9932 11.7027 12.9437 11.7605 12.8836L12.3472 12.275C12.405 12.2139 12.4545 12.0965 12.4545 12.0126V11.9888ZM14.074 12.5725L12.0479 14.6755C11.9899 14.7372 11.878 14.7878 11.7936 14.7878H11.6466H11.3473H11.1978C11.1159 14.7878 11.0021 14.7372 10.9433 14.6755L8.91824 12.5725C8.86026 12.5133 8.81345 12.3942 8.81345 12.3102V12.1547V11.8436V11.6902C8.81345 11.6042 8.86026 11.485 8.91824 11.4249L10.9433 9.32213C11.0021 9.2602 11.1159 9.2115 11.1978 9.2115H11.3473H11.6466H11.7936C11.8761 9.2115 11.9899 9.2602 12.0479 9.32213L14.074 11.4249C14.1318 11.485 14.1786 11.6042 14.1786 11.6902V11.8436V12.1547V12.3102C14.1786 12.3942 14.1318 12.5133 14.074 12.5725ZM19.6979 18.2938L14.8241 15.3728C14.5623 15.2143 14.2721 15.1532 13.9931 15.1781C13.2496 15.2333 12.6656 15.8782 12.6656 16.6634V22.5117C12.6656 23.336 13.3056 24.0038 14.0997 24.0038C14.8938 24.0038 15.5355 23.336 15.5355 22.5117V19.2403L18.2648 20.8775C18.9505 21.2916 19.8273 21.0465 20.223 20.3347C20.6178 19.6209 20.3848 18.706 19.6979 18.2938ZM22.275 10.3651L19.5528 12.0011L22.275 13.6325C22.9625 14.0456 23.1975 14.9558 22.8 15.6713C22.4034 16.3829 21.5259 16.6263 20.8409 16.215L15.966 13.2901C15.6409 13.0935 15.4153 12.7852 15.3151 12.439C15.2674 12.2796 15.2453 12.1155 15.2508 11.9534C15.2536 11.836 15.2701 11.7188 15.3013 11.6015C15.3988 11.2371 15.6273 10.9117 15.966 10.7063L20.8409 7.78336C21.5259 7.37202 22.4034 7.61658 22.8 8.33018C23.1975 9.0427 22.9625 9.95268 22.275 10.3651ZM101.327 7.44726C101.327 8.26731 100.799 8.95173 99.9166 8.95173C99.0401 8.95173 98.5182 8.26077 98.5182 7.44726C98.5182 6.62722 99.0401 5.94265 99.9166 5.94265C100.799 5.94265 101.327 6.62722 101.327 7.44726ZM101.047 7.44726C101.047 6.74995 100.6 6.2202 99.9166 6.2202C99.2452 6.2202 98.7978 6.72388 98.7978 7.44726C98.7978 8.13804 99.2452 8.67399 99.9166 8.67399C100.6 8.67399 101.047 8.14463 101.047 7.44726ZM99.3632 6.7691H99.966C100.295 6.7691 100.513 6.95635 100.513 7.24689C100.513 7.42778 100.426 7.56326 100.295 7.64731L100.531 8.00237V8.07348H100.19L99.9597 7.73122H99.6926V8.07348H99.3632V6.7691ZM99.9597 7.08566H99.6926V7.42778H99.9597C100.084 7.42778 100.165 7.36957 100.165 7.25997C100.165 7.14364 100.09 7.08566 99.9597 7.08566Z" fill="#29B5E8"></path></svg><span class="ml-[14px] text-[12px] font-extrabold tracking-[.72px] text-primary">DOCUMENTATION</span></a><div class="flex justify-end items-center md:max-w-[440px] flex-1 gap-6"><div class="flex items-center lg:hidden"><div class="mr-4"><button type="button" class="rounded-lg ui-icon flex align-center" aria-label="Search"><svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="scale-110 fill-black-10 dark:fill-gray-50 dark:stroke-gray-50 shrink-0"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.50157 7.50472C2.50157 4.74156 4.74156 2.50157 7.50472 2.50157C10.2679 2.50157 12.5079 4.74156 12.5079 7.50472C12.5079 10.2679 10.2679 12.5079 7.50472 12.5079C4.74156 12.5079 2.50157 10.2679 2.50157 7.50472ZM7.50472 0C3.35998 0 0 3.35998 0 7.50472C0 11.6495 3.35998 15.0094 7.50472 15.0094C9.02874 15.0094 10.4467 14.5552 11.6305 13.7746L16.5548 18.6989C17.0432 19.1874 17.8352 19.1874 18.3237 18.6989C18.8121 18.2105 18.8121 17.4185 18.3237 16.9301L13.4625 12.0689C14.4328 10.8043 15.0094 9.22184 15.0094 7.50472C15.0094 3.35998 11.6495 0 7.50472 0Z" fill="#5D6A85"></path></svg></button></div><div><button type="button" class="rounded-lg ui-icon flex align-center" aria-label="Search"><svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="scale-110 fill-black-10 dark:fill-gray-50 dark:stroke-gray-50 shrink-0"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.25 0C0.559644 0 0 0.559644 0 1.25C0 1.94036 0.559644 2.5 1.25 2.5H18.75C19.4404 2.5 20 1.94036 20 1.25C20 0.559644 19.4404 0 18.75 0H1.25ZM1.25 5C0.559644 5 0 5.55964 0 6.25C0 6.94036 0.559644 7.5 1.25 7.5H18.75C19.4404 7.5 20 6.94036 20 6.25C20 5.55964 19.4404 5 18.75 5H1.25ZM0 11.25C0 10.5596 0.559644 10 1.25 10H18.75C19.4404 10 20 10.5596 20 11.25C20 11.9404 19.4404 12.5 18.75 12.5H1.25C0.559644 12.5 0 11.9404 0 11.25ZM1.25 15C0.559644 15 0 15.5596 0 16.25C0 16.9404 0.559644 17.5 1.25 17.5H10C10.6904 17.5 11.25 16.9404 11.25 16.25C11.25 15.5596 10.6904 15 10 15H1.25Z" fill="#5D6A85"></path></svg></button></div></div><div class="relative border h-full rounded-md items-center px-3 gap-2 w-full bg-gray-10 dark:bg-gray-85 hover:border-gray-50 hidden lg:flex" role="search"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="none" class="fill-black-10 dark:fill-gray-50 stroke-black-10 dark:stroke-gray-50 shrink-0 m-0 h-3 w-3"><circle cx="4.5" cy="4.5" r="4" fill="none"></circle><path d="M7.85355 7.14645C7.65829 6.95118 7.34171 6.95118 7.14645 7.14645C6.95118 7.34171 6.95118 7.65829 7.14645 7.85355L7.85355 7.14645ZM10.682 11.3891L11.0355 11.7426L11.7426 11.0355L11.3891 10.682L10.682 11.3891ZM7.14645 7.85355L10.682 11.3891L11.3891 10.682L7.85355 7.14645L7.14645 7.85355Z" stroke="none"></path></svg><input autoComplete="off" name="q" placeholder="Search" role="searchbox" class="outline-none w-full bg-gray-10 dark:bg-gray-85 placeholder:text-secondary pr-3 py-2 text-sm"/><span class="text-secondary text-xs font-normal font-mono leading-none px-1.5 py-1 bg-level-3 hidden sm:inline-flex rounded border border-slate-300 ">/</span></div><div class="w-12 shrink-0 hidden lg:block"></div></div></div><div class="hidden lg:flex border-b gap-3 pl-6"><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../user-guide-getting-started.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Getting Started<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../guides.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Guides<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../developer.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link text-link">Developer<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2 bg-blue-50 dark:bg-blue-30"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../reference.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Reference<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../release-notes/new-features.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Releases<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="../../tutorials.html" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Tutorials<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="https://status.snowflake.com" target="_blank" rel="noreferrer" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Status<!-- --><span class="ml-[10px]"><span class=""><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-question" class="svg-inline--fa fa-circle-question " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"></path></svg></span></span></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div></div></nav><div class="grid h-full auto-rows-auto relative overflow-y-hidden"><main class="flex overflow-y-hidden"><aside class="flex-none hidden lg:block overflow-y-auto bg-lightgray border-r pb-8 scroll-bar w-80 scroll-bar-stable" data-testid="toc-wrapper"><div class="pt-6 pl-1"><nav id="toc"><ol><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../../developer.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Overview"><span>Overview</span></a></div><ul></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Snowpark Library</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowpark/index.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowpark API"><span>Snowpark API</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowpark-ml/index.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowpark ML"><span>Snowpark ML</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Snowpark Runtime</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowpark-container-services/overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowpark Container Services"><span>Snowpark Container Services</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../extensibility.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Functions and Procedures"><span>Functions and Procedures</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(90deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:auto;opacity:0"><div><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../stored-procedures-vs-udfs.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Function or Procedure?"><span>Function or Procedure?</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../udf-stored-procedure-guidelines.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Guidelines"><span>Guidelines</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="stored-procedures-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Stored Procedures"><span>Stored Procedures</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(90deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:auto;opacity:0"><div><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-usage.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Usage"><span>Usage</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-rights.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Caller and Owner Rights"><span>Caller and Owner Rights</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-creating-sql.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Creating"><span>Creating</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-calling.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Calling"><span>Calling</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-calling-references.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Passing in References"><span>Passing in References</span></a></div><ul></ul></li><li class="pt-3 px-3 py-1 mx-5 pl-7"><span class="font-bold text-sm">Handler Writing</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-java.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Java"><span>Java</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center bg-highlight text-blue-60 dark:text-blue-30 pl-7" id="selected-item"><a href="stored-procedures-javascript.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Javascript"><span>Javascript</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(90deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:auto;opacity:0"><div><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-9"><a href="stored-procedures-api.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="API"><span>API</span></a></div><ul></ul></li></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-python.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Python"><span>Python</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-scala.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Scala"><span>Scala</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-7"><a href="stored-procedures-snowflake-scripting.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake Scripting"><span>Snowflake Scripting</span></a></div><ul></ul></li></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../udf/udf-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="User-Defined Functions"><span>User-Defined Functions</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../logging-tracing/logging-tracing-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Logging and Tracing"><span>Logging and Tracing</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../external-network-access/external-network-access-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="External Network Access"><span>External Network Access</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="../udf-stored-procedure-building.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Packaging Handler Code"><span>Packaging Handler Code</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Snowflake APIs</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowflake-python-api/snowflake-python-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake Python API"><span>Snowflake Python API</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../sql-api/index.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="SQL REST API"><span>SQL REST API</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Apps</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../streamlit/about-streamlit.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Streamlit in Snowflake"><span>Streamlit in Snowflake</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../native-apps/native-apps-about.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake Native App Framework"><span>Snowflake Native App Framework</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">External System Integration</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../../sql-reference/external-functions.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="External Functions"><span>External Functions</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../../user-guide/connectors.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Kafka and Spark Connectors"><span>Kafka and Spark Connectors</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Snowflake Scripting</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowflake-scripting/index.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake Scripting Developer Guide"><span>Snowflake Scripting Developer Guide</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Tools</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../snowflake-cli-v2/index.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake CLI"><span>Snowflake CLI</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../git/git-overview.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Git"><span>Git</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Drivers</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../drivers.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Overview"><span>Overview</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="pt-3 px-3 py-1 mx-5"><span class="font-bold text-sm">Reference</span></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="../../api-reference.html" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="API Reference"><span>API Reference</span></a></div><ul></ul></li></ol></nav></div></aside><div class="w-full overflow-y-auto" id="scrolltarget"><div class="flex flex-col-reverse xl:flex-row xl:justify-between mx-auto pt-8 px-8 mb-12 max-w-[1175px]"><div class="w-full xl:w-9/12"><nav class="mb-2 flex space-x-4 text-sm flex-wrap"><a href="../../developer.html" class="text-link hover:underline">Developer</a><span class="ui-icon mb-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg></span><a href="../extensibility.html" class="text-link hover:underline">Functions and Procedures</a><span class="ui-icon mb-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg></span><a href="stored-procedures-overview.html" class="text-link hover:underline">Stored Procedures</a><span class="ui-icon mb-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg></span><span class="mb-2">Javascript</span></nav><article>


  
  <section id="writing-stored-procedures-in-javascript">
<h1>Writing Stored Procedures in JavaScript<a class="headerlink" href="stored-procedures-javascript.html#writing-stored-procedures-in-javascript" title="Link to this heading">¶</a></h1>

<p>This topic explains how to write the JavaScript code for a stored procedure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To both create and call an anonymous procedure, use <a class="reference internal" href="../../sql-reference/sql/call-with.html"><span class="doc">CALL (with Anonymous Procedure)</span></a>. Creating and calling an anonymous procedure does
not require a role with CREATE PROCEDURE schema privileges.</p>
</div>


<p>You can capture log and trace data as your handler code executes. For more information, refer to
<a class="reference internal" href="../logging-tracing/logging-tracing-overview.html"><span class="doc">Logging and Tracing Overview</span></a>.</p>
<section id="understanding-the-javascript-api">
<h2>Understanding the JavaScript API<a class="headerlink" href="stored-procedures-javascript.html#understanding-the-javascript-api" title="Link to this heading">¶</a></h2>
<p>The JavaScript API for stored procedures is similar to, but not identical to, the APIs in Snowflake connectors and drivers
(Node.js, JDBC, Python, etc.).</p>
<p>The API enables you to perform operations such as:</p>
<ul class="simple">
<li><p>Execute a SQL statement.</p></li>
<li><p>Retrieve the results of a query (i.e. a result set).</p></li>
<li><p>Retrieve metadata about the result set (number of columns, data types of the columns, etc.).</p></li>
</ul>
<p>These operations are carried out by calling methods on the following objects:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">snowflake</span></code>, which has methods to create a <code class="code docutils literal notranslate"><span class="pre">Statement</span></code> object and execute a SQL command.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Statement</span></code>, which helps you execute prepared statements and access metadata for those prepared statements,
and allows you to get back a ResultSet object.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ResultSet</span></code>, which holds the results of a query (e.g. the rows of data retrieved for a SELECT statement).</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">SfDate</span></code>, which is an extension of JavaScript Date (with additional methods) and serves as a return type for
the Snowflake SQL data types TIMESTAMP_LTZ, TIMESTAMP_NTZ, and TIMESTAMP_TZ.</p></li>
</ul>
<p>These objects are described in detail in the <a class="reference internal" href="stored-procedures-api.html"><span class="doc">JavaScript Stored Procedures API</span></a>.</p>
<p>A typical stored procedure contains code similar to the following pseudo-code:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="gi">var</span> <span class="gi">my_sql_command1</span> <span class="p">=</span> <span class="vi">"delete from history_table where event_year &lt; 2016"</span><span class="p">;</span>
<span class="gi">var</span> <span class="gi">statement1</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span><span class="gi">my_sql_command1</span><span class="p">);</span>
<span class="gi">statement1</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>

<span class="gi">var</span> <span class="gi">my_sql_command2</span> <span class="p">=</span> <span class="vi">"delete from log_table where event_year &lt; 2016"</span><span class="p">;</span>
<span class="gi">var</span> <span class="gi">statement2</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span><span class="gi">my_sql_command2</span><span class="p">);</span>
<span class="gi">statement2</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
</pre></div>
</div><div data-codeblock-index="0" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>This code uses an object named <code class="code docutils literal notranslate"><span class="pre">snowflake</span></code>, which is a special object
that exists without being declared. The object is provided inside the context of each stored
procedure and exposes the API to allow you to interact with the server.</p>
<p>The other variables (e.g. <code class="code docutils literal notranslate"><span class="pre">statement1</span></code>) are created with JavaScript <code class="code docutils literal notranslate"><span class="pre">var</span></code> statements. For example:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">statement1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
</pre></div>
</div><div data-codeblock-index="1" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>As shown in the code sample above, the <code class="code docutils literal notranslate"><span class="pre">snowflake</span></code> object allows you
to create a <code class="code docutils literal notranslate"><span class="pre">Statement</span></code> object by calling one of the methods in the API.</p>
<p>Here’s an example that retrieves a <code class="code docutils literal notranslate"><span class="pre">ResultSet</span></code> and iterates through it:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">procedure</span> <span class="gi">read_result_set</span><span class="p">()</span>
  <span class="ni">returns</span> <span class="ni">float</span> <span class="ni">not</span> <span class="ni">null</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">as</span>     
  <span class="p">$$  </span>
    <span class="gi">var</span> <span class="gi">my_sql_command</span> <span class="p">=</span> <span class="vi">"select * from table1"</span><span class="p">;</span>
    <span class="gi">var</span> <span class="gi">statement1</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span> <span class="p">{</span><span class="gi">sqlText</span><span class="na">: my_sql_command</span><span class="p">}</span> <span class="p">);</span>
    <span class="gi">var</span> <span class="gi">result_set1</span> <span class="p">=</span> <span class="gi">statement1</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
    <span class="p">//</span> <span class="ni">Loop</span> <span class="gi">through</span> <span class="gi">the</span> <span class="gi">results</span><span class="p">,</span> <span class="gi">processing</span> <span class="ni">one</span> <span class="ni">row</span> <span class="ni">at</span> <span class="nf">a</span> <span class="ni">time</span><span class="p">...</span> 
    <span class="ni">while</span> <span class="p">(</span><span class="gi">result_set1</span><span class="p">.</span><span class="ni">next</span><span class="p">())</span>  <span class="p">{</span>
       <span class="gi">var</span> <span class="gi">column1</span> <span class="p">=</span> <span class="gi">result_set1</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
       <span class="gi">var</span> <span class="gi">column2</span> <span class="p">=</span> <span class="gi">result_set1</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">2</span><span class="p">);</span>
       <span class="p">//</span> <span class="ni">Do</span> <span class="gi">something</span> <span class="ni">with</span> <span class="gi">the</span> <span class="gi">retrieved</span> <span class="ni">values</span><span class="p">...</span>
       <span class="p">}</span>
  <span class="ni">return</span> <span class="nf">0</span><span class="p">.</span><span class="nf">0</span><span class="p">;</span> <span class="p">//</span> <span class="ni">Replace</span> <span class="ni">with</span> <span class="gi">something</span> <span class="gi">more</span> <span class="gi">useful</span><span class="p">.</span>
<span class="p">  $$</span>
  <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="2" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The <a class="reference internal" href="stored-procedures-javascript.html#label-stored-procedure-examples"><span class="std std-ref">Examples</span></a> section (at the end of this topic) provides additional examples
that exercise each of the objects, and many of the methods, in the stored procedure JavaScript API.</p>
</section>
<section id="sql-and-javascript-data-type-mapping">
<span id="label-stored-procedure-data-type-mapping"></span><h2>SQL and JavaScript Data Type Mapping<a class="headerlink" href="stored-procedures-javascript.html#sql-and-javascript-data-type-mapping" title="Link to this heading">¶</a></h2>
<p>When calling, using, and getting values back from stored procedures, you often need to convert from a Snowflake SQL
data type to a JavaScript data type or vice versa.</p>
<p>SQL to JavaScript conversion can occur when:</p>
<ul class="simple">
<li><p>Calling a stored procedure with an argument. The argument is a SQL data type; when it is stored inside a
JavaScript variable inside the stored procedure, it must be converted.</p></li>
<li><p>When retrieving a value from a ResultSet object into a JavaScript variable. The ResultSet holds the value as a SQL
data type, and the JavaScript variable must store the value as one of the JavaScript data types.</p></li>
</ul>
<p>JavaScript to SQL conversion can occur when:</p>
<ul class="simple">
<li><p>Returning a value from the stored procedure. The <code class="code docutils literal notranslate"><span class="pre">return</span></code> statement typically contains a JavaScript
variable that must be converted to a SQL data type.</p></li>
<li><p>When dynamically constructing a SQL statement that uses a value in a JavaScript variable.</p></li>
<li><p>When binding a JavaScript variable’s value to a prepared statement.</p></li>
</ul>
<p>For more information about how Snowflake maps JavaScript and SQL data types, see <a class="reference internal" href="../udf-stored-procedure-data-type-mapping.html#label-javascript-supported-snowpark-types"><span class="std std-ref">SQL-JavaScript Data Type Mappings</span></a>.</p>
</section>
<section id="general-tips">
<h2>General Tips<a class="headerlink" href="stored-procedures-javascript.html#general-tips" title="Link to this heading">¶</a></h2>
<section id="line-continuation">
<h3>Line Continuation<a class="headerlink" href="stored-procedures-javascript.html#line-continuation" title="Link to this heading">¶</a></h3>
<p>SQL statements can be quite long, and it is not always practical to fit them on a single line. JavaScript treats a
newline as the end of a statement. If you want to split a long SQL statement across multiple lines, you can use
the usual JavaScript techniques for handling long strings, including:</p>
<ul>
<li><p>Put a backslash (line continuation character) immediately prior to the end of the line. For example:</p>
<div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">sql_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SELECT * \</span>
<span class="s2">                       FROM table1;"</span><span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="3" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
<li><p>Use backticks (single backquotes) rather than double quotes around the string. For example:</p>
<div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">sql_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`SELECT *</span>
<span class="sb">                       FROM table1;`</span><span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="4" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
<li><p>Accumulate the string. For example:</p>
<div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">sql_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SELECT col1, col2"</span>
<span class="nx">sql_command</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">"     FROM table1"</span>
<span class="nx">sql_command</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">"     WHERE col1 &gt;= 100"</span>
<span class="nx">sql_command</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">"     ORDER BY col2;"</span>
</pre></div>
</div><div data-codeblock-index="5" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
</ul>
</section>
</section>
<section id="javascript-stored-procedure-considerations">
<h2>JavaScript Stored Procedure Considerations<a class="headerlink" href="stored-procedures-javascript.html#javascript-stored-procedure-considerations" title="Link to this heading">¶</a></h2>
<section id="javascript-number-range">
<h3>JavaScript Number Range<a class="headerlink" href="stored-procedures-javascript.html#javascript-number-range" title="Link to this heading">¶</a></h3>
<p>The range for numbers with precision intact is from</p>
<blockquote>
<div><p>-(2^53 -1)</p>
</div></blockquote>
<p>to</p>
<blockquote>
<div><p>(2^53 -1)</p>
</div></blockquote>
<p>The range of valid values in Snowflake NUMBER(p, s) and DOUBLE data types is larger. Retrieving a value from Snowflake
and storing it in a JavaScript numeric variable can result in loss of precision. For example:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">CREATE</span><span class="w"> </span><span class="nx">OR</span><span class="w"> </span><span class="nx">REPLACE</span><span class="w"> </span><span class="nx">FUNCTION</span><span class="w"> </span><span class="nx">num_test</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="kr">double</span><span class="p">)</span>
<span class="w">  </span><span class="nx">RETURNS</span><span class="w"> </span><span class="nx">string</span>
<span class="w">  </span><span class="nx">LANGUAGE</span><span class="w"> </span><span class="nx">JAVASCRIPT</span>
<span class="nx">AS</span>
<span class="nx">$$</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">A</span><span class="p">;</span>
<span class="nx">$$</span>
<span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="6" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">select</span><span class="w"> </span><span class="nx">hash</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="nx">AS</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span>
<span class="w">       </span><span class="nx">num_test</span><span class="p">(</span><span class="nx">hash</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span><span class="w"> </span><span class="nx">AS</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span>
<span class="w">       </span><span class="nx">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">;</span>
<span class="o">+----------------------+----------------------+------------+</span>
<span class="o">|</span><span class="w">                    </span><span class="nx">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">B</span><span class="w">                    </span><span class="o">|</span><span class="w">      </span><span class="nx">A</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">|</span>
<span class="o">|----------------------+----------------------+------------|</span>
<span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mf">4730168494964875235</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mf">4730168494964875000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mf">235.00000</span><span class="w"> </span><span class="o">|</span>
<span class="o">+----------------------+----------------------+------------+</span>
</pre></div>
</div><div data-codeblock-index="7" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The first two columns should match, and the third should contain 0.0.</p>
<p>The problem applies to JavaScript user-defined functions (UDFs) and stored procedures.</p>
<p>If you experience the problem in stored procedures when using <code class="code docutils literal notranslate"><span class="pre">getColumnValue()</span></code>, you might be able to avoid the
problem by retrieving a value as a string, e.g. with:</p>
<div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getColumnValueAsString</span><span class="p">()</span>
</pre></div>
</div><div data-codeblock-index="8" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>You can then return the string from the stored procedure, and cast the string to a numeric data type in SQL.</p>
</section>
<section id="javascript-error-handling">
<h3>JavaScript Error Handling<a class="headerlink" href="stored-procedures-javascript.html#javascript-error-handling" title="Link to this heading">¶</a></h3>
<p>Because a stored procedure is written in JavaScript, it can use JavaScript’s try/catch syntax.</p>
<p>The stored procedure can throw a pre-defined exception or a custom exception. A simple example of throwing a
custom exception is <a class="reference internal" href="stored-procedures-javascript.html#label-stored-procedure-error-handling"><span class="std std-ref">here</span></a>.</p>
<p>You can execute your SQL statements inside a try block. If an error occurs, then your catch block can roll back all of
the statements (if you put the statements in a transaction). The Examples section contains an example of
<a class="reference internal" href="stored-procedures-javascript.html#label-example-using-transaction-in-stored-procedures"><span class="std std-ref">rolling back a transaction in a stored procedure</span></a>.</p>
</section>
<section id="restrictions-on-stored-procedures">
<h3>Restrictions on Stored Procedures<a class="headerlink" href="stored-procedures-javascript.html#restrictions-on-stored-procedures" title="Link to this heading">¶</a></h3>
<p>Stored procedures have the following restrictions:</p>
<ul class="simple">
<li><p>The JavaScript code cannot call the JavaScript <code class="code docutils literal notranslate"><span class="pre">eval()</span></code> function.</p></li>
<li><p>JavaScript stored procedures support access to the standard JavaScript library. Note that this excludes many objects and methods
typically provided by browsers. There is no mechanism to import, include, or call additional libraries.
Allowing 3rd-party libraries could create security holes.</p></li>
<li><p>JavaScript code is executed within a restricted engine, preventing system calls from the JavaScript
context (e.g. no network and disk access), and constraining the system resources available to the engine, specifically memory.</p></li>
</ul>
</section>
<section id="case-sensitivity-in-javascript-arguments">
<span id="label-considerations-for-case-sensitivity-in-stored-procedures"></span><h3>Case-sensitivity in JavaScript Arguments<a class="headerlink" href="stored-procedures-javascript.html#case-sensitivity-in-javascript-arguments" title="Link to this heading">¶</a></h3>
<p>Argument names are case-insensitive in the SQL portion of the stored procedure code, but are
case-sensitive in the JavaScript portion.</p>
<p>For stored procedures (and UDFs) that use JavaScript, identifiers (such as
argument names) in the SQL portion of the statement are converted to uppercase automatically (unless you delimit the
identifier with double quotes), while argument names in the JavaScript portion
will be left in their original case. This can cause your stored procedure to
fail without returning an explicit error message because the arguments aren’t seen.</p>
<p>Here is an example of a stored procedure in which the name of an argument in the
JavaScript code does not match the name of the argument in the SQL code merely
because the case will be different:</p>
<p>In the example below, the first assignment statement is incorrect because the name <code class="docutils literal notranslate"><span class="pre">argument1</span></code> is in lower case.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-javascript notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">PROCEDURE</span> <span class="nf">f</span><span class="p">(</span><span class="gi">argument1</span> <span class="ni">VARCHAR</span><span class="p">)</span>
<span class="ni">RETURNS</span> <span class="ni">VARCHAR</span>
<span class="ni">LANGUAGE</span> <span class="ni">JAVASCRIPT</span>
<span class="ni">AS</span>
<span class="p">$$</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">local_variable1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">argument1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Incorrect</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">local_variable2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ARGUMENT1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Correct</span>
<span class="p">$$;</span>
</pre></div>
</div><div data-codeblock-index="9" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Using uppercase identifiers (especially argument names) consistently across
your SQL statements and JavaScript code tends to reduce silent errors.</p>
</section>
<section id="javascript-delimiters">
<h3>JavaScript Delimiters<a class="headerlink" href="stored-procedures-javascript.html#javascript-delimiters" title="Link to this heading">¶</a></h3>
<p>The JavaScript portion of the stored procedure code must be enclosed within either single quotes <code class="code docutils literal notranslate"><span class="pre">'</span></code> or
double dollar signs <code class="code docutils literal notranslate"><span class="pre">$$</span></code>.</p>
<p>Using <code class="code docutils literal notranslate"><span class="pre">$$</span></code> makes it easier to handle JavaScript code that contains single quotes without “escaping” those quotes.</p>
</section>
<section id="overloading-stored-procedure-names">
<span id="label-example-overloading-stored-procedure-names"></span><h3>Overloading Stored Procedure Names<a class="headerlink" href="stored-procedures-javascript.html#overloading-stored-procedure-names" title="Link to this heading">¶</a></h3>
<p>For information about overloading and naming conventions, see <a class="reference internal" href="../udf-stored-procedure-naming-conventions.html"><span class="doc">Naming and overloading procedures and UDFs</span></a>.</p>
</section>
<section id="binding-variables">
<span id="label-stored-procedures-binding-variables"></span><h3>Binding Variables<a class="headerlink" href="stored-procedures-javascript.html#binding-variables" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../sql-reference/bind-variables.html"><span class="doc">Binding</span></a> a variable to a SQL statement allows you to use the value of
the variable in the statement.</p>
<p>You can bind NULL values as well as non-NULL values.</p>
<p>The data type of the variable should be appropriate for the use of the value in the SQL statement. Currently, only
JavaScript variables of type number, string, and <a class="reference internal" href="stored-procedures-api.html#label-sfdate"><span class="std std-ref">SfDate</span></a> can be bound. (For details about the
mapping between SQL data types and JavaScript data types, see <a class="reference internal" href="stored-procedures-javascript.html#label-stored-procedure-data-type-mapping"><span class="std std-ref">SQL and JavaScript Data Type Mapping</span></a>.)</p>
<p>Here is a short example of binding:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">createStatement</span><span class="p">(</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">   </span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"INSERT INTO table2 (col1, col2) VALUES (?, ?);"</span><span class="p">,</span>
<span class="w">   </span><span class="nx">binds</span><span class="o">:</span><span class="p">[</span><span class="s2">"LiteralValue1"</span><span class="p">,</span><span class="w"> </span><span class="nx">variable2</span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="10" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>Here is a more complete example. This example binds TIMESTAMP information. Because direct binding of SQL TIMESTAMP
data is not supported, this example passes the timestamp as a VARCHAR, then binds that to the statement. Note that
the SQL statement itself converts the VARCHAR to a TIMESTAMP by calling the TO_TIMESTAMP() function:</p>
<blockquote>
<div><p>This simple function returns TRUE if the specified timestamp is prior to now, and FALSE otherwise.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">OR</span> <span class="ni">REPLACE</span> <span class="ni">PROCEDURE</span> <span class="gi">right_bind</span><span class="p">(</span><span class="gi">TIMESTAMP_VALUE</span> <span class="ni">VARCHAR</span><span class="p">)</span>
<span class="ni">RETURNS</span> <span class="ni">BOOLEAN</span>
<span class="ni">LANGUAGE</span> <span class="ni">JAVASCRIPT</span>
<span class="ni">AS</span>
<span class="p">$$</span>
<span class="gi">var</span> <span class="gi">cmd</span> <span class="p">=</span> <span class="vi">"SELECT CURRENT_DATE() &gt; TO_TIMESTAMP(:1, 'YYYY-MM-DD HH24:MI:SS')"</span><span class="p">;</span>
<span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
          <span class="p">{</span>
          <span class="gi">sqlText</span><span class="na">: cmd</span><span class="p">,</span>
          <span class="gi">binds</span><span class="p">:</span> <span class="p">[</span><span class="gi">TIMESTAMP_VALUE</span><span class="p">]</span>
          <span class="p">}</span>
          <span class="p">);</span>
<span class="gi">var</span> <span class="gi">result1</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
<span class="gi">result1</span><span class="p">.</span><span class="ni">next</span><span class="p">();</span>
<span class="ni">return</span> <span class="gi">result1</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
<span class="p">$$</span>
<span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="11" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">right_bind</span><span class="p">(</span><span class="nc">'2019-09-16 01:02:03'</span><span class="p">);</span>
<span class="p">+</span><span class="no">------------+</span>
<span class="no">| RIGHT_BIND |</span>
<span class="no">|------------|</span>
<span class="no">| True       |</span>
<span class="p">+</span><span class="no">------------+</span>
</pre></div>
</div><div data-codeblock-index="12" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>This shows how to bind a VARCHAR, a TIMESTAMP_LTZ, and other data types to an <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statement. The
TIMESTAMP_LTZ binds an <a class="reference internal" href="stored-procedures-api.html#label-sfdate"><span class="std std-ref">SfDate</span></a> variable that is created inside the stored procedure.</p>
<blockquote>
<div><p>Create a table.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">TABLE</span> <span class="gi">table1</span> <span class="p">(</span><span class="nf">v</span> <span class="ni">VARCHAR</span><span class="p">,</span>
                     <span class="gi">ts1</span> <span class="ni">TIMESTAMP_LTZ</span><span class="p">(</span><span class="nf">9</span><span class="p">),</span> 
                     <span class="gi">int1</span> <span class="ni">INTEGER</span><span class="p">,</span>
                     <span class="gi">float1</span> <span class="ni">FLOAT</span><span class="p">,</span>
                     <span class="gi">numeric1</span> <span class="ni">NUMERIC</span><span class="p">(</span><span class="gi">10</span><span class="p">,</span><span class="nf">9</span><span class="p">),</span>
                     <span class="gi">ts_ntz1</span> <span class="ni">TIMESTAMP_NTZ</span><span class="p">,</span>
                     <span class="gi">date1</span> <span class="ni">DATE</span><span class="p">,</span>
                     <span class="gi">time1</span> <span class="ni">TIME</span>
                     <span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="13" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Create a stored procedure. This procedure accepts a <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>, and converts the VARCHAR to a <code class="docutils literal notranslate"><span class="pre">TIMESTAMP_LTZ</span></code>
by using SQL. The procedure then retrieves the converted value from a ResultSet. The value is stored in a JavaScript
variable of type <a class="reference internal" href="stored-procedures-api.html#label-sfdate"><span class="std std-ref">SfDate</span></a>. The stored procedure then binds both the original <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> and the <code class="docutils literal notranslate"><span class="pre">TIMESTAMP_LTZ</span></code> to an <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statement. This also demonstrates binding of JavaScript numeric data.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">OR</span> <span class="ni">REPLACE</span> <span class="ni">PROCEDURE</span> <span class="gi">string_to_timestamp_ltz</span><span class="p">(</span><span class="gi">TSV</span> <span class="ni">VARCHAR</span><span class="p">)</span> 
<span class="ni">RETURNS</span> <span class="ni">TIMESTAMP_LTZ</span> 
<span class="ni">LANGUAGE</span> <span class="ni">JAVASCRIPT</span> 
<span class="ni">AS</span> 
<span class="p">$$ </span>
    <span class="p">//</span> <span class="ni">Convert</span> <span class="gi">the</span> <span class="ni">input</span> <span class="ni">varchar</span> <span class="ni">to</span> <span class="nf">a</span> <span class="ni">TIMESTAMP_LTZ</span><span class="p">.</span>
    <span class="gi">var</span> <span class="gi">sql_command</span> <span class="p">=</span> <span class="vi">"SELECT '"</span> <span class="p">+</span> <span class="gi">TSV</span> <span class="p">+</span> <span class="vi">"'::TIMESTAMP_LTZ;"</span><span class="p">;</span> 
    <span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span> <span class="p">{</span><span class="gi">sqlText</span><span class="na">: sql_command</span><span class="p">}</span> <span class="p">);</span> 
    <span class="gi">var</span> <span class="nn">resultSet</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span> 
    <span class="nn">resultSet</span><span class="p">.</span><span class="ni">next</span><span class="p">();</span> 
    <span class="p">//</span> <span class="gi">Retrieve</span> <span class="gi">the</span> <span class="ni">TIMESTAMP_LTZ</span> <span class="ni">and</span> <span class="gi">store</span> <span class="gi">it</span> <span class="ni">in</span> <span class="gi">an</span> <span class="gi">SfDate</span> <span class="gi">variable</span><span class="p">.</span>
    <span class="gi">var</span> <span class="gi">my_sfDate</span> <span class="p">=</span> <span class="nn">resultSet</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span> 

    <span class="nf">f</span> <span class="p">=</span> <span class="nf">3</span><span class="p">.</span><span class="gi">1415926</span><span class="p">;</span>

    <span class="p">//</span> <span class="gi">Specify</span> <span class="gi">that</span> <span class="gi">we</span><span class="nc">'d like position-based binding.</span>
<span class="nc">    sql_command = `INSERT INTO table1 VALUES(:1, :2, :3, :4, :5, :6, :7, :8);` </span>
<span class="nc">    // Bind a VARCHAR, a TIMESTAMP_LTZ, a numeric to our INSERT statement.</span>
<span class="nc">    result = snowflake.execute(</span>
<span class="nc">        { </span>
<span class="nc">        sqlText: sql_command, </span>
<span class="nc">        binds: [TSV, my_sfDate, f, f, f, my_sfDate, my_sfDate, '</span><span class="gi">12</span><span class="na">:30:00</span><span class="p">.</span><span class="gi">123</span><span class="p">'</span> <span class="p">]</span> 
        <span class="p">}</span>
        <span class="p">);</span> 

    <span class="ni">return</span> <span class="gi">my_sfDate</span><span class="p">;</span> 
<span class="p">$$</span> <span class="p">;</span> 
</pre></div>
</div><div data-codeblock-index="14" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Call the procedure.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">string_to_timestamp_ltz</span><span class="p">(</span><span class="nc">'2008-11-18 16:00:00'</span><span class="p">);</span>
<span class="p">+</span><span class="no">-------------------------------+</span>
<span class="no">| STRING_TO_TIMESTAMP_LTZ       |</span>
<span class="no">|-------------------------------|</span>
<span class="no">| 2008-11-18 16:00:00.000 -0800 |</span>
<span class="p">+</span><span class="no">-------------------------------+</span>
</pre></div>
</div><div data-codeblock-index="15" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Verify that the row was inserted.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">table1</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------+</span>
<span class="no">| V                   | TS1                           | INT1 |   FLOAT1 |    NUMERIC1 | TS_NTZ1                 | DATE1      | TIME1    |</span>
<span class="no">|---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------|</span>
<span class="no">| 2008-11-18 16:00:00 | 2008-11-18 16:00:00.000 -0800 |    3 | 3.141593 | 3.141593000 | 2008-11-18 16:00:00.000 | 2008-11-18 | 12:30:00 |</span>
<span class="p">+</span><span class="no">---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------+</span>
</pre></div>
</div><div data-codeblock-index="16" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>For additional examples of binding data in JavaScript, see <a class="reference internal" href="../node-js/nodejs-driver-execute.html#label-nodejs-binding"><span class="std std-ref">Binding statement parameters</span></a>.</p>
</section>
<section id="code-requirements">
<h3>Code Requirements<a class="headerlink" href="stored-procedures-javascript.html#code-requirements" title="Link to this heading">¶</a></h3>
<p>The JavaScript code must define a single literal JavaScript object for the stored procedure to be valid.</p>
<p>If the JavaScript code does not meet this requirement, the stored procedure will be created; however, it will fail when called.</p>
<blockquote>
<div></div></blockquote>
</section>
<section id="code-size">
<h3>Code Size<a class="headerlink" href="stored-procedures-javascript.html#code-size" title="Link to this heading">¶</a></h3>
<p>Snowflake limits the maximum size of the JavaScript source code in the body of a JavaScript stored procedure. Snowflake recommends
limiting the size to 100 KB. (The code is stored in a compressed form, and the exact limit depends on the compressibility of the
code.)</p>
</section>
<section id="runtime-errors">
<h3>Runtime Errors<a class="headerlink" href="stored-procedures-javascript.html#runtime-errors" title="Link to this heading">¶</a></h3>
<p>Most errors in stored procedures show up at runtime because the JavaScript
code is interpreted at the time that the stored procedure runs rather than when
the stored procedure is created.</p>
</section>
<section id="support-for-dynamic-sql">
<h3>Support for Dynamic SQL<a class="headerlink" href="stored-procedures-javascript.html#support-for-dynamic-sql" title="Link to this heading">¶</a></h3>
<p>Stored procedures can be used to dynamically construct SQL statements. For example,
you could build a SQL command string that contains a mix of pre-configured
SQL and user inputs (e.g. a user’s account number).</p>
<p>For examples, see <a class="reference internal" href="stored-procedures-javascript.html#label-example-of-dynamic-sql-in-stored-procedure"><span class="std std-ref">Dynamically Creating a SQL Statement</span></a> and the <a class="reference internal" href="stored-procedures-javascript.html#label-stored-procedure-examples"><span class="std std-ref">Examples</span></a> section.</p>
</section>
<section id="synchronous-api">
<h3>Synchronous API<a class="headerlink" href="stored-procedures-javascript.html#synchronous-api" title="Link to this heading">¶</a></h3>
<p>The API for Snowflake stored procedures is synchronous. Within a stored
procedure, you can run only one thread at a time.</p>
<p>Note that this is different from the rule for the JavaScript executing with the Node.js
connector, which allows you to run asynchronous threads.</p>
</section>
</section>
<section id="examples">
<span id="label-stored-procedure-examples"></span><h2>Examples<a class="headerlink" href="stored-procedures-javascript.html#examples" title="Link to this heading">¶</a></h2>
<section id="basic-examples">
<span id="label-basic-stored-procedure-examples"></span><h3>Basic Examples<a class="headerlink" href="stored-procedures-javascript.html#basic-examples" title="Link to this heading">¶</a></h3>
<p>The following example shows the basic syntax of creating and calling a stored procedure. It doesn’t execute any SQL
or procedural code. However, it provides a starting point for more realistic examples later:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">procedure</span> <span class="gi">sp_pi</span><span class="p">()</span>
    <span class="ni">returns</span> <span class="ni">float</span> <span class="ni">not</span> <span class="ni">null</span>
    <span class="ni">language</span> <span class="ni">javascript</span>
    <span class="ni">as</span>
    <span class="p">$$</span>
    <span class="ni">return</span> <span class="nf">3</span><span class="p">.</span><span class="gi">1415926</span><span class="p">;</span>
<span class="p">    $$</span>
    <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="17" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">$$</span></code> delimiter marks the beginning and end of the JavaScript code.</p>
<p>Now call the procedure you just created:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_pi</span><span class="p">();</span>
<span class="p">+</span><span class="no">-----------+</span>
<span class="no">|     SP_PI |</span>
<span class="no">|-----------|</span>
<span class="no">| 3.1415926 |</span>
<span class="p">+</span><span class="no">-----------+</span>
</pre></div>
</div><div data-codeblock-index="18" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The following example illustrates how to execute a SQL statement inside a stored procedure:</p>
<ol class="arabic">
<li><p>Create a table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">TABLE</span> <span class="gi">stproc_test_table1</span> <span class="p">(</span><span class="gi">num_col1</span> <span class="ni">numeric</span><span class="p">(</span><span class="gi">14</span><span class="p">,</span><span class="nf">7</span><span class="p">));</span>
</pre></div>
</div><div data-codeblock-index="19" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Create a stored procedure. This inserts a row into
an existing table named <code class="docutils literal notranslate"><span class="pre">stproc_test_table1</span></code> and returns the value “Succeeded.”.
The returned value is not particularly useful from a SQL perspective, but it
allows you to return status information (e.g. “Succeeded.” or “Failed.”) to the user.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">procedure</span> <span class="gi">stproc1</span><span class="p">(</span><span class="gi">FLOAT_PARAM1</span> <span class="ni">FLOAT</span><span class="p">)</span>
    <span class="ni">returns</span> <span class="ni">string</span>
    <span class="ni">language</span> <span class="ni">javascript</span>
    <span class="ni">strict</span>
    <span class="ni">execute</span> <span class="ni">as</span> <span class="ni">owner</span>
    <span class="ni">as</span>
    <span class="p">$$</span>
    <span class="gi">var</span> <span class="gi">sql_command</span> <span class="p">=</span> 
     <span class="vi">"INSERT INTO stproc_test_table1 (num_col1) VALUES ("</span> <span class="p">+</span> <span class="gi">FLOAT_PARAM1</span> <span class="p">+</span> <span class="vi">")"</span><span class="p">;</span>
    <span class="gi">try</span> <span class="p">{</span>
        <span class="gi">snowflake</span><span class="p">.</span><span class="ni">execute</span> <span class="p">(</span>
            <span class="p">{</span><span class="gi">sqlText</span><span class="na">: sql_command</span><span class="p">}</span>
            <span class="p">);</span>
        <span class="ni">return</span> <span class="vi">"Succeeded."</span><span class="p">;</span>   <span class="p">//</span> <span class="ni">Return</span> <span class="nf">a</span> <span class="gi">success</span><span class="p">/</span><span class="gi">error</span> <span class="gi">indicator</span><span class="p">.</span>
        <span class="p">}</span>
    <span class="gi">catch</span> <span class="p">(</span><span class="gi">err</span><span class="p">)</span>  <span class="p">{</span>
        <span class="ni">return</span> <span class="vi">"Failed: "</span> <span class="p">+</span> <span class="gi">err</span><span class="p">;</span>   <span class="p">//</span> <span class="ni">Return</span> <span class="nf">a</span> <span class="gi">success</span><span class="p">/</span><span class="gi">error</span> <span class="gi">indicator</span><span class="p">.</span>
        <span class="p">}</span>
<span class="p">    $$</span>
    <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="20" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the stored procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">stproc1</span><span class="p">(</span><span class="nf">5</span><span class="p">.</span><span class="gi">14</span><span class="kn">::FLOAT</span><span class="p">);</span>
<span class="p">+</span><span class="no">------------+</span>
<span class="no">| STPROC1    |</span>
<span class="no">|------------|</span>
<span class="no">| Succeeded. |</span>
<span class="p">+</span><span class="no">------------+</span>
</pre></div>
</div><div data-codeblock-index="21" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Confirm that the stored procedure inserted the row:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">select</span> <span class="p">*</span> <span class="ni">from</span> <span class="gi">stproc_test_table1</span><span class="p">;</span>
<span class="p">+</span><span class="no">-----------+</span>
<span class="no">|  NUM_COL1 |</span>
<span class="no">|-----------|</span>
<span class="no">| 5.1400000 |</span>
<span class="p">+</span><span class="no">-----------+</span>
</pre></div>
</div><div data-codeblock-index="22" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
<p>The following example retrieves a result:</p>
<ol class="arabic">
<li><p>Create a procedure to count the number of rows in a table (equivalent to <code class="samp docutils literal notranslate"><span class="pre">select</span> <span class="pre">count(*)</span> <span class="pre">from</span> <em><span class="pre">table</span></em></code>):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">procedure</span> <span class="gi">get_row_count</span><span class="p">(</span><span class="ni">table_name</span> <span class="ni">VARCHAR</span><span class="p">)</span>
  <span class="ni">returns</span> <span class="ni">float</span> <span class="ni">not</span> <span class="ni">null</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">as</span>
  <span class="p">$$</span>
  <span class="gi">var</span> <span class="gi">row_count</span> <span class="p">=</span> <span class="nf">0</span><span class="p">;</span>
  <span class="p">//</span> <span class="gi">Dynamically</span> <span class="gi">compose</span> <span class="gi">the</span> <span class="ni">SQL</span> <span class="ni">statement</span> <span class="ni">to</span> <span class="ni">execute</span><span class="p">.</span>
  <span class="gi">var</span> <span class="gi">sql_command</span> <span class="p">=</span> <span class="vi">"select count(*) from "</span> <span class="p">+</span> <span class="ni">TABLE_NAME</span><span class="p">;</span>
  <span class="p">//</span> <span class="gi">Run</span> <span class="gi">the</span> <span class="ni">statement</span><span class="p">.</span>
  <span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
         <span class="p">{</span>
         <span class="gi">sqlText</span><span class="na">: sql_command</span>
         <span class="p">}</span>
      <span class="p">);</span>
  <span class="gi">var</span> <span class="gi">res</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
  <span class="p">//</span> <span class="ni">Get</span> <span class="gi">back</span> <span class="gi">the</span> <span class="ni">row</span> <span class="ni">count</span><span class="p">.</span> <span class="gi">Specifically</span><span class="p">,</span> <span class="p">...</span>
  <span class="p">//</span> <span class="p">...</span> <span class="ni">get</span> <span class="gi">the</span> <span class="ni">first</span> <span class="p">(</span><span class="ni">and</span> <span class="ni">in</span> <span class="gi">this</span> <span class="ni">case</span> <span class="ni">only</span><span class="p">)</span> <span class="ni">row</span> <span class="ni">from</span> <span class="gi">the</span> <span class="ni">result</span> <span class="ni">set</span> <span class="p">...</span>
  <span class="gi">res</span><span class="p">.</span><span class="ni">next</span><span class="p">();</span>
  <span class="p">//</span> <span class="p">...</span> <span class="ni">and</span> <span class="ni">then</span> <span class="ni">get</span> <span class="gi">the</span> <span class="gi">returned</span> <span class="ni">value</span><span class="p">,</span> <span class="gi">which</span> <span class="ni">in</span> <span class="gi">this</span> <span class="ni">case</span> <span class="ni">is</span> <span class="gi">the</span> <span class="ni">number</span> <span class="ni">of</span>
  <span class="p">//</span> <span class="ni">rows</span> <span class="ni">in</span> <span class="gi">the</span> <span class="ni">table</span><span class="p">.</span>
  <span class="gi">row_count</span> <span class="p">=</span> <span class="gi">res</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
  <span class="ni">return</span> <span class="gi">row_count</span><span class="p">;</span>
<span class="p">  $$</span>
  <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="23" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Ask the stored procedure how many rows are in the table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">get_row_count</span><span class="p">(</span><span class="nc">'stproc_test_table1'</span><span class="p">);</span>
<span class="p">+</span><span class="no">---------------+</span>
<span class="no">| GET_ROW_COUNT |</span>
<span class="no">|---------------|</span>
<span class="no">|             3 |</span>
<span class="p">+</span><span class="no">---------------+</span>
</pre></div>
</div><div data-codeblock-index="24" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Check independently that you got the right number:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">select</span> <span class="ni">count</span><span class="p">(*)</span> <span class="ni">from</span> <span class="gi">stproc_test_table1</span><span class="p">;</span>
<span class="p">+</span><span class="no">----------+</span>
<span class="no">| COUNT(*) |</span>
<span class="no">|----------|</span>
<span class="no">|        3 |</span>
<span class="p">+</span><span class="no">----------+</span>
</pre></div>
</div><div data-codeblock-index="25" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
</section>
<section id="recursive-stored-procedure-example">
<h3>Recursive Stored Procedure Example<a class="headerlink" href="stored-procedures-javascript.html#recursive-stored-procedure-example" title="Link to this heading">¶</a></h3>
<p>The following example shows a basic, but not particularly realistic, recursive stored procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">table</span> <span class="gi">stproc_test_table2</span> <span class="p">(</span><span class="gi">col1</span> <span class="ni">FLOAT</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="26" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create or replace procedure recursive_stproc(counter FLOAT)
    returns varchar not null
    language javascript
    as
    -- "$$" is the delimiter that shows the beginning and end of the stored proc.
    $$
    var counter1 = COUNTER;
    var returned_value = "";
    var accumulator = "";
    var stmt = snowflake.createStatement(
        {
        sqlText: "INSERT INTO stproc_test_table2 (col1) VALUES (?);",
        binds:[counter1]
        }
        );
    var res = stmt.execute();
    if (COUNTER &gt; 0)
        {
        stmt = snowflake.createStatement(
            {
            sqlText: "call recursive_stproc (?);",
            binds:[counter1 - 1]
            }
            );
        res = stmt.execute();
        res.next();
        returned_value = res.getColumnValue(1);
        }
    accumulator = accumulator + counter1 + ":" + returned_value;
    return accumulator;
    $$
    ;
</pre></div>
</div><div data-codeblock-index="27" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">recursive_stproc</span><span class="p">(</span><span class="nf">4</span><span class="p">.</span><span class="nf">0</span><span class="kn">::FLOAT</span><span class="p">);</span>
<span class="p">+</span><span class="no">------------------+</span>
<span class="no">| RECURSIVE_STPROC |</span>
<span class="no">|------------------|</span>
<span class="no">| 4:3:2:1:0:       |</span>
<span class="p">+</span><span class="no">------------------+</span>
</pre></div>
</div><div data-codeblock-index="28" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span> 
    <span class="ni">FROM</span> <span class="gi">stproc_test_table2</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">col1</span><span class="p">;</span>
<span class="p">+</span><span class="no">------+</span>
<span class="no">| COL1 |</span>
<span class="no">|------|</span>
<span class="no">|    0 |</span>
<span class="no">|    1 |</span>
<span class="no">|    2 |</span>
<span class="no">|    3 |</span>
<span class="no">|    4 |</span>
<span class="p">+</span><span class="no">------+</span>
</pre></div>
</div><div data-codeblock-index="29" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
<section id="dynamically-creating-a-sql-statement">
<span id="label-example-of-dynamic-sql-in-stored-procedure"></span><h3>Dynamically Creating a SQL Statement<a class="headerlink" href="stored-procedures-javascript.html#dynamically-creating-a-sql-statement" title="Link to this heading">¶</a></h3>
<p>The following example shows how to dynamically create a SQL statement:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As stated in <a class="reference internal" href="stored-procedures-usage.html#label-sql-injection"><span class="std std-ref">SQL Injection</span></a> (in this topic), be careful to guard against attacks when using dynamic SQL.</p>
</div>
<ol class="arabic">
<li><p>Create the stored procedure. This procedure allows you to pass the name of a table and get the number of rows in
that table (equivalent to <code class="samp docutils literal notranslate"><span class="pre">select</span> <span class="pre">count(*)</span> <span class="pre">from</span> <em><span class="pre">table_name</span></em></code>):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create or replace procedure get_row_count(table_name VARCHAR)
    returns float 
    not null
    language javascript
    as
    $$
    var row_count = 0;
    // Dynamically compose the SQL statement to execute.
    // Note that we uppercased the input parameter name.
    var sql_command = "select count(*) from " + TABLE_NAME;
    // Run the statement.
    var stmt = snowflake.createStatement(
           {
           sqlText: sql_command
           }
        );
    var res = stmt.execute();
    // Get back the row count. Specifically, ...
    // ... first, get the first (and in this case only) row from the
    //  result set ...
    res.next();
    // ... then extract the returned value (which in this case is the
    // number of rows in the table).
    row_count = res.getColumnValue(1);
    return row_count;
    $$
    ;
</pre></div>
</div><div data-codeblock-index="30" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the stored procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">get_row_count</span><span class="p">(</span><span class="nc">'stproc_test_table1'</span><span class="p">);</span>
<span class="p">+</span><span class="no">---------------+</span>
<span class="no">| GET_ROW_COUNT |</span>
<span class="no">|---------------|</span>
<span class="no">|             3 |</span>
<span class="p">+</span><span class="no">---------------+</span>
</pre></div>
</div><div data-codeblock-index="31" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Show the results from <code class="samp docutils literal notranslate"><span class="pre">select</span> <span class="pre">count(*)</span></code> for the same table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="ni">COUNT</span><span class="p">(*)</span> <span class="ni">FROM</span> <span class="gi">stproc_test_table1</span><span class="p">;</span>
<span class="p">+</span><span class="no">----------+</span>
<span class="no">| COUNT(*) |</span>
<span class="no">|----------|</span>
<span class="no">|        3 |</span>
<span class="p">+</span><span class="no">----------+</span>
</pre></div>
</div><div data-codeblock-index="32" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
</section>
<section id="retrieving-result-set-metadata">
<h3>Retrieving Result Set Metadata<a class="headerlink" href="stored-procedures-javascript.html#retrieving-result-set-metadata" title="Link to this heading">¶</a></h3>
<p>This example demonstrates retrieving a small amount of metadata from a result set:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create or replace table stproc_test_table3 (
    n10 numeric(10,0),     /* precision = 10, scale = 0 */
    n12 numeric(12,4),     /* precision = 12, scale = 4 */
    v1 varchar(19)         /* scale = 0 */
    );
</pre></div>
</div><div data-codeblock-index="33" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create or replace procedure get_column_scale(column_index float)
    returns float not null
    language javascript
    as
    $$
    var stmt = snowflake.createStatement(
        {sqlText: "select n10, n12, v1 from stproc_test_table3;"}
        );
    stmt.execute();  // ignore the result set; we just want the scale.
    return stmt.getColumnScale(COLUMN_INDEX); // Get by column index (1-based)
    $$
    ;
</pre></div>
</div><div data-codeblock-index="34" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>call get_column_scale(1);
+------------------+
| GET_COLUMN_SCALE |
|------------------|
|                0 |
+------------------+
</pre></div>
</div><div data-codeblock-index="35" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>call get_column_scale(2);
+------------------+
| GET_COLUMN_SCALE |
|------------------|
|                4 |
+------------------+
</pre></div>
</div><div data-codeblock-index="36" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>call get_column_scale(3);
+------------------+
| GET_COLUMN_SCALE |
|------------------|
|                0 |
+------------------+
</pre></div>
</div><div data-codeblock-index="37" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
<section id="catching-an-error-using-try-catch">
<span id="label-stored-procedure-error-handling"></span><h3>Catching an Error using Try/Catch<a class="headerlink" href="stored-procedures-javascript.html#catching-an-error-using-try-catch" title="Link to this heading">¶</a></h3>
<p>This example demonstrates using a JavaScript try/catch block to catch an error inside a stored procedure:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Create the stored procedure:</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    create procedure broken()
      returns varchar not null
      language javascript
      as
      $$
      var result = "";
      try {
          snowflake.execute( {sqlText: "Invalid Command!;"} );
          result = "Succeeded";
          }
      catch (err)  {
          result =  "Failed: Code: " + err.code + "\n  State: " + err.state;
          result += "\n  Message: " + err.message;
          result += "\nStack Trace:\n" + err.stackTraceTxt; 
          }
      return result;
      $$
      ;
</pre></div>
</div><div data-codeblock-index="38" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
<li><p>Call the stored procedure. This should return an error showing the error
number and other information:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span>    <span class="py">-- This is expected to fail.</span>
    <span class="ni">call</span> <span class="gi">broken</span><span class="p">();</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
<span class="no">| BROKEN                                                  |</span>
<span class="no">|---------------------------------------------------------|</span>
<span class="no">| Failed: Code: 1003                                      |</span>
<span class="no">|   State: 42000                                          |</span>
<span class="no">|   Message: SQL compilation error:                       |</span>
<span class="no">| syntax error line 1 at position 0 unexpected 'Invalid'. |</span>
<span class="no">| Stack Trace:                                            |</span>
<span class="no">| Snowflake.execute, line 4 position 20                   |</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
</pre></div>
</div><div data-codeblock-index="39" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
</ol>
</div></blockquote>
<p>The following example demonstrates throwing a custom exception:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Create the stored procedure:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">OR</span> <span class="ni">REPLACE</span> <span class="ni">PROCEDURE</span> <span class="gi">validate_age</span> <span class="p">(</span><span class="gi">age</span> <span class="ni">float</span><span class="p">)</span>
<span class="ni">RETURNS</span> <span class="ni">VARCHAR</span>
<span class="ni">LANGUAGE</span> <span class="ni">JAVASCRIPT</span>
<span class="ni">EXECUTE</span> <span class="ni">AS</span> <span class="ni">CALLER</span>
<span class="ni">AS</span> <span class="p">$$</span>
    <span class="gi">try</span> <span class="p">{</span>
        <span class="ni">if</span> <span class="p">(</span><span class="gi">AGE</span> <span class="p">&lt;</span> <span class="nf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="gi">throw</span> <span class="vi">"Age cannot be negative!"</span><span class="p">;</span>
        <span class="p">}</span> <span class="ni">else</span> <span class="p">{</span>
            <span class="ni">return</span> <span class="vi">"Age validated."</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="gi">catch</span> <span class="p">(</span><span class="gi">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="ni">return</span> <span class="vi">"Error: "</span> <span class="p">+</span> <span class="gi">err</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">$$;</span>
</pre></div>
</div><div data-codeblock-index="40" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
<li><p>Call the stored procedure with valid and invalid values:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">validate_age</span><span class="p">(</span><span class="gi">50</span><span class="p">);</span>
<span class="p">+</span><span class="no">----------------+</span>
<span class="no">| VALIDATE_AGE   |</span>
<span class="no">|----------------|</span>
<span class="no">| Age validated. |</span>
<span class="p">+</span><span class="no">----------------+</span>
<span class="ni">CALL</span> <span class="gi">validate_age</span><span class="p">(-</span><span class="nf">2</span><span class="p">);</span>
<span class="p">+</span><span class="no">--------------------------------+</span>
<span class="no">| VALIDATE_AGE                   |</span>
<span class="no">|--------------------------------|</span>
<span class="no">| Error: Age cannot be negative! |</span>
<span class="p">+</span><span class="no">--------------------------------+</span>
</pre></div>
</div><div data-codeblock-index="41" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</li>
</ol>
</div></blockquote>
</section>
<section id="using-transactions-in-stored-procedures">
<span id="label-example-using-transaction-in-stored-procedures"></span><h3>Using Transactions in Stored Procedures<a class="headerlink" href="stored-procedures-javascript.html#using-transactions-in-stored-procedures" title="Link to this heading">¶</a></h3>
<p>The following example wraps multiple related statements in a transaction, and uses try/catch to commit or roll back.
The parameter <code class="docutils literal notranslate"><span class="pre">force_failure</span></code> allows the caller to choose between successful execution and deliberate error.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-javascript notranslate"><div class="highlight"><pre><span></span><span class="py">-- Create the procedure</span>
<span class="ni">create</span> <span class="ni">or</span> <span class="ni">replace</span> <span class="ni">procedure</span> <span class="gi">cleanup</span><span class="p">(</span><span class="gi">force_failure</span> <span class="ni">varchar</span><span class="p">)</span>
  <span class="ni">returns</span> <span class="ni">varchar</span> <span class="ni">not</span> <span class="ni">null</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">as</span>
  <span class="p">$$</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">  </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"BEGIN WORK;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"DELETE FROM child;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">      </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"DELETE FROM parent;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">FORCE_FAILURE</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// To see what happens if there is a failure/rollback,</span>
<span class="w">          </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"DELETE FROM no_such_table;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">      </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"COMMIT WORK;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">      </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Succeeded"</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<span class="w">      </span><span class="nx">snowflake</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="nx">sqlText</span><span class="o">:</span><span class="w"> </span><span class="s2">"ROLLBACK WORK;"</span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s2">"Failed: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">err</span><span class="p">;</span><span class="w">   </span><span class="c1">// Return a success/error indicator.</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<span class="p">  $$</span>
  <span class="p">;</span>

<span class="ni">call</span> <span class="gi">cleanup</span><span class="p">(</span><span class="nc">'fail'</span><span class="p">);</span>

<span class="ni">call</span> <span class="gi">cleanup</span><span class="p">(</span><span class="nc">'do not fail'</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="42" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</section>
<section id="logging-an-error">
<h3>Logging an Error<a class="headerlink" href="stored-procedures-javascript.html#logging-an-error" title="Link to this heading">¶</a></h3>
<p>You can capture log and trace data from JavaScript handler code by using the <code class="code docutils literal notranslate"><span class="pre">snowflake</span></code> object in the JavaScript API. When you do,
log messages and trace data are stored in an event table that you can analyze with queries.</p>
<p>For more information, refer to the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../logging-tracing/logging-javascript.html"><span class="doc">Logging Messages in JavaScript</span></a></p></li>
<li><p><a class="reference internal" href="../logging-tracing/tracing-javascript.html"><span class="doc">Emitting Trace Events in JavaScript</span></a></p></li>
</ul>
</section>
<section id="using-result-scan-to-retrieve-the-result-from-a-stored-procedure">
<h3>Using RESULT_SCAN to Retrieve the Result from a Stored Procedure<a class="headerlink" href="stored-procedures-javascript.html#using-result-scan-to-retrieve-the-result-from-a-stored-procedure" title="Link to this heading">¶</a></h3>
<p>This example shows how to use the <a class="reference internal" href="../../sql-reference/functions/result_scan.html"><span class="doc">RESULT_SCAN</span></a> function to retrieve the result from a <a class="reference internal" href="../../sql-reference/sql/call.html"><span class="doc">CALL</span></a>
statement:</p>
<ol class="arabic">
<li><p>Create and load the table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE TABLE western_provinces(ID INT, province VARCHAR);
</pre></div>
</div><div data-codeblock-index="43" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>INSERT INTO western_provinces(ID, province) VALUES
    (1, 'Alberta'),
    (2, 'British Columbia'),
    (3, 'Manitoba')
    ;
</pre></div>
</div><div data-codeblock-index="44" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Create the stored procedure. This procedure returns a well-formatted string that looks like a result set of
three rows, but is actually a single string:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE OR REPLACE PROCEDURE read_western_provinces()
  RETURNS VARCHAR NOT NULL
  LANGUAGE JAVASCRIPT
  AS
  $$
  var return_value = "";
  try {
      var command = "SELECT * FROM western_provinces ORDER BY province;"
      var stmt = snowflake.createStatement( {sqlText: command } );
      var rs = stmt.execute();
      if (rs.next())  {
          return_value += rs.getColumnValue(1);
          return_value += ", " + rs.getColumnValue(2);
          }
      while (rs.next())  {
          return_value += "\n";
          return_value += rs.getColumnValue(1);
          return_value += ", " + rs.getColumnValue(2);
          }
      }
  catch (err)  {
      result =  "Failed: Code: " + err.code + "\n  State: " + err.state;
      result += "\n  Message: " + err.message;
      result += "\nStack Trace:\n" + err.stackTraceTxt;
      }
  return return_value;
  $$
  ;
</pre></div>
</div><div data-codeblock-index="45" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the stored procedure, then retrieve the results by using RESULT_SCAN:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CALL read_western_provinces();
+------------------------+
| READ_WESTERN_PROVINCES |
|------------------------|
| 1, Alberta             |
| 2, British Columbia    |
| 3, Manitoba            |
+------------------------+
SELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()));
+------------------------+
| READ_WESTERN_PROVINCES |
|------------------------|
| 1, Alberta             |
| 2, British Columbia    |
| 3, Manitoba            |
+------------------------+
</pre></div>
</div><div data-codeblock-index="46" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
<p>You can perform more complex operations on the value returned by the RESULT_SCAN function. In this case, because the
returned value is a single string, you might want to extract the individual “rows” that appear to be contained
within that string, and store those rows in another table.</p>
<p>The following example, which is a continuation of the previous example, illustrates one way to do this:</p>
<ol class="arabic">
<li><p>Create a table for long-term storage. This table contains the province name and the province ID after you’ve
extracted them from the string returned by the CALL command:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE TABLE all_provinces(ID INT, province VARCHAR);
</pre></div>
</div><div data-codeblock-index="47" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the stored procedure, then retrieve the result by using RESULT_SCAN, and then extract the three rows
from the string and put those rows into the table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>INSERT INTO all_provinces
  WITH 
    one_string (string_col) AS
      (SELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()))),
    three_strings (one_row) AS
      (SELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\n'))
  SELECT
         STRTOK(one_row, ',', 1) AS ID,
         STRTOK(one_row, ',', 2) AS province
    FROM three_strings
    WHERE NOT (ID IS NULL AND province IS NULL);
+-------------------------+
| number of rows inserted |
|-------------------------|
|                       3 |
+-------------------------+
</pre></div>
</div><div data-codeblock-index="48" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Verify that this worked by showing the rows in the table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT ID, province 
    FROM all_provinces;
+----+-------------------+
| ID | PROVINCE          |
|----+-------------------|
|  1 |  Alberta          |
|  2 |  British Columbia |
|  3 |  Manitoba         |
+----+-------------------+
</pre></div>
</div><div data-codeblock-index="49" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
<p>Here’s approximately the same code, but in smaller steps:</p>
<ol class="arabic">
<li><p>Create a table named <code class="docutils literal notranslate"><span class="pre">one_string</span></code>. This table temporarily stores the result of the CALL command.
The result of the CALL is a single string, so this table stores only a single VARCHAR value.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE TRANSIENT TABLE one_string(string_col VARCHAR);
</pre></div>
</div><div data-codeblock-index="50" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the stored procedure, then retrieve the result (a string) by using RESULT_SCAN, and then store that into
the intermediate table named <code class="docutils literal notranslate"><span class="pre">one_string</span></code>:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CALL read_western_provinces();
+------------------------+
| READ_WESTERN_PROVINCES |
|------------------------|
| 1, Alberta             |
| 2, British Columbia    |
| 3, Manitoba            |
+------------------------+
INSERT INTO one_string
    SELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()));
+-------------------------+
| number of rows inserted |
|-------------------------|
|                       1 |
+-------------------------+
</pre></div>
</div><div data-codeblock-index="51" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>This shows the new row in the <code class="docutils literal notranslate"><span class="pre">one_string</span></code> table. Remember that although this is formatted to look like three rows,
it is actually a single string:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT string_col FROM one_string;
+---------------------+
| STRING_COL          |
|---------------------|
| 1, Alberta          |
| 2, British Columbia |
| 3, Manitoba         |
+---------------------+
-- Show that it's one string, not three rows:
SELECT '&gt;&gt;&gt;' || string_col || '&lt;&lt;&lt;' AS string_col 
    FROM one_string;
+---------------------+
| STRING_COL          |
|---------------------|
| &gt;&gt;&gt;1, Alberta       |
| 2, British Columbia |
| 3, Manitoba&lt;&lt;&lt;      |
+---------------------+
SELECT COUNT(*) FROM one_string;
+----------+
| COUNT(*) |
|----------|
|        1 |
+----------+
</pre></div>
</div><div data-codeblock-index="52" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The following commands show how to extract multiple rows from the string:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT * FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\n');
+---------------------+-----+-------+---------------------+
| STRING_COL          | SEQ | INDEX | VALUE               |
|---------------------+-----+-------+---------------------|
| 1, Alberta          |   1 |     1 | 1, Alberta          |
| 2, British Columbia |     |       |                     |
| 3, Manitoba         |     |       |                     |
| 1, Alberta          |   1 |     2 | 2, British Columbia |
| 2, British Columbia |     |       |                     |
| 3, Manitoba         |     |       |                     |
| 1, Alberta          |   1 |     3 | 3, Manitoba         |
| 2, British Columbia |     |       |                     |
| 3, Manitoba         |     |       |                     |
+---------------------+-----+-------+---------------------+
SELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\n');
+---------------------+
| VALUE               |
|---------------------|
| 1, Alberta          |
| 2, British Columbia |
| 3, Manitoba         |
+---------------------+
</pre></div>
</div><div data-codeblock-index="53" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Next, create a table named <code class="docutils literal notranslate"><span class="pre">three_strings</span></code>. This table will hold the result after you’ve split it into individual
lines/strings:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE TRANSIENT TABLE three_strings(string_col VARCHAR);
</pre></div>
</div><div data-codeblock-index="54" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Now convert that one string in the <code class="docutils literal notranslate"><span class="pre">one_string</span></code> table into three separate strings, and show that it is
now actually three strings:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>INSERT INTO three_strings
  SELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\n');
+-------------------------+
| number of rows inserted |
|-------------------------|
|                       3 |
+-------------------------+
SELECT string_col 
    FROM three_strings;
+---------------------+
| STRING_COL          |
|---------------------|
| 1, Alberta          |
| 2, British Columbia |
| 3, Manitoba         |
+---------------------+
SELECT COUNT(*) 
    FROM three_strings;
+----------+
| COUNT(*) |
|----------|
|        3 |
+----------+
</pre></div>
</div><div data-codeblock-index="55" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Now convert the three strings into three rows in our long-term table named <code class="docutils literal notranslate"><span class="pre">all_provinces</span></code>:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>INSERT INTO all_provinces
  SELECT 
         STRTOK(string_col, ',', 1) AS ID, 
         STRTOK(string_col, ',', 2) AS province 
    FROM three_strings
    WHERE NOT (ID IS NULL AND province IS NULL);
+-------------------------+
| number of rows inserted |
|-------------------------|
|                       3 |
+-------------------------+
</pre></div>
</div><div data-codeblock-index="56" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Show the three rows in the long-term table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT ID, province 
    FROM all_provinces;
+----+-------------------+
| ID | PROVINCE          |
|----+-------------------|
|  1 |  Alberta          |
|  2 |  British Columbia |
|  3 |  Manitoba         |
+----+-------------------+
SELECT COUNT(*) 
    FROM all_provinces;
+----------+
| COUNT(*) |
|----------|
|        3 |
+----------+
</pre></div>
</div><div data-codeblock-index="57" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
</section>
<section id="returning-an-array-of-error-messages">
<h3>Returning an Array of Error Messages<a class="headerlink" href="stored-procedures-javascript.html#returning-an-array-of-error-messages" title="Link to this heading">¶</a></h3>
<p>Your stored procedure might execute more than one SQL statement and you might want to return a status/error message
for each SQL statement. However, a stored procedure returns a single row; it is not designed to return multiple
rows.</p>
<p>If all of your messages fit into a single value of type ARRAY, you can get all the messages from a stored procedure
with some additional effort.</p>
<p>The following example shows one way to do this (the error messages shown are not real, but you can extend this code to
work with your actual SQL statements):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CREATE OR REPLACE PROCEDURE sp_return_array()
      RETURNS VARIANT NOT NULL
      LANGUAGE JAVASCRIPT
      AS
      $$
      // This array will contain one error message (or an empty string) 
      // for each SQL command that we executed.
      var array_of_rows = [];

      // Artificially fake the error messages.
      array_of_rows.push("ERROR: The foo was barred.")
      array_of_rows.push("WARNING: A Carrington Event is predicted.")

      return array_of_rows;
      $$
      ;
</pre></div>
</div><div data-codeblock-index="58" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_return_array</span><span class="p">();</span>
<span class="p">+</span><span class="no">-----------------------------------------------+</span>
<span class="no">| SP_RETURN_ARRAY                               |</span>
<span class="no">|-----------------------------------------------|</span>
<span class="no">| [                                             |</span>
<span class="no">|   "ERROR: The foo was barred.",               |</span>
<span class="no">|   "WARNING: A Carrington Event is predicted." |</span>
<span class="no">| ]                                             |</span>
<span class="p">+</span><span class="no">-----------------------------------------------+</span>
<span class="py">-- Now get the individual error messages, in order.</span>
<span class="ni">SELECT</span> <span class="ni">INDEX</span><span class="p">,</span> <span class="ni">VALUE</span> 
    <span class="ni">FROM</span> <span class="ni">TABLE</span><span class="p">(</span><span class="nd">RESULT_SCAN</span><span class="p">(</span><span class="nd">LAST_QUERY_ID</span><span class="p">()))</span> <span class="ni">AS</span> <span class="gi">res</span><span class="p">,</span> <span class="ni">LATERAL</span> <span class="nd">FLATTEN</span><span class="p">(</span><span class="ni">INPUT</span> <span class="p">=&gt;</span> <span class="gi">res</span><span class="p">.$</span><span class="nf">1</span><span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="ni">index</span>
    <span class="p">;</span>
<span class="p">+</span><span class="no">-------+---------------------------------------------+</span>
<span class="no">| INDEX | VALUE                                       |</span>
<span class="no">|-------+---------------------------------------------|</span>
<span class="no">|     0 | "ERROR: The foo was barred."                |</span>
<span class="no">|     1 | "WARNING: A Carrington Event is predicted." |</span>
<span class="p">+</span><span class="no">-------+---------------------------------------------+</span>
</pre></div>
</div><div data-codeblock-index="59" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>Remember, this is <span class="emph">not</span> a general purpose solution. There is a limit on the maximum size of
ARRAY data types, and your entire result set must fit into a single ARRAY.</p>
</section>
<section id="returning-a-result-set">
<h3>Returning a Result Set<a class="headerlink" href="stored-procedures-javascript.html#returning-a-result-set" title="Link to this heading">¶</a></h3>
<p>This section extends the previous example described in <a class="reference internal" href="stored-procedures-javascript.html#returning-an-array-of-error-messages">Returning an Array of Error Messages</a>. This example is more
general, and allows you to return a result set from a query.</p>
<p>A stored procedure returns a single row that contains a single column; it is not designed to return a result set.
However, if your result set is small enough to fit into a single value of type VARIANT or ARRAY, you can return
a result set from a stored procedure with some additional code:</p>
<blockquote>
<div><blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">TABLE</span> <span class="gi">return_to_me</span><span class="p">(</span><span class="gi">col_i</span> <span class="ni">INT</span><span class="p">,</span> <span class="gi">col_v</span> <span class="ni">VARCHAR</span><span class="p">);</span>
<span class="ni">INSERT</span> <span class="ni">INTO</span> <span class="gi">return_to_me</span> <span class="p">(</span><span class="gi">col_i</span><span class="p">,</span> <span class="gi">col_v</span><span class="p">)</span> <span class="ni">VALUES</span>
    <span class="p">(</span><span class="nf">1</span><span class="p">,</span> <span class="nc">'Ariel'</span><span class="p">),</span>
    <span class="p">(</span><span class="nf">2</span><span class="p">,</span> <span class="nc">'October'</span><span class="p">),</span>
    <span class="p">(</span><span class="nf">3</span><span class="p">,</span> <span class="ni">NULL</span><span class="p">),</span>
    <span class="p">(</span><span class="ni">NULL</span><span class="p">,</span> <span class="nc">'Project'</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="60" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-- Create the stored procedure that retrieves a result set and returns it.
CREATE OR REPLACE PROCEDURE sp_return_table(TABLE_NAME VARCHAR, COL_NAMES ARRAY)
      RETURNS VARIANT NOT NULL
      LANGUAGE JAVASCRIPT
      AS
      $$
      // This variable will hold a JSON data structure that holds ONE row.
      var row_as_json = {};
      // This array will contain all the rows.
      var array_of_rows = [];
      // This variable will hold a JSON data structure that we can return as
      // a VARIANT.
      // This will contain ALL the rows in a single "value".
      var table_as_json = {};

      // Run SQL statement(s) and get a resultSet.
      var command = "SELECT * FROM " + TABLE_NAME;
      var cmd1_dict = {sqlText: command};
      var stmt = snowflake.createStatement(cmd1_dict);
      var rs = stmt.execute();

      // Read each row and add it to the array we will return.
      var row_num = 1;
      while (rs.next())  {
        // Put each row in a variable of type JSON.
        row_as_json = {};
        // For each column in the row...
        for (var col_num = 0; col_num &lt; COL_NAMES.length; col_num = col_num + 1) {
          var col_name = COL_NAMES[col_num];
          row_as_json[col_name] = rs.getColumnValue(col_num + 1);
          }
        // Add the row to the array of rows.
        array_of_rows.push(row_as_json);
        ++row_num;
        }
      // Put the array in a JSON variable (so it looks like a VARIANT to
      // Snowflake).  The key is "key1", and the value is the array that has
      // the rows we want.
      table_as_json = { "key1" : array_of_rows };

      // Return the rows to Snowflake, which expects a JSON-compatible VARIANT.
      return table_as_json;
      $$
      ;
</pre></div>
</div><div data-codeblock-index="61" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_return_table</span><span class="p">(</span>
        <span class="py">-- Table name.</span>
        <span class="nc">'return_to_me'</span><span class="p">,</span>
        <span class="py">-- Array of column names.</span>
        <span class="nd">ARRAY_APPEND</span><span class="p">(</span><span class="nd">TO_ARRAY</span><span class="p">(</span><span class="nc">'COL_I'</span><span class="p">),</span> <span class="nc">'COL_V'</span><span class="p">)</span>
        <span class="p">);</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="no">| SP_RETURN_TABLE          |</span>
<span class="no">|--------------------------|</span>
<span class="no">| {                        |</span>
<span class="no">|   "key1": [              |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 1,        |</span>
<span class="no">|       "COL_V": "Ariel"   |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 2,        |</span>
<span class="no">|       "COL_V": "October" |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 3,        |</span>
<span class="no">|       "COL_V": null      |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": null,     |</span>
<span class="no">|       "COL_V": "Project" |</span>
<span class="no">|     }                    |</span>
<span class="no">|   ]                      |</span>
<span class="no">| }                        |</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="py">-- Use "ResultScan" to get the data from the stored procedure that</span>
<span class="py">-- "did not return a result set".</span>
<span class="py">-- Use "$1:key1" to get the value corresponding to the JSON key named "key1".</span>
<span class="ni">SELECT</span> <span class="p">$</span><span class="nf">1</span><span class="na">:key1</span> <span class="ni">FROM</span> <span class="ni">TABLE</span><span class="p">(</span><span class="nd">RESULT_SCAN</span><span class="p">(</span><span class="nd">LAST_QUERY_ID</span><span class="p">()));</span>
<span class="p">+</span><span class="no">------------------------+</span>
<span class="no">| $1:KEY1                |</span>
<span class="no">|------------------------|</span>
<span class="no">| [                      |</span>
<span class="no">|   {                    |</span>
<span class="no">|     "COL_I": 1,        |</span>
<span class="no">|     "COL_V": "Ariel"   |</span>
<span class="no">|   },                   |</span>
<span class="no">|   {                    |</span>
<span class="no">|     "COL_I": 2,        |</span>
<span class="no">|     "COL_V": "October" |</span>
<span class="no">|   },                   |</span>
<span class="no">|   {                    |</span>
<span class="no">|     "COL_I": 3,        |</span>
<span class="no">|     "COL_V": null      |</span>
<span class="no">|   },                   |</span>
<span class="no">|   {                    |</span>
<span class="no">|     "COL_I": null,     |</span>
<span class="no">|     "COL_V": "Project" |</span>
<span class="no">|   }                    |</span>
<span class="no">| ]                      |</span>
<span class="p">+</span><span class="no">------------------------+</span>
<span class="py">-- Now get what we really want.</span>
<span class="ni">SELECT</span> <span class="ni">VALUE</span><span class="na">:COL_I</span> <span class="ni">AS</span> <span class="gi">col_i</span><span class="p">,</span> <span class="ni">value</span><span class="na">:COL_V</span> <span class="ni">AS</span> <span class="gi">col_v</span>
  <span class="ni">FROM</span> <span class="ni">TABLE</span><span class="p">(</span><span class="nd">RESULT_SCAN</span><span class="p">(</span><span class="nd">LAST_QUERY_ID</span><span class="p">()))</span> <span class="ni">AS</span> <span class="gi">res</span><span class="p">,</span> <span class="ni">LATERAL</span> <span class="nd">FLATTEN</span><span class="p">(</span><span class="ni">input</span> <span class="p">=&gt;</span> <span class="gi">res</span><span class="p">.$</span><span class="nf">1</span><span class="p">)</span>
  <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">COL_I</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------+-----------+</span>
<span class="no">| COL_I | COL_V     |</span>
<span class="no">|-------+-----------|</span>
<span class="no">| 1     | "Ariel"   |</span>
<span class="no">| 2     | "October" |</span>
<span class="no">| 3     | null      |</span>
<span class="no">| null  | "Project" |</span>
<span class="p">+</span><span class="no">-------+-----------+</span>
</pre></div>
</div><div data-codeblock-index="62" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>This shows how to combine the previous two lines into a single line:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_return_table</span><span class="p">(</span>
        <span class="py">-- Table name.</span>
        <span class="nc">'return_to_me'</span><span class="p">,</span>
        <span class="py">-- Array of column names.</span>
        <span class="nd">ARRAY_APPEND</span><span class="p">(</span><span class="nd">TO_ARRAY</span><span class="p">(</span><span class="nc">'COL_I'</span><span class="p">),</span> <span class="nc">'COL_V'</span><span class="p">)</span>
        <span class="p">);</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="no">| SP_RETURN_TABLE          |</span>
<span class="no">|--------------------------|</span>
<span class="no">| {                        |</span>
<span class="no">|   "key1": [              |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 1,        |</span>
<span class="no">|       "COL_V": "Ariel"   |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 2,        |</span>
<span class="no">|       "COL_V": "October" |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 3,        |</span>
<span class="no">|       "COL_V": null      |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": null,     |</span>
<span class="no">|       "COL_V": "Project" |</span>
<span class="no">|     }                    |</span>
<span class="no">|   ]                      |</span>
<span class="no">| }                        |</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="ni">SELECT</span> <span class="ni">VALUE</span><span class="na">:COL_I</span> <span class="ni">AS</span> <span class="gi">col_i</span><span class="p">,</span> <span class="ni">value</span><span class="na">:COL_V</span> <span class="ni">AS</span> <span class="gi">col_v</span>
       <span class="ni">FROM</span> <span class="p">(</span><span class="ni">SELECT</span> <span class="p">$</span><span class="nf">1</span><span class="na">:key1</span> <span class="ni">FROM</span> <span class="ni">TABLE</span><span class="p">(</span><span class="nd">RESULT_SCAN</span><span class="p">(</span><span class="nd">LAST_QUERY_ID</span><span class="p">())))</span> <span class="ni">AS</span> <span class="gi">res</span><span class="p">,</span>
            <span class="ni">LATERAL</span> <span class="nd">FLATTEN</span><span class="p">(</span><span class="ni">input</span> <span class="p">=&gt;</span> <span class="gi">res</span><span class="p">.$</span><span class="nf">1</span><span class="p">)</span>
       <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">COL_I</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------+-----------+</span>
<span class="no">| COL_I | COL_V     |</span>
<span class="no">|-------+-----------|</span>
<span class="no">| 1     | "Ariel"   |</span>
<span class="no">| 2     | "October" |</span>
<span class="no">| 3     | null      |</span>
<span class="no">| null  | "Project" |</span>
<span class="p">+</span><span class="no">-------+-----------+</span>
</pre></div>
</div><div data-codeblock-index="63" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>For convenience, you can wrap the preceding line in a view. This view also converts the string ‘null’ to a true NULL.
You only need to create the view once. However, you <span class="emph">must</span> call the stored procedure <span class="emph">immediately prior to</span>
selecting from this view <span class="emph">every</span> time you use the view. Remember, the call to RESULT_SCAN in the view is pulling from the
most recent statement, which must be the CALL:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CREATE</span> <span class="ni">VIEW</span> <span class="gi">stproc_view</span> <span class="p">(</span><span class="gi">col_i</span><span class="p">,</span> <span class="gi">col_v</span><span class="p">)</span> <span class="ni">AS</span> 
  <span class="ni">SELECT</span> <span class="nd">NULLIF</span><span class="p">(</span><span class="ni">VALUE</span><span class="na">:COL_I</span><span class="kn">::VARCHAR</span><span class="p">,</span> <span class="nc">'null'</span><span class="kn">::VARCHAR</span><span class="p">),</span> 
         <span class="nd">NULLIF</span><span class="p">(</span><span class="ni">value</span><span class="na">:COL_V</span><span class="kn">::VARCHAR</span><span class="p">,</span> <span class="nc">'null'</span><span class="kn">::VARCHAR</span><span class="p">)</span>
    <span class="ni">FROM</span> <span class="p">(</span><span class="ni">SELECT</span> <span class="p">$</span><span class="nf">1</span><span class="na">:key1</span> <span class="ni">AS</span> <span class="gi">tbl</span> <span class="ni">FROM</span> <span class="ni">TABLE</span><span class="p">(</span><span class="nd">RESULT_SCAN</span><span class="p">(</span><span class="nd">LAST_QUERY_ID</span><span class="p">())))</span> <span class="ni">AS</span> <span class="gi">res</span><span class="p">,</span> 
         <span class="ni">LATERAL</span> <span class="nd">FLATTEN</span><span class="p">(</span><span class="ni">input</span> <span class="p">=&gt;</span> <span class="gi">res</span><span class="p">.</span><span class="gi">tbl</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="64" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_return_table</span><span class="p">(</span>
        <span class="py">-- Table name.</span>
        <span class="nc">'return_to_me'</span><span class="p">,</span>
        <span class="py">-- Array of column names.</span>
        <span class="nd">ARRAY_APPEND</span><span class="p">(</span><span class="nd">TO_ARRAY</span><span class="p">(</span><span class="nc">'COL_I'</span><span class="p">),</span> <span class="nc">'COL_V'</span><span class="p">)</span>
        <span class="p">);</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="no">| SP_RETURN_TABLE          |</span>
<span class="no">|--------------------------|</span>
<span class="no">| {                        |</span>
<span class="no">|   "key1": [              |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 1,        |</span>
<span class="no">|       "COL_V": "Ariel"   |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 2,        |</span>
<span class="no">|       "COL_V": "October" |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 3,        |</span>
<span class="no">|       "COL_V": null      |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": null,     |</span>
<span class="no">|       "COL_V": "Project" |</span>
<span class="no">|     }                    |</span>
<span class="no">|   ]                      |</span>
<span class="no">| }                        |</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> 
    <span class="ni">FROM</span> <span class="gi">stproc_view</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">COL_I</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------+---------+</span>
<span class="no">| COL_I | COL_V   |</span>
<span class="no">|-------+---------|</span>
<span class="no">| 1     | Ariel   |</span>
<span class="no">| 2     | October |</span>
<span class="no">| 3     | NULL    |</span>
<span class="no">| NULL  | Project |</span>
<span class="p">+</span><span class="no">-------+---------+</span>
</pre></div>
</div><div data-codeblock-index="65" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>You can even use it as a true view (i.e. select a subset of it):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">sp_return_table</span><span class="p">(</span>
        <span class="py">-- Table name.</span>
        <span class="nc">'return_to_me'</span><span class="p">,</span>
        <span class="py">-- Array of column names.</span>
        <span class="nd">ARRAY_APPEND</span><span class="p">(</span><span class="nd">TO_ARRAY</span><span class="p">(</span><span class="nc">'COL_I'</span><span class="p">),</span> <span class="nc">'COL_V'</span><span class="p">)</span>
        <span class="p">);</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="no">| SP_RETURN_TABLE          |</span>
<span class="no">|--------------------------|</span>
<span class="no">| {                        |</span>
<span class="no">|   "key1": [              |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 1,        |</span>
<span class="no">|       "COL_V": "Ariel"   |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 2,        |</span>
<span class="no">|       "COL_V": "October" |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": 3,        |</span>
<span class="no">|       "COL_V": null      |</span>
<span class="no">|     },                   |</span>
<span class="no">|     {                    |</span>
<span class="no">|       "COL_I": null,     |</span>
<span class="no">|       "COL_V": "Project" |</span>
<span class="no">|     }                    |</span>
<span class="no">|   ]                      |</span>
<span class="no">| }                        |</span>
<span class="p">+</span><span class="no">--------------------------+</span>
<span class="ni">SELECT</span> <span class="gi">COL_V</span> 
    <span class="ni">FROM</span> <span class="gi">stproc_view</span>
    <span class="ni">WHERE</span> <span class="gi">COL_V</span> <span class="ni">IS</span> <span class="ni">NOT</span> <span class="ni">NULL</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">COL_V</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+</span>
<span class="no">| COL_V   |</span>
<span class="no">|---------|</span>
<span class="no">| Ariel   |</span>
<span class="no">| October |</span>
<span class="no">| Project |</span>
<span class="p">+</span><span class="no">---------+</span>
</pre></div>
</div><div data-codeblock-index="66" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</div></blockquote>
<p>Remember, this is <span class="emph">not</span> a general purpose solution. There is a limit on the maximum size of VARIANT and
ARRAY data types, and your entire result set must fit into a single VARIANT or ARRAY.</p>
</section>
<section id="protecting-privacy">
<h3>Protecting Privacy<a class="headerlink" href="stored-procedures-javascript.html#protecting-privacy" title="Link to this heading">¶</a></h3>
<p>This example shows a stored procedure that is useful for an on-line retailer.
This stored procedure respects customers’ privacy, while protecting
legitimate interests of both the retailer and the customer.
If a customer asks the retailer to delete the customer’s data for privacy reasons,
then this stored procedure deletes most of the customer’s data, but leaves the customer’s
purchase history if either of the following is true:</p>
<ul class="simple">
<li><p>Any purchased item has a warranty that has not yet expired.</p></li>
<li><p>The customer still owes money (or the customer is owed a refund).</p></li>
</ul>
<p>A more real-world version of this would delete individual rows for which payment has been
made and the warranty has expired.</p>
<ol class="arabic">
<li><p>Start by creating the tables and loading them:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">table</span> <span class="gi">reviews</span> <span class="p">(</span><span class="gi">customer_ID</span> <span class="ni">VARCHAR</span><span class="p">,</span> <span class="gi">review</span> <span class="ni">VARCHAR</span><span class="p">);</span>
<span class="ni">create</span> <span class="ni">table</span> <span class="gi">purchase_history</span> <span class="p">(</span><span class="gi">customer_ID</span> <span class="ni">VARCHAR</span><span class="p">,</span> <span class="gi">price</span> <span class="ni">FLOAT</span><span class="p">,</span> <span class="gi">paid</span> <span class="ni">FLOAT</span><span class="p">,</span>
                               <span class="gi">product_ID</span> <span class="ni">VARCHAR</span><span class="p">,</span> <span class="gi">purchase_date</span> <span class="ni">DATE</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="67" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">insert</span> <span class="ni">into</span> <span class="gi">purchase_history</span> <span class="p">(</span><span class="gi">customer_ID</span><span class="p">,</span> <span class="gi">price</span><span class="p">,</span> <span class="gi">paid</span><span class="p">,</span> <span class="gi">product_ID</span><span class="p">,</span> <span class="gi">purchase_date</span><span class="p">)</span> <span class="ni">values</span> 
    <span class="p">(</span><span class="nf">1</span><span class="p">,</span> <span class="gi">19</span><span class="p">.</span><span class="gi">99</span><span class="p">,</span> <span class="gi">19</span><span class="p">.</span><span class="gi">99</span><span class="p">,</span> <span class="nc">'chocolate'</span><span class="p">,</span> <span class="nc">'2018-06-17'</span><span class="kn">::DATE</span><span class="p">),</span>
    <span class="p">(</span><span class="nf">2</span><span class="p">,</span> <span class="gi">19</span><span class="p">.</span><span class="gi">99</span><span class="p">,</span>  <span class="nf">0</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span> <span class="nc">'chocolate'</span><span class="p">,</span> <span class="nc">'2017-02-14'</span><span class="kn">::DATE</span><span class="p">),</span>
    <span class="p">(</span><span class="nf">3</span><span class="p">,</span> <span class="gi">19</span><span class="p">.</span><span class="gi">99</span><span class="p">,</span>  <span class="gi">19</span><span class="p">.</span><span class="gi">99</span><span class="p">,</span> <span class="nc">'chocolate'</span><span class="p">,</span> <span class="nc">'2017-03-19'</span><span class="kn">::DATE</span><span class="p">);</span>

<span class="ni">insert</span> <span class="ni">into</span> <span class="gi">reviews</span> <span class="p">(</span><span class="gi">customer_ID</span><span class="p">,</span> <span class="gi">review</span><span class="p">)</span> <span class="ni">values</span> <span class="p">(</span><span class="nf">1</span><span class="p">,</span> <span class="nc">'Loved the milk chocolate!'</span><span class="p">);</span>
<span class="ni">insert</span> <span class="ni">into</span> <span class="gi">reviews</span> <span class="p">(</span><span class="gi">customer_ID</span><span class="p">,</span> <span class="gi">review</span><span class="p">)</span> <span class="ni">values</span> <span class="p">(</span><span class="nf">2</span><span class="p">,</span> <span class="nc">'Loved the dark chocolate!'</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="68" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Create the stored procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create or replace procedure delete_nonessential_customer_data(customer_ID varchar)
    returns varchar not null
    language javascript
    as
    $$

    // If the customer posted reviews of products, delete those reviews.
    var sql_cmd = "DELETE FROM reviews WHERE customer_ID = " + CUSTOMER_ID;
    snowflake.execute( {sqlText: sql_cmd} );

    // Delete any other records not needed for warranty or payment info.
    // ...

    var result = "Deleted non-financial, non-warranty data for customer " + CUSTOMER_ID;

    // Find out if the customer has any net unpaid balance (or surplus/prepayment).
    sql_cmd = "SELECT SUM(price) - SUM(paid) FROM purchase_history WHERE customer_ID = " + CUSTOMER_ID;
    var stmt = snowflake.createStatement( {sqlText: sql_cmd} );
    var rs = stmt.execute();
    // There should be only one row, so should not need to iterate.
    rs.next();
    var net_amount_owed = rs.getColumnValue(1);

    // Look up the number of purchases still under warranty...
    var number_purchases_under_warranty = 0;
    // Assuming a 1-year warranty...
    sql_cmd = "SELECT COUNT(*) FROM purchase_history ";
    sql_cmd += "WHERE customer_ID = " + CUSTOMER_ID;
    // Can't use CURRENT_DATE() because that changes. So assume that today is 
    // always June 15, 2019.
    sql_cmd += "AND PURCHASE_DATE &gt; dateadd(year, -1, '2019-06-15'::DATE)";
    var stmt = snowflake.createStatement( {sqlText: sql_cmd} );
    var rs = stmt.execute();
    // There should be only one row, so should not need to iterate.
    rs.next();
    number_purchases_under_warranty = rs.getColumnValue(1);

    // Check whether need to keep some purchase history data; if not, then delete the data.
    if (net_amount_owed == 0.0 &amp;&amp; number_purchases_under_warranty == 0)  {
        // Delete the purchase history of this customer ...
        sql_cmd = "DELETE FROM purchase_history WHERE customer_ID = " + CUSTOMER_ID;
        snowflake.execute( {sqlText: sql_cmd} );
        // ... and delete anything else that that should be deleted.
        // ...
        result = "Deleted all data, including financial and warranty data, for customer " + CUSTOMER_ID;
        }
    return result;
    $$
    ;
</pre></div>
</div><div data-codeblock-index="69" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Show the data in the tables before deleting any of that data:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">reviews</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+---------------------------+</span>
<span class="no">| CUSTOMER_ID | REVIEW                    |</span>
<span class="no">|-------------+---------------------------|</span>
<span class="no">| 1           | Loved the milk chocolate! |</span>
<span class="no">| 2           | Loved the dark chocolate! |</span>
<span class="p">+</span><span class="no">-------------+---------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">purchase_history</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
<span class="no">| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |</span>
<span class="no">|-------------+-------+-------+------------+---------------|</span>
<span class="no">| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |</span>
<span class="no">| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |</span>
<span class="no">| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
</pre></div>
</div><div data-codeblock-index="70" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Customer #1 has a warranty that is still in effect. The stored procedure deletes the review comments that they posted,
but keeps their purchase record because of the warranty:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">delete_nonessential_customer_data</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
<span class="no">| DELETE_NONESSENTIAL_CUSTOMER_DATA                       |</span>
<span class="no">|---------------------------------------------------------|</span>
<span class="no">| Deleted non-financial, non-warranty data for customer 1 |</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">reviews</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+---------------------------+</span>
<span class="no">| CUSTOMER_ID | REVIEW                    |</span>
<span class="no">|-------------+---------------------------|</span>
<span class="no">| 2           | Loved the dark chocolate! |</span>
<span class="p">+</span><span class="no">-------------+---------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">purchase_history</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
<span class="no">| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |</span>
<span class="no">|-------------+-------+-------+------------+---------------|</span>
<span class="no">| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |</span>
<span class="no">| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |</span>
<span class="no">| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
</pre></div>
</div><div data-codeblock-index="71" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Customer #2 still owes money. The stored procedure deletes their review comments, but keeps their purchase record:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">delete_nonessential_customer_data</span><span class="p">(</span><span class="nf">2</span><span class="p">);</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
<span class="no">| DELETE_NONESSENTIAL_CUSTOMER_DATA                       |</span>
<span class="no">|---------------------------------------------------------|</span>
<span class="no">| Deleted non-financial, non-warranty data for customer 2 |</span>
<span class="p">+</span><span class="no">---------------------------------------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">reviews</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+--------+</span>
<span class="no">| CUSTOMER_ID | REVIEW |</span>
<span class="no">|-------------+--------|</span>
<span class="p">+</span><span class="no">-------------+--------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">purchase_history</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
<span class="no">| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |</span>
<span class="no">|-------------+-------+-------+------------+---------------|</span>
<span class="no">| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |</span>
<span class="no">| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |</span>
<span class="no">| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
</pre></div>
</div><div data-codeblock-index="72" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Customer #3 does not owe any money (and is not owed any money). Their warranty expired, so the stored procedure
deletes both the review comments and the purchase records:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">call</span> <span class="gi">delete_nonessential_customer_data</span><span class="p">(</span><span class="nf">3</span><span class="p">);</span>
<span class="p">+</span><span class="no">-------------------------------------------------------------------------+</span>
<span class="no">| DELETE_NONESSENTIAL_CUSTOMER_DATA                                       |</span>
<span class="no">|-------------------------------------------------------------------------|</span>
<span class="no">| Deleted all data, including financial and warranty data, for customer 3 |</span>
<span class="p">+</span><span class="no">-------------------------------------------------------------------------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">reviews</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+--------+</span>
<span class="no">| CUSTOMER_ID | REVIEW |</span>
<span class="no">|-------------+--------|</span>
<span class="p">+</span><span class="no">-------------+--------+</span>
<span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">purchase_history</span><span class="p">;</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
<span class="no">| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |</span>
<span class="no">|-------------+-------+-------+------------+---------------|</span>
<span class="no">| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |</span>
<span class="no">| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |</span>
<span class="p">+</span><span class="no">-------------+-------+-------+------------+---------------+</span>
</pre></div>
</div><div data-codeblock-index="73" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
</section>
<section id="using-session-variables-with-caller-s-rights-and-owner-s-rights-stored-procedures">
<span id="label-sp-session-variables-example"></span><h3>Using Session Variables with Caller’s Rights and Owner’s Rights Stored Procedures<a class="headerlink" href="stored-procedures-javascript.html#using-session-variables-with-caller-s-rights-and-owner-s-rights-stored-procedures" title="Link to this heading">¶</a></h3>
<p>These examples illustrate one of the key differences between caller’s rights and owner’s rights stored
procedures. They attempt to use session variables in two ways:</p>
<ul class="simple">
<li><p>Set a session variable before calling the stored procedure, then use the session variable inside the stored
procedure.</p></li>
<li><p>Set a session variable inside the stored procedure, then use the session variable after returning from the stored
procedures.</p></li>
</ul>
<p>Both using the session variable and setting the session variable work correctly in a caller’s rights stored procedure.
Both fail when using an owner’s rights stored procedure even if the caller is the <span class="emph">owner</span>.</p>
<section id="caller-s-rights-stored-procedure">
<h4>Caller’s Rights Stored Procedure<a class="headerlink" href="stored-procedures-javascript.html#caller-s-rights-stored-procedure" title="Link to this heading">¶</a></h4>
<p>The following example demonstrates a caller’s rights stored procedure.</p>
<ol class="arabic">
<li><p>Create and load a table:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">table</span> <span class="gi">sv_table</span> <span class="p">(</span><span class="nf">f</span> <span class="ni">float</span><span class="p">);</span>
<span class="ni">insert</span> <span class="ni">into</span> <span class="gi">sv_table</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="ni">values</span> <span class="p">(</span><span class="gi">49</span><span class="p">),</span> <span class="p">(</span><span class="gi">51</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="74" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Set a session variable:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">set</span> <span class="gi">SESSION_VAR1</span> <span class="p">=</span> <span class="gi">50</span><span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="75" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Create a caller’s rights stored procedure that uses one session variable and sets another:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">procedure</span> <span class="gi">session_var_user</span><span class="p">()</span>
  <span class="ni">returns</span> <span class="ni">float</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">EXECUTE</span> <span class="ni">AS</span> <span class="ni">CALLER</span>
  <span class="ni">as</span>
  <span class="p">$$</span>
  <span class="p">//</span> <span class="ni">Set</span> <span class="gi">the</span> <span class="nd">second</span> <span class="ni">session</span> <span class="gi">variable</span>
  <span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
      <span class="p">{</span><span class="gi">sqlText</span><span class="p">:</span> <span class="vi">"set SESSION_VAR2 = 'I was set inside the StProc.'"</span><span class="p">}</span>
      <span class="p">);</span>
  <span class="gi">var</span> <span class="gi">rs</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>  <span class="p">//</span> <span class="gi">we</span> <span class="ni">ignore</span> <span class="gi">the</span> <span class="ni">result</span> <span class="ni">in</span> <span class="gi">this</span> <span class="ni">case</span>
  <span class="p">//</span> <span class="gi">Run</span> <span class="nf">a</span> <span class="gi">query</span> <span class="ni">using</span> <span class="gi">the</span> <span class="ni">first</span> <span class="ni">session</span> <span class="gi">variable</span>
  <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
      <span class="p">{</span><span class="gi">sqlText</span><span class="p">:</span> <span class="vi">"select f from sv_table where f &gt; $SESSION_VAR1"</span><span class="p">}</span>
      <span class="p">);</span>
  <span class="gi">rs</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
  <span class="gi">rs</span><span class="p">.</span><span class="ni">next</span><span class="p">();</span>
  <span class="gi">var</span> <span class="gi">output</span> <span class="p">=</span> <span class="gi">rs</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
  <span class="ni">return</span> <span class="gi">output</span><span class="p">;</span>
<span class="p">  $$</span>
  <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="76" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">session_var_user</span><span class="p">();</span>
<span class="p">+</span><span class="no">------------------+</span>
<span class="no">| SESSION_VAR_USER |</span>
<span class="no">|------------------|</span>
<span class="no">|               51 |</span>
<span class="p">+</span><span class="no">------------------+</span>
</pre></div>
</div><div data-codeblock-index="77" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>View the value of the session variable set inside the stored procedure:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">$</span><span class="gi">SESSION_VAR2</span><span class="p">;</span>
<span class="p">+</span><span class="no">------------------------------+</span>
<span class="no">| $SESSION_VAR2                |</span>
<span class="no">|------------------------------|</span>
<span class="no">| I was set inside the StProc. |</span>
<span class="p">+</span><span class="no">------------------------------+</span>
</pre></div>
</div><div data-codeblock-index="78" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although you can set a session variable inside a stored procedure and leave it set after the end of the procedure,
Snowflake does <span class="emph">not</span> recommend doing this.</p>
</div>
</section>
<section id="owner-s-rights-stored-procedure">
<h4>Owner’s Rights Stored Procedure<a class="headerlink" href="stored-procedures-javascript.html#owner-s-rights-stored-procedure" title="Link to this heading">¶</a></h4>
<p>The following example demonstrates an owner’s rights stored procedure.</p>
<ol class="arabic">
<li><p>Create an owner’s rights stored procedure that uses a session variable:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">procedure</span> <span class="gi">cannot_use_session_vars</span><span class="p">()</span>
  <span class="ni">returns</span> <span class="ni">float</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">EXECUTE</span> <span class="ni">AS</span> <span class="ni">OWNER</span>
  <span class="ni">as</span>
  <span class="p">$$</span>
  <span class="p">//</span> <span class="gi">Run</span> <span class="nf">a</span> <span class="gi">query</span> <span class="ni">using</span> <span class="gi">the</span> <span class="ni">first</span> <span class="ni">session</span> <span class="gi">variable</span>
  <span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
      <span class="p">{</span><span class="gi">sqlText</span><span class="p">:</span> <span class="vi">"select f from sv_table where f &gt; $SESSION_VAR1"</span><span class="p">}</span>
      <span class="p">);</span>
  <span class="gi">var</span> <span class="gi">rs</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>
  <span class="gi">rs</span><span class="p">.</span><span class="ni">next</span><span class="p">();</span>
  <span class="gi">var</span> <span class="gi">output</span> <span class="p">=</span> <span class="gi">rs</span><span class="p">.</span><span class="gi">getColumnValue</span><span class="p">(</span><span class="nf">1</span><span class="p">);</span>
  <span class="ni">return</span> <span class="gi">output</span><span class="p">;</span>
<span class="p">  $$</span>
  <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="79" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the procedure (it should fail):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">cannot_use_session_vars</span><span class="p">();</span>
</pre></div>
</div><div data-codeblock-index="80" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Create an owner’s rights stored procedure that tries to set a session variable:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">procedure</span> <span class="gi">cannot_set_session_vars</span><span class="p">()</span>
  <span class="ni">returns</span> <span class="ni">float</span>
  <span class="ni">language</span> <span class="ni">javascript</span>
  <span class="ni">EXECUTE</span> <span class="ni">AS</span> <span class="ni">OWNER</span>
  <span class="ni">as</span>
  <span class="p">$$</span>
  <span class="p">//</span> <span class="ni">Set</span> <span class="gi">the</span> <span class="nd">second</span> <span class="ni">session</span> <span class="gi">variable</span>
  <span class="gi">var</span> <span class="gi">stmt</span> <span class="p">=</span> <span class="gi">snowflake</span><span class="p">.</span><span class="gi">createStatement</span><span class="p">(</span>
      <span class="p">{</span><span class="gi">sqlText</span><span class="p">:</span> <span class="vi">"set SESSION_VAR2 = 'I was set inside the StProc.'"</span><span class="p">}</span>
      <span class="p">);</span>
  <span class="gi">var</span> <span class="gi">rs</span> <span class="p">=</span> <span class="gi">stmt</span><span class="p">.</span><span class="ni">execute</span><span class="p">();</span>  <span class="p">//</span> <span class="gi">we</span> <span class="ni">ignore</span> <span class="gi">the</span> <span class="ni">result</span> <span class="ni">in</span> <span class="gi">this</span> <span class="ni">case</span>
  <span class="ni">return</span> <span class="nf">3</span><span class="p">.</span><span class="nf">0</span><span class="p">;</span>   <span class="p">//</span> <span class="gi">dummy</span> <span class="ni">value</span><span class="p">.</span>
<span class="p">  $$</span>
  <span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="81" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
<li><p>Call the procedure (it should fail):</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample notranslate"><div class="highlight"><pre><span></span><span class="ni">CALL</span> <span class="gi">cannot_set_session_vars</span><span class="p">();</span>
</pre></div>
</div><div data-codeblock-index="82" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</li>
</ol>
</section>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="stored-procedures-javascript.html#troubleshooting" title="Link to this heading">¶</a></h2>
<p>A general troubleshooting technique is to use a JavaScript try/catch block to
catch the error and display error information. The error object contains:</p>
<ul class="simple">
<li><p>Error code.</p></li>
<li><p>Error message.</p></li>
<li><p>Error state.</p></li>
<li><p>Stack trace at the point of failure.</p></li>
</ul>
<p>For more information, including an example, of how to use this information, see <a class="reference internal" href="stored-procedures-javascript.html#label-stored-procedure-error-handling"><span class="std std-ref">Catching an Error using Try/Catch</span></a> (in this topic).</p>
<p>Th following sections provide additional suggestions to help debug specific problems.</p>
<section id="stored-procedure-or-udf-unexpectedly-returns-null">
<h3>Stored Procedure or UDF Unexpectedly Returns NULL<a class="headerlink" href="stored-procedures-javascript.html#stored-procedure-or-udf-unexpectedly-returns-null" title="Link to this heading">¶</a></h3>
<dl class="field-list">
<dt class="field-odd">Cause<span class="colon">:</span></dt>
<dd class="field-odd"><p>Your stored procedure/UDF has a parameter, and inside the procedure/UDF, the parameter is referred to by its lowercase name, but Snowflake has
automatically converted the name to uppercase.</p>
</dd>
<dt class="field-even">Solution<span class="colon">:</span></dt>
<dd class="field-even"><p>Either:</p>
<ul class="simple">
<li><p>Use uppercase for the variable name inside the JavaScript code, or</p></li>
<li><p>Enclose the variable name in double quotes in the SQL code.</p></li>
</ul>
<p>For more details, see <a class="reference internal" href="../udf/javascript/udf-javascript-introduction.html#label-js-udf-arguments"><span class="std std-ref">JavaScript Arguments and Returned Values</span></a>.</p>
</dd>
</dl>
</section>
<section id="stored-procedure-never-finishes-running">
<h3>Stored Procedure Never Finishes Running<a class="headerlink" href="stored-procedures-javascript.html#stored-procedure-never-finishes-running" title="Link to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Cause<span class="colon">:</span></dt>
<dd class="field-odd"><p>You might have an infinite loop in your JavaScript code.</p>
</dd>
<dt class="field-even">Solution<span class="colon">:</span></dt>
<dd class="field-even"><p>Check for and fix any infinite loops.</p>
</dd>
</dl>
</section>
<section id="error-failed-empty-argument-passed">
<h3>Error: <code class="code docutils literal notranslate"><span class="pre">Failed:</span> <span class="pre">empty</span> <span class="pre">argument</span> <span class="pre">passed</span></code><a class="headerlink" href="stored-procedures-javascript.html#error-failed-empty-argument-passed" title="Link to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Cause<span class="colon">:</span></dt>
<dd class="field-odd"><p>Your stored procedure might contain “sqltext” when it should have “sqlText”
(the first is all lowercase; the second is mixed case).</p>
</dd>
<dt class="field-even">Solution<span class="colon">:</span></dt>
<dd class="field-even"><p>Use “sqlText”.</p>
</dd>
</dl>
</section>
<section id="error-javascript-out-of-memory-error-udf-thread-memory-limit-exceeded">
<h3>Error: <code class="code docutils literal notranslate"><span class="pre">JavaScript</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">memory</span> <span class="pre">error:</span> <span class="pre">UDF</span> <span class="pre">thread</span> <span class="pre">memory</span> <span class="pre">limit</span> <span class="pre">exceeded</span></code><a class="headerlink" href="stored-procedures-javascript.html#error-javascript-out-of-memory-error-udf-thread-memory-limit-exceeded" title="Link to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Cause<span class="colon">:</span></dt>
<dd class="field-odd"><p>You might have an infinite loop in your JavaScript code.</p>
</dd>
<dt class="field-even">Solution<span class="colon">:</span></dt>
<dd class="field-even"><p>Check for and fix any infinite loops. In particular, ensure that you stop calling for the next row when the result set runs out (i.e. when
<code class="code docutils literal notranslate"><span class="pre">resultSet.next()</span></code> returns <code class="code docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
</dl>
</section>
</section>
</section>


</article><footer class="mt-24 mb-12 print:hidden"><div class="mb-8"><div class="flex"><p class="mr-4 text-primary">Was this page helpful?</p><button class="button-primary-bg rounded-md button-primary-text py-1 px-3 text-sm mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="thumbs-up" class="svg-inline--fa fa-thumbs-up pr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M128 447.1V223.1c0-17.67-14.33-31.1-32-31.1H32c-17.67 0-32 14.33-32 31.1v223.1c0 17.67 14.33 31.1 32 31.1h64C113.7 479.1 128 465.6 128 447.1zM512 224.1c0-26.5-21.48-47.98-48-47.98h-146.5c22.77-37.91 34.52-80.88 34.52-96.02C352 56.52 333.5 32 302.5 32c-63.13 0-26.36 76.15-108.2 141.6L178 186.6C166.2 196.1 160.2 210 160.1 224c-.0234 .0234 0 0 0 0L160 384c0 15.1 7.113 29.33 19.2 38.39l34.14 25.59C241 468.8 274.7 480 309.3 480H368c26.52 0 48-21.47 48-47.98c0-3.635-.4805-7.143-1.246-10.55C434 415.2 448 397.4 448 376c0-9.148-2.697-17.61-7.139-24.88C463.1 347 480 327.5 480 304.1c0-12.5-4.893-23.78-12.72-32.32C492.2 270.1 512 249.5 512 224.1z"></path></svg>Yes<!-- --></button><button class="button-primary-bg rounded-md button-primary-text py-1 px-3 text-sm"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="thumbs-down" class="svg-inline--fa fa-thumbs-down pr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M96 32.04H32c-17.67 0-32 14.32-32 31.1v223.1c0 17.67 14.33 31.1 32 31.1h64c17.67 0 32-14.33 32-31.1V64.03C128 46.36 113.7 32.04 96 32.04zM467.3 240.2C475.1 231.7 480 220.4 480 207.9c0-23.47-16.87-42.92-39.14-47.09C445.3 153.6 448 145.1 448 135.1c0-21.32-14-39.18-33.25-45.43C415.5 87.12 416 83.61 416 79.98C416 53.47 394.5 32 368 32h-58.69c-34.61 0-68.28 11.22-95.97 31.98L179.2 89.57C167.1 98.63 160 112.9 160 127.1l.1074 160c0 0-.0234-.0234 0 0c.0703 13.99 6.123 27.94 17.91 37.36l16.3 13.03C276.2 403.9 239.4 480 302.5 480c30.96 0 49.47-24.52 49.47-48.11c0-15.15-11.76-58.12-34.52-96.02H464c26.52 0 48-21.47 48-47.98C512 262.5 492.2 241.9 467.3 240.2z"></path></svg>No<!-- --></button></div></div><div class="grid md:grid-cols-2 xl:grid-cols-3 grid-auto justify-items-start items-start gap-x-6 gap-y-4 border-t border-b py-8"><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 19 19" fill="none" class="fill-gray-70 dark:fill-gray-55"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.08044 9.85246C6.11896 9.72629 6.13502 9.59631 6.13211 9.46798C6.12767 9.37501 6.11608 9.28222 6.09067 9.18929C6.01427 8.90076 5.83329 8.64297 5.56208 8.48046L1.70485 6.16593C1.16033 5.84021 0.466142 6.03386 0.153636 6.59893C-0.161893 7.16313 0.0242153 7.88369 0.568731 8.21023L2.72417 9.50569L0.568731 10.7976C0.0242153 11.1247 -0.161236 11.8454 0.153636 12.4119C0.466142 12.9754 1.16033 13.1682 1.70485 12.8425L5.56208 10.5264C5.82238 10.3707 5.99903 10.1266 6.08044 9.85246ZM7.12726 12.0214C6.90562 12.0017 6.6752 12.0501 6.46792 12.1756L2.60777 14.4886C2.0647 14.815 1.87925 15.5394 2.19267 16.1046C2.50755 16.6683 3.20108 16.8624 3.74335 16.5344L5.90603 15.2381V17.8285C5.90603 18.4812 6.41412 19.01 7.04293 19.01C7.66872 19.01 8.17841 18.4812 8.17841 17.8285V13.1976C8.17841 12.5758 7.71463 12.0652 7.12726 12.0214ZM11.0804 6.98844C11.3013 7.00744 11.5311 6.95837 11.7384 6.83439L15.5977 4.51919C16.1416 4.19265 16.3261 3.47126 16.0135 2.90459C15.7002 2.34051 15.006 2.14697 14.4629 2.47323L12.3017 3.77112V1.17982C12.3017 0.528953 11.7936 0 11.1648 0C10.536 0 10.0292 0.528953 10.0292 1.17982V5.81081C10.0292 6.43187 10.4917 6.94335 11.0804 6.98844ZM2.60777 4.51919L6.46792 6.83439C6.6752 6.95837 6.90562 7.00744 7.12726 6.98844C7.71463 6.94335 8.17841 6.43187 8.17841 5.81081V1.17982C8.17841 0.528953 7.66872 0 7.04293 0C6.41412 0 5.90603 0.528953 5.90603 1.17982V3.77112L3.74335 2.47323C3.20108 2.14697 2.50755 2.34051 2.19267 2.90459C1.87925 3.47126 2.0647 4.19265 2.60777 4.51919ZM9.86206 9.49596C9.86206 9.42874 9.82287 9.33499 9.7771 9.28524L9.31254 8.80465C9.26677 8.75722 9.17654 8.71787 9.11169 8.71787H9.09367C9.02896 8.71787 8.93888 8.75722 8.89375 8.80465L8.42922 9.28524C8.38267 9.33499 8.34703 9.42874 8.34703 9.49596V9.51486C8.34703 9.58126 8.38267 9.67419 8.42922 9.7226L8.89375 10.2045C8.93952 10.2521 9.02896 10.2913 9.09367 10.2913H9.11169C9.17654 10.2913 9.26677 10.2521 9.31254 10.2045L9.7771 9.7226C9.82287 9.67419 9.86206 9.58126 9.86206 9.51486V9.49596ZM11.1444 9.95821L9.54007 11.6234C9.49416 11.6723 9.40553 11.7124 9.33873 11.7124H9.22231H8.98529H8.86692C8.8021 11.7124 8.71198 11.6723 8.66543 11.6234L7.06187 9.95821C7.01596 9.91134 6.97889 9.81703 6.97889 9.75047V9.62732V9.38104V9.25953C6.97889 9.19145 7.01596 9.09702 7.06187 9.04944L8.66543 7.3844C8.71198 7.33536 8.8021 7.29679 8.86692 7.29679H8.98529H9.22231H9.33873C9.40408 7.29679 9.49416 7.33536 9.54007 7.3844L11.1444 9.04944C11.1902 9.09702 11.2273 9.19145 11.2273 9.25953V9.38104V9.62732V9.75047C11.2273 9.81703 11.1902 9.91134 11.1444 9.95821ZM15.5977 14.4886L11.7384 12.1756C11.5311 12.0501 11.3013 12.0017 11.0804 12.0214C10.4917 12.0652 10.0292 12.5758 10.0292 13.1976V17.8285C10.0292 18.4812 10.536 19.01 11.1648 19.01C11.7936 19.01 12.3017 18.4812 12.3017 17.8285V15.2381L14.4629 16.5344C15.0059 16.8624 15.7002 16.6683 16.0135 16.1046C16.3261 15.5394 16.1416 14.815 15.5977 14.4886ZM17.6383 8.21023L15.4828 9.50569L17.6383 10.7976C18.1828 11.1247 18.3689 11.8454 18.0541 12.4119C17.74 12.9754 17.0452 13.1682 16.5028 12.8425L12.6426 10.5264C12.3852 10.3707 12.2065 10.1266 12.1272 9.85246C12.0894 9.72629 12.0719 9.59631 12.0763 9.46798C12.0785 9.37501 12.0915 9.28222 12.1162 9.18929C12.1935 8.90076 12.3745 8.64308 12.6426 8.48046L16.5028 6.16593C17.0452 5.84021 17.74 6.03386 18.0541 6.59893C18.3689 7.16313 18.1828 7.88369 17.6383 8.21023Z"></path></svg><a href="https://www.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Visit Snowflake</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_2428)"><path d="M8.66666 7.96667H12.4867" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.5733 6.06006V9.88006" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 6.69999V13.7L13.76 11.7867H8.03332C7.46874 11.7882 6.91974 11.6016 6.47305 11.2563C6.02635 10.911 5.70743 10.4267 5.56666 9.87999C5.51029 9.66234 5.48339 9.43812 5.48666 9.21332V6.69999C5.48666 6.02457 5.75497 5.37681 6.23256 4.89922C6.71015 4.42163 7.35791 4.15332 8.03332 4.15332H13.12C13.7954 4.15332 14.4432 4.42163 14.9208 4.89922C15.3983 5.37681 15.6667 6.02457 15.6667 6.69999Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M11.8467 3.51334V4.18001H8.03332C7.35791 4.18001 6.71015 4.44832 6.23256 4.92591C5.75497 5.4035 5.48666 6.05126 5.48666 6.72668V8.63334H3.57332L1.66666 10.5133V3.51334C1.66666 2.83792 1.93497 2.19017 2.41256 1.71258C2.89015 1.23498 3.53791 0.966675 4.21332 0.966675H9.33332C10.0029 0.97544 10.6422 1.24761 11.1126 1.72426C11.583 2.20091 11.8467 2.84366 11.8467 3.51334Z" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_2428"><rect width="16" height="16" fill="white" transform="translate(0.666656)"></rect></clipPath></defs></svg><a href="https://community.snowflake.com/s/" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Join the conversation</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><path d="M6.4267 10.5467L4.51337 8.64002L6.4267 6.72668" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.2401 10.5467L12.1534 8.64002L10.2401 6.72668" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M8.96671 6.72668L7.70004 10.5467" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M14.0601 4.18V15H2.60672V1H10.8801L14.0601 4.18Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M14.0601 4.18V4.82H10.2401V1H10.8801L14.0601 4.18Z" stroke-width="1.5" stroke-miterlimit="10"></path></svg><a href="https://developers.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Develop with Snowflake</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><path d="M7.99999 6.09338L8.39332 6.92672L9.27332 7.06672L8.63999 7.71338L8.78665 8.64005L7.99999 8.20005L7.21332 8.64005L7.35999 7.71338L6.72665 7.06672L7.60665 6.92672L7.99999 6.09338Z" fill="#5D6A85"></path><path d="M11.82 6.09338L12.2133 6.92672L13.0933 7.06672L12.4533 7.71338L12.6067 8.64005L11.82 8.20005L11.0333 8.64005L11.18 7.71338L10.5467 7.06672L11.4267 6.92672L11.82 6.09338Z" fill="#5D6A85"></path><path d="M4.18001 6.09338L4.57334 6.92672L5.45334 7.06672L4.82001 7.71338L4.96668 8.64005L4.18001 8.20005L3.39334 8.64005L3.54668 7.71338L2.90668 7.06672L3.78668 6.92672L4.18001 6.09338Z" fill="#5D6A85"></path><path d="M1 5.45339V9.27339C1 9.6111 1.13415 9.93497 1.37295 10.1738C1.61175 10.4126 1.93562 10.5467 2.27333 10.5467H6.72667L8 11.8201L9.27333 10.5467H13.7267C14.0644 10.5467 14.3883 10.4126 14.6271 10.1738C14.8658 9.93497 15 9.6111 15 9.27339V5.45339C15 5.11568 14.8658 4.7918 14.6271 4.553C14.3883 4.31421 14.0644 4.18005 13.7267 4.18005H2.27333C1.93562 4.18005 1.61175 4.31421 1.37295 4.553C1.13415 4.7918 1 5.11568 1 5.45339Z" stroke-width="1.5" stroke-miterlimit="10"></path></svg><a href="https://docs.snowflake.com/feedback" class="mx-1 hover:underline hover:text-primary">Share your feedback</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_2368)"><path d="M4.15999 7.3866H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M4.15999 12.5066H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M4.15999 9.94666H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 0.993286H1.59999V15.06H15.6667V0.993286Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 4.83329H11.4867H10.2067H1.59999V0.993286H15.6667V4.83329Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.51999 2.91333H4.79999" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M6.07332 2.91333H7.35332" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M8.63332 2.91333H9.91332" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_2368"><rect width="16" height="16" fill="white" transform="translate(0.666656)"></rect></clipPath></defs></svg><a href="https://www.snowflake.com/blog/" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Read the latest on our blog</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_1117)"><path d="M15.3334 0.986694H1.33337V11.1667H15.3334V0.986694Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M11.5134 11.1667C12.5664 11.1667 13.4201 10.3131 13.4201 9.26006C13.4201 8.20704 12.5664 7.35339 11.5134 7.35339C10.4604 7.35339 9.60672 8.20704 9.60672 9.26006C9.60672 10.3131 10.4604 11.1667 11.5134 11.1667Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.2401 11.1666H12.7867V14.3466L11.5134 13.7133L10.2401 14.3466V11.1666Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.88004 4.16663H12.7867" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.88004 7.34668H8.33337" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_1117"><rect width="16" height="16" fill="white" transform="translate(0.333374)"></rect></clipPath></defs></svg><a href="https://learn.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Get your own certification</a></div></div><div class="pt-8 md:flex justify-between"><div class="flex space-x-4 text-xs mb-4 md:mb-0 text-secondary"><a href="https://www.snowflake.com/privacy-policy/" class="hover:text-primary hover:underline">Privacy Notice</a><a href="https://www.snowflake.com/legal/snowflake-site-terms/" class="hover:text-primary hover:underline">Site Terms</a><span>© <!-- -->2024<!-- --> Snowflake, Inc. <!-- -->All Rights Reserved<!-- -->.<!-- --></span></div></div></footer></div><aside class="w-full xl:w-64 text-sm xl:sticky xl:top-8 xl:pb-16 block xl:pl-8 max-h-[calc(100vh-107px)] overflow-y-auto mb-4 md:mb-0 print:hidden"><div class="mb-4 md:mb-8 onthispage border md:border-0 rounded-md px-3 py-2 md:p-0" role="complementary"><label for="on-this-page-checkbox"><div class="flex items-center"><div class="block md:hidden mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"></path></svg></div><p class="font-semibold text-header">On this page</p></div></label><input type="checkbox" id="on-this-page-checkbox" class="peer hidden"/><ol class="hidden peer-checked:block md:block"><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#understanding-the-javascript-api">Understanding the JavaScript API</a></li><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#sql-and-javascript-data-type-mapping">SQL and JavaScript Data Type Mapping</a></li><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#general-tips">General Tips</a></li><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#javascript-stored-procedure-considerations">JavaScript Stored Procedure Considerations</a></li><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#examples">Examples</a></li><li class="my-3 break-words hover:underline "><a href="stored-procedures-javascript.html#troubleshooting">Troubleshooting</a></li></ol></div><div class="mb-8 border md:border-0 rounded-md px-3 py-2 md:p-0"><label for="related-topics-checkbox"><div class="flex items-center"><div class="block md:hidden mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"></path></svg></div><p class="font-semibold text-header">Related content</p></div></label><input type="checkbox" id="related-topics-checkbox" class="peer hidden"/><ol class="hidden peer-checked:block md:block"><li class="my-2 hover:underline"><a href="https://docs.snowflake.com/developer-guide/stored-procedure/stored-procedures-usage">Working with Stored Procedures</a></li><li class="my-2 hover:underline"><a href="../../sql-reference/stored-procedures-rights.html">Understanding Caller’s Rights and Owner’s Rights Stored Procedures</a></li><li class="my-2 hover:underline"><a href="https://docs.snowflake.com/developer-guide/stored-procedure/stored-procedures-api">JavaScript Stored Procedures API</a></li><li class="my-2 hover:underline"><a href="https://docs.snowflake.com/developer-guide/udf/javascript/udf-javascript-introduction">Introduction to JavaScript UDFs</a></li></ol></div></aside></div></div></main><div id="overlay-root" class="lg:hidden"></div></div><div id="popup-root"></div></div><div class="bottom-10 right-10 z-90 fixed print:hidden" id="language-picker"><div class="text-xs relative group"><div class="cursor-pointer bg-level-3 px-4 py-3 rounded-md">Language<!-- -->: <!-- --><strong>English</strong></div><ul class="list-group"><div class="z-50 px-4 py-1 w-28 rounded-lg bg-level-2 drop-shadow-xl group-hover:flex hidden flex flex-wrap-reverse absolute right-0 bottom-10 animate-fade-in-up"><li class="my-2 w-full text-right text-link"><a href="stored-procedures-javascript.html" class="hover:text-link">English</a></li><li class="my-2 w-full text-right "><a href="https://docs.snowflake.com/fr/developer-guide/stored-procedure/stored-procedures-javascript" class="hover:text-link">Français</a></li><li class="my-2 w-full text-right "><a href="https://docs.snowflake.com/de/developer-guide/stored-procedure/stored-procedures-javascript" class="hover:text-link">Deutsch</a></li><li class="my-2 w-full text-right "><a href="https://docs.snowflake.com/ja/developer-guide/stored-procedure/stored-procedures-javascript" class="hover:text-link">日本語</a></li><li class="my-2 w-full text-right "><a href="https://docs.snowflake.com/ko/developer-guide/stored-procedure/stored-procedures-javascript" class="hover:text-link">한국어</a></li><li class="my-2 w-full text-right "><a href="https://docs.snowflake.com/pt/developer-guide/stored-procedure/stored-procedures-javascript" class="hover:text-link">Português</a></li></div></ul></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\n\n\n  \n  \u003csection id=\"writing-stored-procedures-in-javascript\"\u003e\n\u003ch1\u003eWriting Stored Procedures in JavaScript\u003ca class=\"headerlink\" href=\"#writing-stored-procedures-in-javascript\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h1\u003e\n\n\u003cp\u003eThis topic explains how to write the JavaScript code for a stored procedure.\u003c/p\u003e\n\u003cdiv class=\"admonition note\"\u003e\n\u003cp class=\"admonition-title\"\u003eNote\u003c/p\u003e\n\u003cp\u003eTo both create and call an anonymous procedure, use \u003ca class=\"reference internal\" href=\"../../sql-reference/sql/call-with\"\u003e\u003cspan class=\"doc\"\u003eCALL (with Anonymous Procedure)\u003c/span\u003e\u003c/a\u003e. Creating and calling an anonymous procedure does\nnot require a role with CREATE PROCEDURE schema privileges.\u003c/p\u003e\n\u003c/div\u003e\n\n\n\u003cp\u003eYou can capture log and trace data as your handler code executes. For more information, refer to\n\u003ca class=\"reference internal\" href=\"../logging-tracing/logging-tracing-overview\"\u003e\u003cspan class=\"doc\"\u003eLogging and Tracing Overview\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003csection id=\"understanding-the-javascript-api\"\u003e\n\u003ch2\u003eUnderstanding the JavaScript API\u003ca class=\"headerlink\" href=\"#understanding-the-javascript-api\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe JavaScript API for stored procedures is similar to, but not identical to, the APIs in Snowflake connectors and drivers\n(Node.js, JDBC, Python, etc.).\u003c/p\u003e\n\u003cp\u003eThe API enables you to perform operations such as:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eExecute a SQL statement.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eRetrieve the results of a query (i.e. a result set).\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eRetrieve metadata about the result set (number of columns, data types of the columns, etc.).\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThese operations are carried out by calling methods on the following objects:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esnowflake\u003c/span\u003e\u003c/code\u003e, which has methods to create a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eStatement\u003c/span\u003e\u003c/code\u003e object and execute a SQL command.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eStatement\u003c/span\u003e\u003c/code\u003e, which helps you execute prepared statements and access metadata for those prepared statements,\nand allows you to get back a ResultSet object.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eResultSet\u003c/span\u003e\u003c/code\u003e, which holds the results of a query (e.g. the rows of data retrieved for a SELECT statement).\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSfDate\u003c/span\u003e\u003c/code\u003e, which is an extension of JavaScript Date (with additional methods) and serves as a return type for\nthe Snowflake SQL data types TIMESTAMP_LTZ, TIMESTAMP_NTZ, and TIMESTAMP_TZ.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThese objects are described in detail in the \u003ca class=\"reference internal\" href=\"stored-procedures-api\"\u003e\u003cspan class=\"doc\"\u003eJavaScript Stored Procedures API\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eA typical stored procedure contains code similar to the following pseudo-code:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003emy_sql_command1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"delete from history_table where event_year \u0026lt; 2016\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estatement1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003emy_sql_command1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"gi\"\u003estatement1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003emy_sql_command2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"delete from log_table where event_year \u0026lt; 2016\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estatement2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003emy_sql_command2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"gi\"\u003estatement2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"0\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThis code uses an object named \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esnowflake\u003c/span\u003e\u003c/code\u003e, which is a special object\nthat exists without being declared. The object is provided inside the context of each stored\nprocedure and exposes the API to allow you to interact with the server.\u003c/p\u003e\n\u003cp\u003eThe other variables (e.g. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003estatement1\u003c/span\u003e\u003c/code\u003e) are created with JavaScript \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003evar\u003c/span\u003e\u003c/code\u003e statements. For example:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003estatement1\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e...;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"1\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eAs shown in the code sample above, the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esnowflake\u003c/span\u003e\u003c/code\u003e object allows you\nto create a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eStatement\u003c/span\u003e\u003c/code\u003e object by calling one of the methods in the API.\u003c/p\u003e\n\u003cp\u003eHere’s an example that retrieves a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eResultSet\u003c/span\u003e\u003c/code\u003e and iterates through it:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003eread_result_set\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e \u003cspan class=\"ni\"\u003enot\u003c/span\u003e \u003cspan class=\"ni\"\u003enull\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e     \n  \u003cspan class=\"p\"\u003e$$  \u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003emy_sql_command\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"select * from table1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estatement1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"na\"\u003e: my_sql_command\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003eresult_set1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estatement1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eLoop\u003c/span\u003e \u003cspan class=\"gi\"\u003ethrough\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"gi\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprocessing\u003c/span\u003e \u003cspan class=\"ni\"\u003eone\u003c/span\u003e \u003cspan class=\"ni\"\u003erow\u003c/span\u003e \u003cspan class=\"ni\"\u003eat\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"ni\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e...\u003c/span\u003e \n    \u003cspan class=\"ni\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eresult_set1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ecolumn1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003eresult_set1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n       \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ecolumn2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003eresult_set1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n       \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eDo\u003c/span\u003e \u003cspan class=\"gi\"\u003esomething\u003c/span\u003e \u003cspan class=\"ni\"\u003ewith\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"gi\"\u003eretrieved\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e\u003cspan class=\"p\"\u003e...\u003c/span\u003e\n       \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eReplace\u003c/span\u003e \u003cspan class=\"ni\"\u003ewith\u003c/span\u003e \u003cspan class=\"gi\"\u003esomething\u003c/span\u003e \u003cspan class=\"gi\"\u003emore\u003c/span\u003e \u003cspan class=\"gi\"\u003euseful\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"2\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe \u003ca class=\"reference internal\" href=\"#label-stored-procedure-examples\"\u003e\u003cspan class=\"std std-ref\"\u003eExamples\u003c/span\u003e\u003c/a\u003e section (at the end of this topic) provides additional examples\nthat exercise each of the objects, and many of the methods, in the stored procedure JavaScript API.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"sql-and-javascript-data-type-mapping\"\u003e\n\u003cspan id=\"label-stored-procedure-data-type-mapping\"\u003e\u003c/span\u003e\u003ch2\u003eSQL and JavaScript Data Type Mapping\u003ca class=\"headerlink\" href=\"#sql-and-javascript-data-type-mapping\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWhen calling, using, and getting values back from stored procedures, you often need to convert from a Snowflake SQL\ndata type to a JavaScript data type or vice versa.\u003c/p\u003e\n\u003cp\u003eSQL to JavaScript conversion can occur when:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eCalling a stored procedure with an argument. The argument is a SQL data type; when it is stored inside a\nJavaScript variable inside the stored procedure, it must be converted.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eWhen retrieving a value from a ResultSet object into a JavaScript variable. The ResultSet holds the value as a SQL\ndata type, and the JavaScript variable must store the value as one of the JavaScript data types.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJavaScript to SQL conversion can occur when:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eReturning a value from the stored procedure. The \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ereturn\u003c/span\u003e\u003c/code\u003e statement typically contains a JavaScript\nvariable that must be converted to a SQL data type.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eWhen dynamically constructing a SQL statement that uses a value in a JavaScript variable.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eWhen binding a JavaScript variable’s value to a prepared statement.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor more information about how Snowflake maps JavaScript and SQL data types, see \u003ca class=\"reference internal\" href=\"../udf-stored-procedure-data-type-mapping.html#label-javascript-supported-snowpark-types\"\u003e\u003cspan class=\"std std-ref\"\u003eSQL-JavaScript Data Type Mappings\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"general-tips\"\u003e\n\u003ch2\u003eGeneral Tips\u003ca class=\"headerlink\" href=\"#general-tips\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"line-continuation\"\u003e\n\u003ch3\u003eLine Continuation\u003ca class=\"headerlink\" href=\"#line-continuation\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSQL statements can be quite long, and it is not always practical to fit them on a single line. JavaScript treats a\nnewline as the end of a statement. If you want to split a long SQL statement across multiple lines, you can use\nthe usual JavaScript techniques for handling long strings, including:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003ePut a backslash (line continuation character) immediately prior to the end of the line. For example:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"SELECT * \\\u003c/span\u003e\n\u003cspan class=\"s2\"\u003e                       FROM table1;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"3\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eUse backticks (single backquotes) rather than double quotes around the string. For example:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"sb\"\u003e`SELECT *\u003c/span\u003e\n\u003cspan class=\"sb\"\u003e                       FROM table1;`\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"4\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAccumulate the string. For example:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"SELECT col1, col2\"\u003c/span\u003e\n\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"     FROM table1\"\u003c/span\u003e\n\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"     WHERE col1 \u0026gt;= 100\"\u003c/span\u003e\n\u003cspan class=\"nx\"\u003esql_command\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"     ORDER BY col2;\"\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"5\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"javascript-stored-procedure-considerations\"\u003e\n\u003ch2\u003eJavaScript Stored Procedure Considerations\u003ca class=\"headerlink\" href=\"#javascript-stored-procedure-considerations\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"javascript-number-range\"\u003e\n\u003ch3\u003eJavaScript Number Range\u003ca class=\"headerlink\" href=\"#javascript-number-range\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe range for numbers with precision intact is from\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cp\u003e-(2^53 -1)\u003c/p\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eto\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cp\u003e(2^53 -1)\u003c/p\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe range of valid values in Snowflake NUMBER(p, s) and DOUBLE data types is larger. Retrieving a value from Snowflake\nand storing it in a JavaScript numeric variable can result in loss of precision. For example:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003eCREATE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eOR\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eREPLACE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eFUNCTION\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enum_test\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"kr\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nx\"\u003eRETURNS\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003estring\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nx\"\u003eLANGUAGE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eJAVASCRIPT\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"nx\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"nx\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"6\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003eselect\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ehash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eAS\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\n\u003cspan class=\"w\"\u003e       \u003c/span\u003e\u003cspan class=\"nx\"\u003enum_test\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ehash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eAS\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\n\u003cspan class=\"w\"\u003e       \u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"o\"\u003e+----------------------+----------------------+------------+\u003c/span\u003e\n\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e                    \u003c/span\u003e\u003cspan class=\"nx\"\u003eA\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eB\u003c/span\u003e\u003cspan class=\"w\"\u003e                    \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003eA\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eB\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n\u003cspan class=\"o\"\u003e|----------------------+----------------------+------------|\u003c/span\u003e\n\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mf\"\u003e4730168494964875235\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mf\"\u003e4730168494964875000\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mf\"\u003e235.00000\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n\u003cspan class=\"o\"\u003e+----------------------+----------------------+------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"7\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe first two columns should match, and the third should contain 0.0.\u003c/p\u003e\n\u003cp\u003eThe problem applies to JavaScript user-defined functions (UDFs) and stored procedures.\u003c/p\u003e\n\u003cp\u003eIf you experience the problem in stored procedures when using \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003egetColumnValue()\u003c/span\u003e\u003c/code\u003e, you might be able to avoid the\nproblem by retrieving a value as a string, e.g. with:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003egetColumnValueAsString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"8\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eYou can then return the string from the stored procedure, and cast the string to a numeric data type in SQL.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"javascript-error-handling\"\u003e\n\u003ch3\u003eJavaScript Error Handling\u003ca class=\"headerlink\" href=\"#javascript-error-handling\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eBecause a stored procedure is written in JavaScript, it can use JavaScript’s try/catch syntax.\u003c/p\u003e\n\u003cp\u003eThe stored procedure can throw a pre-defined exception or a custom exception. A simple example of throwing a\ncustom exception is \u003ca class=\"reference internal\" href=\"#label-stored-procedure-error-handling\"\u003e\u003cspan class=\"std std-ref\"\u003ehere\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eYou can execute your SQL statements inside a try block. If an error occurs, then your catch block can roll back all of\nthe statements (if you put the statements in a transaction). The Examples section contains an example of\n\u003ca class=\"reference internal\" href=\"#label-example-using-transaction-in-stored-procedures\"\u003e\u003cspan class=\"std std-ref\"\u003erolling back a transaction in a stored procedure\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"restrictions-on-stored-procedures\"\u003e\n\u003ch3\u003eRestrictions on Stored Procedures\u003ca class=\"headerlink\" href=\"#restrictions-on-stored-procedures\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eStored procedures have the following restrictions:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eThe JavaScript code cannot call the JavaScript \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eeval()\u003c/span\u003e\u003c/code\u003e function.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eJavaScript stored procedures support access to the standard JavaScript library. Note that this excludes many objects and methods\ntypically provided by browsers. There is no mechanism to import, include, or call additional libraries.\nAllowing 3rd-party libraries could create security holes.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eJavaScript code is executed within a restricted engine, preventing system calls from the JavaScript\ncontext (e.g. no network and disk access), and constraining the system resources available to the engine, specifically memory.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003csection id=\"case-sensitivity-in-javascript-arguments\"\u003e\n\u003cspan id=\"label-considerations-for-case-sensitivity-in-stored-procedures\"\u003e\u003c/span\u003e\u003ch3\u003eCase-sensitivity in JavaScript Arguments\u003ca class=\"headerlink\" href=\"#case-sensitivity-in-javascript-arguments\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eArgument names are case-insensitive in the SQL portion of the stored procedure code, but are\ncase-sensitive in the JavaScript portion.\u003c/p\u003e\n\u003cp\u003eFor stored procedures (and UDFs) that use JavaScript, identifiers (such as\nargument names) in the SQL portion of the statement are converted to uppercase automatically (unless you delimit the\nidentifier with double quotes), while argument names in the JavaScript portion\nwill be left in their original case. This can cause your stored procedure to\nfail without returning an explicit error message because the arguments aren’t seen.\u003c/p\u003e\n\u003cp\u003eHere is an example of a stored procedure in which the name of an argument in the\nJavaScript code does not match the name of the argument in the SQL code merely\nbecause the case will be different:\u003c/p\u003e\n\u003cp\u003eIn the example below, the first assignment statement is incorrect because the name \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eargument1\u003c/span\u003e\u003c/code\u003e is in lower case.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003ePROCEDURE\u003c/span\u003e \u003cspan class=\"nf\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eargument1\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eRETURNS\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eLANGUAGE\u003c/span\u003e \u003cspan class=\"ni\"\u003eJAVASCRIPT\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003elocal_variable1\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eargument1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"c1\"\u003e// Incorrect\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003elocal_variable2\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eARGUMENT1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"c1\"\u003e// Correct\u003c/span\u003e\n\u003cspan class=\"p\"\u003e$$;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"9\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eUsing uppercase identifiers (especially argument names) consistently across\nyour SQL statements and JavaScript code tends to reduce silent errors.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"javascript-delimiters\"\u003e\n\u003ch3\u003eJavaScript Delimiters\u003ca class=\"headerlink\" href=\"#javascript-delimiters\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe JavaScript portion of the stored procedure code must be enclosed within either single quotes \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e'\u003c/span\u003e\u003c/code\u003e or\ndouble dollar signs \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$$\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eUsing \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$$\u003c/span\u003e\u003c/code\u003e makes it easier to handle JavaScript code that contains single quotes without “escaping” those quotes.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"overloading-stored-procedure-names\"\u003e\n\u003cspan id=\"label-example-overloading-stored-procedure-names\"\u003e\u003c/span\u003e\u003ch3\u003eOverloading Stored Procedure Names\u003ca class=\"headerlink\" href=\"#overloading-stored-procedure-names\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eFor information about overloading and naming conventions, see \u003ca class=\"reference internal\" href=\"../udf-stored-procedure-naming-conventions\"\u003e\u003cspan class=\"doc\"\u003eNaming and overloading procedures and UDFs\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"binding-variables\"\u003e\n\u003cspan id=\"label-stored-procedures-binding-variables\"\u003e\u003c/span\u003e\u003ch3\u003eBinding Variables\u003ca class=\"headerlink\" href=\"#binding-variables\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca class=\"reference internal\" href=\"../../sql-reference/bind-variables\"\u003e\u003cspan class=\"doc\"\u003eBinding\u003c/span\u003e\u003c/a\u003e a variable to a SQL statement allows you to use the value of\nthe variable in the statement.\u003c/p\u003e\n\u003cp\u003eYou can bind NULL values as well as non-NULL values.\u003c/p\u003e\n\u003cp\u003eThe data type of the variable should be appropriate for the use of the value in the SQL statement. Currently, only\nJavaScript variables of type number, string, and \u003ca class=\"reference internal\" href=\"stored-procedures-api.html#label-sfdate\"\u003e\u003cspan class=\"std std-ref\"\u003eSfDate\u003c/span\u003e\u003c/a\u003e can be bound. (For details about the\nmapping between SQL data types and JavaScript data types, see \u003ca class=\"reference internal\" href=\"#label-stored-procedure-data-type-mapping\"\u003e\u003cspan class=\"std std-ref\"\u003eSQL and JavaScript Data Type Mapping\u003c/span\u003e\u003c/a\u003e.)\u003c/p\u003e\n\u003cp\u003eHere is a short example of binding:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003estmt\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"INSERT INTO table2 (col1, col2) VALUES (?, ?);\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"nx\"\u003ebinds\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"LiteralValue1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003evariable2\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"10\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eHere is a more complete example. This example binds TIMESTAMP information. Because direct binding of SQL TIMESTAMP\ndata is not supported, this example passes the timestamp as a VARCHAR, then binds that to the statement. Note that\nthe SQL statement itself converts the VARCHAR to a TIMESTAMP by calling the TO_TIMESTAMP() function:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cp\u003eThis simple function returns TRUE if the specified timestamp is prior to now, and FALSE otherwise.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eOR\u003c/span\u003e \u003cspan class=\"ni\"\u003eREPLACE\u003c/span\u003e \u003cspan class=\"ni\"\u003ePROCEDURE\u003c/span\u003e \u003cspan class=\"gi\"\u003eright_bind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eTIMESTAMP_VALUE\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eRETURNS\u003c/span\u003e \u003cspan class=\"ni\"\u003eBOOLEAN\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eLANGUAGE\u003c/span\u003e \u003cspan class=\"ni\"\u003eJAVASCRIPT\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ecmd\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"SELECT CURRENT_DATE() \u0026gt; TO_TIMESTAMP(:1, 'YYYY-MM-DD HH24:MI:SS')\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"na\"\u003e: cmd\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"gi\"\u003ebinds\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"gi\"\u003eTIMESTAMP_VALUE\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003eresult1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"gi\"\u003eresult1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"gi\"\u003eresult1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"11\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003eright_bind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'2019-09-16 01:02:03'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| RIGHT_BIND |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| True       |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"12\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThis shows how to bind a VARCHAR, a TIMESTAMP_LTZ, and other data types to an \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eINSERT\u003c/span\u003e\u003c/code\u003e statement. The\nTIMESTAMP_LTZ binds an \u003ca class=\"reference internal\" href=\"stored-procedures-api.html#label-sfdate\"\u003e\u003cspan class=\"std std-ref\"\u003eSfDate\u003c/span\u003e\u003c/a\u003e variable that is created inside the stored procedure.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cp\u003eCreate a table.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"gi\"\u003etable1\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003ev\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003ets1\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIMESTAMP_LTZ\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \n                     \u003cspan class=\"gi\"\u003eint1\u003c/span\u003e \u003cspan class=\"ni\"\u003eINTEGER\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003efloat1\u003c/span\u003e \u003cspan class=\"ni\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003enumeric1\u003c/span\u003e \u003cspan class=\"ni\"\u003eNUMERIC\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nf\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003ets_ntz1\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIMESTAMP_NTZ\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003edate1\u003c/span\u003e \u003cspan class=\"ni\"\u003eDATE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                     \u003cspan class=\"gi\"\u003etime1\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIME\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"13\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eCreate a stored procedure. This procedure accepts a \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eVARCHAR\u003c/span\u003e\u003c/code\u003e, and converts the VARCHAR to a \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eTIMESTAMP_LTZ\u003c/span\u003e\u003c/code\u003e\nby using SQL. The procedure then retrieves the converted value from a ResultSet. The value is stored in a JavaScript\nvariable of type \u003ca class=\"reference internal\" href=\"stored-procedures-api.html#label-sfdate\"\u003e\u003cspan class=\"std std-ref\"\u003eSfDate\u003c/span\u003e\u003c/a\u003e. The stored procedure then binds both the original \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eVARCHAR\u003c/span\u003e\u003c/code\u003e and the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eTIMESTAMP_LTZ\u003c/span\u003e\u003c/code\u003e to an \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eINSERT\u003c/span\u003e\u003c/code\u003e statement. This also demonstrates binding of JavaScript numeric data.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eOR\u003c/span\u003e \u003cspan class=\"ni\"\u003eREPLACE\u003c/span\u003e \u003cspan class=\"ni\"\u003ePROCEDURE\u003c/span\u003e \u003cspan class=\"gi\"\u003estring_to_timestamp_ltz\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eTSV\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\u003cspan class=\"ni\"\u003eRETURNS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIMESTAMP_LTZ\u003c/span\u003e \n\u003cspan class=\"ni\"\u003eLANGUAGE\u003c/span\u003e \u003cspan class=\"ni\"\u003eJAVASCRIPT\u003c/span\u003e \n\u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \n\u003cspan class=\"p\"\u003e$$ \u003c/span\u003e\n    \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eConvert\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003einput\u003c/span\u003e \u003cspan class=\"ni\"\u003evarchar\u003c/span\u003e \u003cspan class=\"ni\"\u003eto\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIMESTAMP_LTZ\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003esql_command\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"SELECT '\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eTSV\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"'::TIMESTAMP_LTZ;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"na\"\u003e: sql_command\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"nn\"\u003eresultSet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \n    \u003cspan class=\"nn\"\u003eresultSet\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \n    \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eRetrieve\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003eTIMESTAMP_LTZ\u003c/span\u003e \u003cspan class=\"ni\"\u003eand\u003c/span\u003e \u003cspan class=\"gi\"\u003estore\u003c/span\u003e \u003cspan class=\"gi\"\u003eit\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ean\u003c/span\u003e \u003cspan class=\"gi\"\u003eSfDate\u003c/span\u003e \u003cspan class=\"gi\"\u003evariable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003emy_sfDate\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nn\"\u003eresultSet\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \n\n    \u003cspan class=\"nf\"\u003ef\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e1415926\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eSpecify\u003c/span\u003e \u003cspan class=\"gi\"\u003ethat\u003c/span\u003e \u003cspan class=\"gi\"\u003ewe\u003c/span\u003e\u003cspan class=\"nc\"\u003e'd like position-based binding.\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e    sql_command = `INSERT INTO table1 VALUES(:1, :2, :3, :4, :5, :6, :7, :8);` \u003c/span\u003e\n\u003cspan class=\"nc\"\u003e    // Bind a VARCHAR, a TIMESTAMP_LTZ, a numeric to our INSERT statement.\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e    result = snowflake.execute(\u003c/span\u003e\n\u003cspan class=\"nc\"\u003e        { \u003c/span\u003e\n\u003cspan class=\"nc\"\u003e        sqlText: sql_command, \u003c/span\u003e\n\u003cspan class=\"nc\"\u003e        binds: [TSV, my_sfDate, f, f, f, my_sfDate, my_sfDate, '\u003c/span\u003e\u003cspan class=\"gi\"\u003e12\u003c/span\u003e\u003cspan class=\"na\"\u003e:30:00\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e123\u003c/span\u003e\u003cspan class=\"p\"\u003e'\u003c/span\u003e \u003cspan class=\"p\"\u003e]\u003c/span\u003e \n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e \n\n    \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"gi\"\u003emy_sfDate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \n\u003cspan class=\"p\"\u003e$$\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e \n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"14\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eCall the procedure.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003estring_to_timestamp_ltz\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'2008-11-18 16:00:00'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| STRING_TO_TIMESTAMP_LTZ       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2008-11-18 16:00:00.000 -0800 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"15\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eVerify that the row was inserted.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003etable1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| V                   | TS1                           | INT1 |   FLOAT1 |    NUMERIC1 | TS_NTZ1                 | DATE1      | TIME1    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2008-11-18 16:00:00 | 2008-11-18 16:00:00.000 -0800 |    3 | 3.141593 | 3.141593000 | 2008-11-18 16:00:00.000 | 2008-11-18 | 12:30:00 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------+-------------------------------+------+----------+-------------+-------------------------+------------+----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"16\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eFor additional examples of binding data in JavaScript, see \u003ca class=\"reference internal\" href=\"../node-js/nodejs-driver-execute.html#label-nodejs-binding\"\u003e\u003cspan class=\"std std-ref\"\u003eBinding statement parameters\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"code-requirements\"\u003e\n\u003ch3\u003eCode Requirements\u003ca class=\"headerlink\" href=\"#code-requirements\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe JavaScript code must define a single literal JavaScript object for the stored procedure to be valid.\u003c/p\u003e\n\u003cp\u003eIf the JavaScript code does not meet this requirement, the stored procedure will be created; however, it will fail when called.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"code-size\"\u003e\n\u003ch3\u003eCode Size\u003ca class=\"headerlink\" href=\"#code-size\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSnowflake limits the maximum size of the JavaScript source code in the body of a JavaScript stored procedure. Snowflake recommends\nlimiting the size to 100 KB. (The code is stored in a compressed form, and the exact limit depends on the compressibility of the\ncode.)\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"runtime-errors\"\u003e\n\u003ch3\u003eRuntime Errors\u003ca class=\"headerlink\" href=\"#runtime-errors\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eMost errors in stored procedures show up at runtime because the JavaScript\ncode is interpreted at the time that the stored procedure runs rather than when\nthe stored procedure is created.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"support-for-dynamic-sql\"\u003e\n\u003ch3\u003eSupport for Dynamic SQL\u003ca class=\"headerlink\" href=\"#support-for-dynamic-sql\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eStored procedures can be used to dynamically construct SQL statements. For example,\nyou could build a SQL command string that contains a mix of pre-configured\nSQL and user inputs (e.g. a user’s account number).\u003c/p\u003e\n\u003cp\u003eFor examples, see \u003ca class=\"reference internal\" href=\"#label-example-of-dynamic-sql-in-stored-procedure\"\u003e\u003cspan class=\"std std-ref\"\u003eDynamically Creating a SQL Statement\u003c/span\u003e\u003c/a\u003e and the \u003ca class=\"reference internal\" href=\"#label-stored-procedure-examples\"\u003e\u003cspan class=\"std std-ref\"\u003eExamples\u003c/span\u003e\u003c/a\u003e section.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"synchronous-api\"\u003e\n\u003ch3\u003eSynchronous API\u003ca class=\"headerlink\" href=\"#synchronous-api\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe API for Snowflake stored procedures is synchronous. Within a stored\nprocedure, you can run only one thread at a time.\u003c/p\u003e\n\u003cp\u003eNote that this is different from the rule for the JavaScript executing with the Node.js\nconnector, which allows you to run asynchronous threads.\u003c/p\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"examples\"\u003e\n\u003cspan id=\"label-stored-procedure-examples\"\u003e\u003c/span\u003e\u003ch2\u003eExamples\u003ca class=\"headerlink\" href=\"#examples\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"basic-examples\"\u003e\n\u003cspan id=\"label-basic-stored-procedure-examples\"\u003e\u003c/span\u003e\u003ch3\u003eBasic Examples\u003ca class=\"headerlink\" href=\"#basic-examples\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe following example shows the basic syntax of creating and calling a stored procedure. It doesn’t execute any SQL\nor procedural code. However, it provides a starting point for more realistic examples later:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_pi\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e \u003cspan class=\"ni\"\u003enot\u003c/span\u003e \u003cspan class=\"ni\"\u003enull\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e1415926\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e    $$\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"17\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eNote that the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$$\u003c/span\u003e\u003c/code\u003e delimiter marks the beginning and end of the JavaScript code.\u003c/p\u003e\n\u003cp\u003eNow call the procedure you just created:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_pi\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     SP_PI |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3.1415926 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"18\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe following example illustrates how to execute a SQL statement inside a stored procedure:\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate a table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table1\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003enum_col1\u003c/span\u003e \u003cspan class=\"ni\"\u003enumeric\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003e14\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nf\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"19\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCreate a stored procedure. This inserts a row into\nan existing table named \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003estproc_test_table1\u003c/span\u003e\u003c/code\u003e and returns the value “Succeeded.”.\nThe returned value is not particularly useful from a SQL perspective, but it\nallows you to return status information (e.g. “Succeeded.” or “Failed.”) to the user.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eFLOAT_PARAM1\u003c/span\u003e \u003cspan class=\"ni\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003estring\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003estrict\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"ni\"\u003eowner\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003esql_command\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \n     \u003cspan class=\"vi\"\u003e\"INSERT INTO stproc_test_table1 (num_col1) VALUES (\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eFLOAT_PARAM1\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"vi\"\u003e\")\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003etry\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"na\"\u003e: sql_command\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Succeeded.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eReturn\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"gi\"\u003esuccess\u003c/span\u003e\u003cspan class=\"p\"\u003e/\u003c/span\u003e\u003cspan class=\"gi\"\u003eerror\u003c/span\u003e \u003cspan class=\"gi\"\u003eindicator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Failed: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eReturn\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"gi\"\u003esuccess\u003c/span\u003e\u003cspan class=\"p\"\u003e/\u003c/span\u003e\u003cspan class=\"gi\"\u003eerror\u003c/span\u003e \u003cspan class=\"gi\"\u003eindicator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e    $$\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"20\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e14\u003c/span\u003e\u003cspan class=\"kn\"\u003e::FLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| STPROC1    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Succeeded. |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"21\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eConfirm that the stored procedure inserted the row:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eselect\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|  NUM_COL1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 5.1400000 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"22\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe following example retrieves a result:\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate a procedure to count the number of rows in a table (equivalent to \u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eselect\u003c/span\u003e \u003cspan class=\"pre\"\u003ecount(*)\u003c/span\u003e \u003cspan class=\"pre\"\u003efrom\u003c/span\u003e \u003cem\u003e\u003cspan class=\"pre\"\u003etable\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003eget_row_count\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003etable_name\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e \u003cspan class=\"ni\"\u003enot\u003c/span\u003e \u003cspan class=\"ni\"\u003enull\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_count\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eDynamically\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompose\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003eSQL\u003c/span\u003e \u003cspan class=\"ni\"\u003estatement\u003c/span\u003e \u003cspan class=\"ni\"\u003eto\u003c/span\u003e \u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003esql_command\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"select count(*) from \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE_NAME\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eRun\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003estatement\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"na\"\u003e: sql_command\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eGet\u003c/span\u003e \u003cspan class=\"gi\"\u003eback\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003erow\u003c/span\u003e \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e \u003cspan class=\"gi\"\u003eSpecifically\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"ni\"\u003eget\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003efirst\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eand\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ethis\u003c/span\u003e \u003cspan class=\"ni\"\u003ecase\u003c/span\u003e \u003cspan class=\"ni\"\u003eonly\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003erow\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003eresult\u003c/span\u003e \u003cspan class=\"ni\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"ni\"\u003eand\u003c/span\u003e \u003cspan class=\"ni\"\u003ethen\u003c/span\u003e \u003cspan class=\"ni\"\u003eget\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"gi\"\u003ereturned\u003c/span\u003e \u003cspan class=\"ni\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ewhich\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ethis\u003c/span\u003e \u003cspan class=\"ni\"\u003ecase\u003c/span\u003e \u003cspan class=\"ni\"\u003eis\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003enumber\u003c/span\u003e \u003cspan class=\"ni\"\u003eof\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003erows\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003erow_count\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_count\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"23\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAsk the stored procedure how many rows are in the table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003eget_row_count\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'stproc_test_table1'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| GET_ROW_COUNT |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|             3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"24\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCheck independently that you got the right number:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eselect\u003c/span\u003e \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COUNT(*) |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|        3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"25\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n\u003csection id=\"recursive-stored-procedure-example\"\u003e\n\u003ch3\u003eRecursive Stored Procedure Example\u003ca class=\"headerlink\" href=\"#recursive-stored-procedure-example\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe following example shows a basic, but not particularly realistic, recursive stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table2\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecol1\u003c/span\u003e \u003cspan class=\"ni\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"26\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecreate or replace procedure recursive_stproc(counter FLOAT)\n    returns varchar not null\n    language javascript\n    as\n    -- \"$$\" is the delimiter that shows the beginning and end of the stored proc.\n    $$\n    var counter1 = COUNTER;\n    var returned_value = \"\";\n    var accumulator = \"\";\n    var stmt = snowflake.createStatement(\n        {\n        sqlText: \"INSERT INTO stproc_test_table2 (col1) VALUES (?);\",\n        binds:[counter1]\n        }\n        );\n    var res = stmt.execute();\n    if (COUNTER \u0026gt; 0)\n        {\n        stmt = snowflake.createStatement(\n            {\n            sqlText: \"call recursive_stproc (?);\",\n            binds:[counter1 - 1]\n            }\n            );\n        res = stmt.execute();\n        res.next();\n        returned_value = res.getColumnValue(1);\n        }\n    accumulator = accumulator + counter1 + \":\" + returned_value;\n    return accumulator;\n    $$\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"27\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003erecursive_stproc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"kn\"\u003e::FLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| RECURSIVE_STPROC |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 4:3:2:1:0:       |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"28\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table2\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COL1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|    0 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|    1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|    2 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|    3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|    4 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"29\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"dynamically-creating-a-sql-statement\"\u003e\n\u003cspan id=\"label-example-of-dynamic-sql-in-stored-procedure\"\u003e\u003c/span\u003e\u003ch3\u003eDynamically Creating a SQL Statement\u003ca class=\"headerlink\" href=\"#dynamically-creating-a-sql-statement\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe following example shows how to dynamically create a SQL statement:\u003c/p\u003e\n\u003cdiv class=\"admonition note\"\u003e\n\u003cp class=\"admonition-title\"\u003eNote\u003c/p\u003e\n\u003cp\u003eAs stated in \u003ca class=\"reference internal\" href=\"stored-procedures-usage.html#label-sql-injection\"\u003e\u003cspan class=\"std std-ref\"\u003eSQL Injection\u003c/span\u003e\u003c/a\u003e (in this topic), be careful to guard against attacks when using dynamic SQL.\u003c/p\u003e\n\u003c/div\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate the stored procedure. This procedure allows you to pass the name of a table and get the number of rows in\nthat table (equivalent to \u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eselect\u003c/span\u003e \u003cspan class=\"pre\"\u003ecount(*)\u003c/span\u003e \u003cspan class=\"pre\"\u003efrom\u003c/span\u003e \u003cem\u003e\u003cspan class=\"pre\"\u003etable_name\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecreate or replace procedure get_row_count(table_name VARCHAR)\n    returns float \n    not null\n    language javascript\n    as\n    $$\n    var row_count = 0;\n    // Dynamically compose the SQL statement to execute.\n    // Note that we uppercased the input parameter name.\n    var sql_command = \"select count(*) from \" + TABLE_NAME;\n    // Run the statement.\n    var stmt = snowflake.createStatement(\n           {\n           sqlText: sql_command\n           }\n        );\n    var res = stmt.execute();\n    // Get back the row count. Specifically, ...\n    // ... first, get the first (and in this case only) row from the\n    //  result set ...\n    res.next();\n    // ... then extract the returned value (which in this case is the\n    // number of rows in the table).\n    row_count = res.getColumnValue(1);\n    return row_count;\n    $$\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"30\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003eget_row_count\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'stproc_test_table1'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| GET_ROW_COUNT |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|             3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"31\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eShow the results from \u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eselect\u003c/span\u003e \u003cspan class=\"pre\"\u003ecount(*)\u003c/span\u003e\u003c/code\u003e for the same table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_test_table1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COUNT(*) |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|        3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"32\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n\u003csection id=\"retrieving-result-set-metadata\"\u003e\n\u003ch3\u003eRetrieving Result Set Metadata\u003ca class=\"headerlink\" href=\"#retrieving-result-set-metadata\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis example demonstrates retrieving a small amount of metadata from a result set:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecreate or replace table stproc_test_table3 (\n    n10 numeric(10,0),     /* precision = 10, scale = 0 */\n    n12 numeric(12,4),     /* precision = 12, scale = 4 */\n    v1 varchar(19)         /* scale = 0 */\n    );\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"33\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecreate or replace procedure get_column_scale(column_index float)\n    returns float not null\n    language javascript\n    as\n    $$\n    var stmt = snowflake.createStatement(\n        {sqlText: \"select n10, n12, v1 from stproc_test_table3;\"}\n        );\n    stmt.execute();  // ignore the result set; we just want the scale.\n    return stmt.getColumnScale(COLUMN_INDEX); // Get by column index (1-based)\n    $$\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"34\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecall get_column_scale(1);\n+------------------+\n| GET_COLUMN_SCALE |\n|------------------|\n|                0 |\n+------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"35\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecall get_column_scale(2);\n+------------------+\n| GET_COLUMN_SCALE |\n|------------------|\n|                4 |\n+------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"36\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecall get_column_scale(3);\n+------------------+\n| GET_COLUMN_SCALE |\n|------------------|\n|                0 |\n+------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"37\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"catching-an-error-using-try-catch\"\u003e\n\u003cspan id=\"label-stored-procedure-error-handling\"\u003e\u003c/span\u003e\u003ch3\u003eCatching an Error using Try/Catch\u003ca class=\"headerlink\" href=\"#catching-an-error-using-try-catch\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis example demonstrates using a JavaScript try/catch block to catch an error inside a stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate the stored procedure:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e    create procedure broken()\n      returns varchar not null\n      language javascript\n      as\n      $$\n      var result = \"\";\n      try {\n          snowflake.execute( {sqlText: \"Invalid Command!;\"} );\n          result = \"Succeeded\";\n          }\n      catch (err)  {\n          result =  \"Failed: Code: \" + err.code + \"\\n  State: \" + err.state;\n          result += \"\\n  Message: \" + err.message;\n          result += \"\\nStack Trace:\\n\" + err.stackTraceTxt; \n          }\n      return result;\n      $$\n      ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"38\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure. This should return an error showing the error\nnumber and other information:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e    \u003cspan class=\"py\"\u003e-- This is expected to fail.\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003ebroken\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| BROKEN                                                  |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Failed: Code: 1003                                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   State: 42000                                          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   Message: SQL compilation error:                       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| syntax error line 1 at position 0 unexpected 'Invalid'. |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Stack Trace:                                            |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Snowflake.execute, line 4 position 20                   |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"39\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe following example demonstrates throwing a custom exception:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate the stored procedure:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eOR\u003c/span\u003e \u003cspan class=\"ni\"\u003eREPLACE\u003c/span\u003e \u003cspan class=\"ni\"\u003ePROCEDURE\u003c/span\u003e \u003cspan class=\"gi\"\u003evalidate_age\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eage\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eRETURNS\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eLANGUAGE\u003c/span\u003e \u003cspan class=\"ni\"\u003eJAVASCRIPT\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eEXECUTE\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eCALLER\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003etry\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eAGE\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003ethrow\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Age cannot be negative!\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"ni\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Age validated.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"gi\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Error: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e$$;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"40\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure with valid and invalid values:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003evalidate_age\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| VALIDATE_AGE   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|----------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Age validated. |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e----------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003evalidate_age\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| VALIDATE_AGE                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|--------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Error: Age cannot be negative! |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"41\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"using-transactions-in-stored-procedures\"\u003e\n\u003cspan id=\"label-example-using-transaction-in-stored-procedures\"\u003e\u003c/span\u003e\u003ch3\u003eUsing Transactions in Stored Procedures\u003ca class=\"headerlink\" href=\"#using-transactions-in-stored-procedures\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe following example wraps multiple related statements in a transaction, and uses try/catch to commit or roll back.\nThe parameter \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eforce_failure\u003c/span\u003e\u003c/code\u003e allows the caller to choose between successful execution and deliberate error.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-javascript notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"py\"\u003e-- Create the procedure\u003c/span\u003e\n\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eor\u003c/span\u003e \u003cspan class=\"ni\"\u003ereplace\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003ecleanup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eforce_failure\u003c/span\u003e \u003cspan class=\"ni\"\u003evarchar\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003evarchar\u003c/span\u003e \u003cspan class=\"ni\"\u003enot\u003c/span\u003e \u003cspan class=\"ni\"\u003enull\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"BEGIN WORK;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"DELETE FROM child;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"DELETE FROM parent;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eFORCE_FAILURE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e===\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"fail\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"c1\"\u003e// To see what happens if there is a failure/rollback,\u003c/span\u003e\n\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"DELETE FROM no_such_table;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e          \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"COMMIT WORK;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Succeeded\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"k\"\u003ecatch\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"nx\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003esqlText\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"ROLLBACK WORK;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Failed: \"\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"c1\"\u003e// Return a success/error indicator.\u003c/span\u003e\n\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003ecleanup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'fail'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003ecleanup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'do not fail'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"42\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"logging-an-error\"\u003e\n\u003ch3\u003eLogging an Error\u003ca class=\"headerlink\" href=\"#logging-an-error\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYou can capture log and trace data from JavaScript handler code by using the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esnowflake\u003c/span\u003e\u003c/code\u003e object in the JavaScript API. When you do,\nlog messages and trace data are stored in an event table that you can analyze with queries.\u003c/p\u003e\n\u003cp\u003eFor more information, refer to the following:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ca class=\"reference internal\" href=\"../logging-tracing/logging-javascript\"\u003e\u003cspan class=\"doc\"\u003eLogging Messages in JavaScript\u003c/span\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca class=\"reference internal\" href=\"../logging-tracing/tracing-javascript\"\u003e\u003cspan class=\"doc\"\u003eEmitting Trace Events in JavaScript\u003c/span\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003csection id=\"using-result-scan-to-retrieve-the-result-from-a-stored-procedure\"\u003e\n\u003ch3\u003eUsing RESULT_SCAN to Retrieve the Result from a Stored Procedure\u003ca class=\"headerlink\" href=\"#using-result-scan-to-retrieve-the-result-from-a-stored-procedure\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis example shows how to use the \u003ca class=\"reference internal\" href=\"../../sql-reference/functions/result_scan\"\u003e\u003cspan class=\"doc\"\u003eRESULT_SCAN\u003c/span\u003e\u003c/a\u003e function to retrieve the result from a \u003ca class=\"reference internal\" href=\"../../sql-reference/sql/call\"\u003e\u003cspan class=\"doc\"\u003eCALL\u003c/span\u003e\u003c/a\u003e\nstatement:\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate and load the table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE TABLE western_provinces(ID INT, province VARCHAR);\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"43\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eINSERT INTO western_provinces(ID, province) VALUES\n    (1, 'Alberta'),\n    (2, 'British Columbia'),\n    (3, 'Manitoba')\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"44\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCreate the stored procedure. This procedure returns a well-formatted string that looks like a result set of\nthree rows, but is actually a single string:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE OR REPLACE PROCEDURE read_western_provinces()\n  RETURNS VARCHAR NOT NULL\n  LANGUAGE JAVASCRIPT\n  AS\n  $$\n  var return_value = \"\";\n  try {\n      var command = \"SELECT * FROM western_provinces ORDER BY province;\"\n      var stmt = snowflake.createStatement( {sqlText: command } );\n      var rs = stmt.execute();\n      if (rs.next())  {\n          return_value += rs.getColumnValue(1);\n          return_value += \", \" + rs.getColumnValue(2);\n          }\n      while (rs.next())  {\n          return_value += \"\\n\";\n          return_value += rs.getColumnValue(1);\n          return_value += \", \" + rs.getColumnValue(2);\n          }\n      }\n  catch (err)  {\n      result =  \"Failed: Code: \" + err.code + \"\\n  State: \" + err.state;\n      result += \"\\n  Message: \" + err.message;\n      result += \"\\nStack Trace:\\n\" + err.stackTraceTxt;\n      }\n  return return_value;\n  $$\n  ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"45\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure, then retrieve the results by using RESULT_SCAN:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCALL read_western_provinces();\n+------------------------+\n| READ_WESTERN_PROVINCES |\n|------------------------|\n| 1, Alberta             |\n| 2, British Columbia    |\n| 3, Manitoba            |\n+------------------------+\nSELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()));\n+------------------------+\n| READ_WESTERN_PROVINCES |\n|------------------------|\n| 1, Alberta             |\n| 2, British Columbia    |\n| 3, Manitoba            |\n+------------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"46\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can perform more complex operations on the value returned by the RESULT_SCAN function. In this case, because the\nreturned value is a single string, you might want to extract the individual “rows” that appear to be contained\nwithin that string, and store those rows in another table.\u003c/p\u003e\n\u003cp\u003eThe following example, which is a continuation of the previous example, illustrates one way to do this:\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate a table for long-term storage. This table contains the province name and the province ID after you’ve\nextracted them from the string returned by the CALL command:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE TABLE all_provinces(ID INT, province VARCHAR);\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"47\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure, then retrieve the result by using RESULT_SCAN, and then extract the three rows\nfrom the string and put those rows into the table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eINSERT INTO all_provinces\n  WITH \n    one_string (string_col) AS\n      (SELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()))),\n    three_strings (one_row) AS\n      (SELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\\n'))\n  SELECT\n         STRTOK(one_row, ',', 1) AS ID,\n         STRTOK(one_row, ',', 2) AS province\n    FROM three_strings\n    WHERE NOT (ID IS NULL AND province IS NULL);\n+-------------------------+\n| number of rows inserted |\n|-------------------------|\n|                       3 |\n+-------------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"48\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eVerify that this worked by showing the rows in the table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eSELECT ID, province \n    FROM all_provinces;\n+----+-------------------+\n| ID | PROVINCE          |\n|----+-------------------|\n|  1 |  Alberta          |\n|  2 |  British Columbia |\n|  3 |  Manitoba         |\n+----+-------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"49\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eHere’s approximately the same code, but in smaller steps:\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate a table named \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eone_string\u003c/span\u003e\u003c/code\u003e. This table temporarily stores the result of the CALL command.\nThe result of the CALL is a single string, so this table stores only a single VARCHAR value.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE TRANSIENT TABLE one_string(string_col VARCHAR);\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"50\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the stored procedure, then retrieve the result (a string) by using RESULT_SCAN, and then store that into\nthe intermediate table named \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eone_string\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCALL read_western_provinces();\n+------------------------+\n| READ_WESTERN_PROVINCES |\n|------------------------|\n| 1, Alberta             |\n| 2, British Columbia    |\n| 3, Manitoba            |\n+------------------------+\nINSERT INTO one_string\n    SELECT * FROM TABLE(RESULT_SCAN(LAST_QUERY_ID()));\n+-------------------------+\n| number of rows inserted |\n|-------------------------|\n|                       1 |\n+-------------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"51\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThis shows the new row in the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eone_string\u003c/span\u003e\u003c/code\u003e table. Remember that although this is formatted to look like three rows,\nit is actually a single string:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eSELECT string_col FROM one_string;\n+---------------------+\n| STRING_COL          |\n|---------------------|\n| 1, Alberta          |\n| 2, British Columbia |\n| 3, Manitoba         |\n+---------------------+\n-- Show that it's one string, not three rows:\nSELECT '\u0026gt;\u0026gt;\u0026gt;' || string_col || '\u0026lt;\u0026lt;\u0026lt;' AS string_col \n    FROM one_string;\n+---------------------+\n| STRING_COL          |\n|---------------------|\n| \u0026gt;\u0026gt;\u0026gt;1, Alberta       |\n| 2, British Columbia |\n| 3, Manitoba\u0026lt;\u0026lt;\u0026lt;      |\n+---------------------+\nSELECT COUNT(*) FROM one_string;\n+----------+\n| COUNT(*) |\n|----------|\n|        1 |\n+----------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"52\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe following commands show how to extract multiple rows from the string:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eSELECT * FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\\n');\n+---------------------+-----+-------+---------------------+\n| STRING_COL          | SEQ | INDEX | VALUE               |\n|---------------------+-----+-------+---------------------|\n| 1, Alberta          |   1 |     1 | 1, Alberta          |\n| 2, British Columbia |     |       |                     |\n| 3, Manitoba         |     |       |                     |\n| 1, Alberta          |   1 |     2 | 2, British Columbia |\n| 2, British Columbia |     |       |                     |\n| 3, Manitoba         |     |       |                     |\n| 1, Alberta          |   1 |     3 | 3, Manitoba         |\n| 2, British Columbia |     |       |                     |\n| 3, Manitoba         |     |       |                     |\n+---------------------+-----+-------+---------------------+\nSELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\\n');\n+---------------------+\n| VALUE               |\n|---------------------|\n| 1, Alberta          |\n| 2, British Columbia |\n| 3, Manitoba         |\n+---------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"53\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eNext, create a table named \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ethree_strings\u003c/span\u003e\u003c/code\u003e. This table will hold the result after you’ve split it into individual\nlines/strings:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE TRANSIENT TABLE three_strings(string_col VARCHAR);\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"54\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eNow convert that one string in the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eone_string\u003c/span\u003e\u003c/code\u003e table into three separate strings, and show that it is\nnow actually three strings:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eINSERT INTO three_strings\n  SELECT VALUE FROM one_string, LATERAL SPLIT_TO_TABLE(one_string.string_col, '\\n');\n+-------------------------+\n| number of rows inserted |\n|-------------------------|\n|                       3 |\n+-------------------------+\nSELECT string_col \n    FROM three_strings;\n+---------------------+\n| STRING_COL          |\n|---------------------|\n| 1, Alberta          |\n| 2, British Columbia |\n| 3, Manitoba         |\n+---------------------+\nSELECT COUNT(*) \n    FROM three_strings;\n+----------+\n| COUNT(*) |\n|----------|\n|        3 |\n+----------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"55\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eNow convert the three strings into three rows in our long-term table named \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eall_provinces\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eINSERT INTO all_provinces\n  SELECT \n         STRTOK(string_col, ',', 1) AS ID, \n         STRTOK(string_col, ',', 2) AS province \n    FROM three_strings\n    WHERE NOT (ID IS NULL AND province IS NULL);\n+-------------------------+\n| number of rows inserted |\n|-------------------------|\n|                       3 |\n+-------------------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"56\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eShow the three rows in the long-term table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eSELECT ID, province \n    FROM all_provinces;\n+----+-------------------+\n| ID | PROVINCE          |\n|----+-------------------|\n|  1 |  Alberta          |\n|  2 |  British Columbia |\n|  3 |  Manitoba         |\n+----+-------------------+\nSELECT COUNT(*) \n    FROM all_provinces;\n+----------+\n| COUNT(*) |\n|----------|\n|        3 |\n+----------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"57\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n\u003csection id=\"returning-an-array-of-error-messages\"\u003e\n\u003ch3\u003eReturning an Array of Error Messages\u003ca class=\"headerlink\" href=\"#returning-an-array-of-error-messages\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYour stored procedure might execute more than one SQL statement and you might want to return a status/error message\nfor each SQL statement. However, a stored procedure returns a single row; it is not designed to return multiple\nrows.\u003c/p\u003e\n\u003cp\u003eIf all of your messages fit into a single value of type ARRAY, you can get all the messages from a stored procedure\nwith some additional effort.\u003c/p\u003e\n\u003cp\u003eThe following example shows one way to do this (the error messages shown are not real, but you can extend this code to\nwork with your actual SQL statements):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eCREATE OR REPLACE PROCEDURE sp_return_array()\n      RETURNS VARIANT NOT NULL\n      LANGUAGE JAVASCRIPT\n      AS\n      $$\n      // This array will contain one error message (or an empty string) \n      // for each SQL command that we executed.\n      var array_of_rows = [];\n\n      // Artificially fake the error messages.\n      array_of_rows.push(\"ERROR: The foo was barred.\")\n      array_of_rows.push(\"WARNING: A Carrington Event is predicted.\")\n\n      return array_of_rows;\n      $$\n      ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"58\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_return_array\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SP_RETURN_ARRAY                               |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-----------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| [                                             |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"ERROR: The foo was barred.\",               |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"WARNING: A Carrington Event is predicted.\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ]                                             |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-----------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- Now get the individual error messages, in order.\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"ni\"\u003eINDEX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003eVALUE\u003c/span\u003e \n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eRESULT_SCAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eLAST_QUERY_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003eLATERAL\u003c/span\u003e \u003cspan class=\"nd\"\u003eFLATTEN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eINPUT\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"ni\"\u003eindex\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+---------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| INDEX | VALUE                                       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------+---------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     0 | \"ERROR: The foo was barred.\"                |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     1 | \"WARNING: A Carrington Event is predicted.\" |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+---------------------------------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"59\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eRemember, this is \u003cspan class=\"emph\"\u003enot\u003c/span\u003e a general purpose solution. There is a limit on the maximum size of\nARRAY data types, and your entire result set must fit into a single ARRAY.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"returning-a-result-set\"\u003e\n\u003ch3\u003eReturning a Result Set\u003ca class=\"headerlink\" href=\"#returning-a-result-set\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis section extends the previous example described in \u003ca class=\"reference internal\" href=\"#returning-an-array-of-error-messages\"\u003eReturning an Array of Error Messages\u003c/a\u003e. This example is more\ngeneral, and allows you to return a result set from a query.\u003c/p\u003e\n\u003cp\u003eA stored procedure returns a single row that contains a single column; it is not designed to return a result set.\nHowever, if your result set is small enough to fit into a single value of type VARIANT or ARRAY, you can return\na result set from a stored procedure with some additional code:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"gi\"\u003ereturn_to_me\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecol_i\u003c/span\u003e \u003cspan class=\"ni\"\u003eINT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_v\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"ni\"\u003eINTO\u003c/span\u003e \u003cspan class=\"gi\"\u003ereturn_to_me\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecol_i\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_v\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eVALUES\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'Ariel'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'October'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'Project'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"60\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e-- Create the stored procedure that retrieves a result set and returns it.\nCREATE OR REPLACE PROCEDURE sp_return_table(TABLE_NAME VARCHAR, COL_NAMES ARRAY)\n      RETURNS VARIANT NOT NULL\n      LANGUAGE JAVASCRIPT\n      AS\n      $$\n      // This variable will hold a JSON data structure that holds ONE row.\n      var row_as_json = {};\n      // This array will contain all the rows.\n      var array_of_rows = [];\n      // This variable will hold a JSON data structure that we can return as\n      // a VARIANT.\n      // This will contain ALL the rows in a single \"value\".\n      var table_as_json = {};\n\n      // Run SQL statement(s) and get a resultSet.\n      var command = \"SELECT * FROM \" + TABLE_NAME;\n      var cmd1_dict = {sqlText: command};\n      var stmt = snowflake.createStatement(cmd1_dict);\n      var rs = stmt.execute();\n\n      // Read each row and add it to the array we will return.\n      var row_num = 1;\n      while (rs.next())  {\n        // Put each row in a variable of type JSON.\n        row_as_json = {};\n        // For each column in the row...\n        for (var col_num = 0; col_num \u0026lt; COL_NAMES.length; col_num = col_num + 1) {\n          var col_name = COL_NAMES[col_num];\n          row_as_json[col_name] = rs.getColumnValue(col_num + 1);\n          }\n        // Add the row to the array of rows.\n        array_of_rows.push(row_as_json);\n        ++row_num;\n        }\n      // Put the array in a JSON variable (so it looks like a VARIANT to\n      // Snowflake).  The key is \"key1\", and the value is the array that has\n      // the rows we want.\n      table_as_json = { \"key1\" : array_of_rows };\n\n      // Return the rows to Snowflake, which expects a JSON-compatible VARIANT.\n      return table_as_json;\n      $$\n      ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"61\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_return_table\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Table name.\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003e'return_to_me'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Array of column names.\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003eARRAY_APPEND\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eTO_ARRAY\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'COL_I'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nc\"\u003e'COL_V'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SP_RETURN_TABLE          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|--------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| {                        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"key1\": [              |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 1,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 2,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 3,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": null,     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Project\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     }                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   ]                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| }                        |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- Use \"ResultScan\" to get the data from the stored procedure that\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- \"did not return a result set\".\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- Use \"$1:key1\" to get the value corresponding to the JSON key named \"key1\".\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"na\"\u003e:key1\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eRESULT_SCAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eLAST_QUERY_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e()));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| $1:KEY1                |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| [                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_I\": 1,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_V\": \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_I\": 2,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_V\": \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_I\": 3,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_V\": null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_I\": null,     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     \"COL_V\": \"Project\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   }                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ]                      |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------------+\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- Now get what we really want.\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"ni\"\u003eVALUE\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_I\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_i\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003evalue\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_V\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_v\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eRESULT_SCAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eLAST_QUERY_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003eLATERAL\u003c/span\u003e \u003cspan class=\"nd\"\u003eFLATTEN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003einput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_I\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+-----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COL_I | COL_V     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------+-----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1     | \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2     | \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3     | null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| null  | \"Project\" |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+-----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"62\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThis shows how to combine the previous two lines into a single line:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_return_table\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Table name.\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003e'return_to_me'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Array of column names.\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003eARRAY_APPEND\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eTO_ARRAY\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'COL_I'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nc\"\u003e'COL_V'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SP_RETURN_TABLE          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|--------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| {                        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"key1\": [              |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 1,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 2,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 3,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": null,     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Project\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     }                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   ]                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| }                        |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"ni\"\u003eVALUE\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_I\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_i\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ni\"\u003evalue\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_V\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_v\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"na\"\u003e:key1\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eRESULT_SCAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eLAST_QUERY_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e())))\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eLATERAL\u003c/span\u003e \u003cspan class=\"nd\"\u003eFLATTEN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003einput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_I\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+-----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COL_I | COL_V     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------+-----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1     | \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2     | \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3     | null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| null  | \"Project\" |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+-----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"63\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eFor convenience, you can wrap the preceding line in a view. This view also converts the string ‘null’ to a true NULL.\nYou only need to create the view once. However, you \u003cspan class=\"emph\"\u003emust\u003c/span\u003e call the stored procedure \u003cspan class=\"emph\"\u003eimmediately prior to\u003c/span\u003e\nselecting from this view \u003cspan class=\"emph\"\u003eevery\u003c/span\u003e time you use the view. Remember, the call to RESULT_SCAN in the view is pulling from the\nmost recent statement, which must be the CALL:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"ni\"\u003eVIEW\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_view\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecol_i\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ecol_v\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \n  \u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"nd\"\u003eNULLIF\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eVALUE\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_I\u003c/span\u003e\u003cspan class=\"kn\"\u003e::VARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'null'\u003c/span\u003e\u003cspan class=\"kn\"\u003e::VARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \n         \u003cspan class=\"nd\"\u003eNULLIF\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003evalue\u003c/span\u003e\u003cspan class=\"na\"\u003e:COL_V\u003c/span\u003e\u003cspan class=\"kn\"\u003e::VARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'null'\u003c/span\u003e\u003cspan class=\"kn\"\u003e::VARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e$\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"na\"\u003e:key1\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003etbl\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"ni\"\u003eTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eRESULT_SCAN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eLAST_QUERY_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e())))\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n         \u003cspan class=\"ni\"\u003eLATERAL\u003c/span\u003e \u003cspan class=\"nd\"\u003eFLATTEN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003einput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003etbl\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"64\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_return_table\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Table name.\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003e'return_to_me'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Array of column names.\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003eARRAY_APPEND\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eTO_ARRAY\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'COL_I'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nc\"\u003e'COL_V'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SP_RETURN_TABLE          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|--------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| {                        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"key1\": [              |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 1,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 2,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 3,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": null,     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Project\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     }                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   ]                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| }                        |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_view\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_I\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+---------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COL_I | COL_V   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------+---------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1     | Ariel   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2     | October |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3     | NULL    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| NULL  | Project |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------+---------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"65\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eYou can even use it as a true view (i.e. select a subset of it):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esp_return_table\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Table name.\u003c/span\u003e\n        \u003cspan class=\"nc\"\u003e'return_to_me'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"py\"\u003e-- Array of column names.\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003eARRAY_APPEND\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eTO_ARRAY\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'COL_I'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nc\"\u003e'COL_V'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SP_RETURN_TABLE          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|--------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| {                        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   \"key1\": [              |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 1,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Ariel\"   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 2,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"October\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": 3,        |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": null      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     },                   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     {                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_I\": null,     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|       \"COL_V\": \"Project\" |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|     }                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|   ]                      |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| }                        |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e--------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_V\u003c/span\u003e \n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estproc_view\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_V\u003c/span\u003e \u003cspan class=\"ni\"\u003eIS\u003c/span\u003e \u003cspan class=\"ni\"\u003eNOT\u003c/span\u003e \u003cspan class=\"ni\"\u003eNULL\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eCOL_V\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COL_V   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Ariel   |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| October |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Project |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"66\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eRemember, this is \u003cspan class=\"emph\"\u003enot\u003c/span\u003e a general purpose solution. There is a limit on the maximum size of VARIANT and\nARRAY data types, and your entire result set must fit into a single VARIANT or ARRAY.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"protecting-privacy\"\u003e\n\u003ch3\u003eProtecting Privacy\u003ca class=\"headerlink\" href=\"#protecting-privacy\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis example shows a stored procedure that is useful for an on-line retailer.\nThis stored procedure respects customers’ privacy, while protecting\nlegitimate interests of both the retailer and the customer.\nIf a customer asks the retailer to delete the customer’s data for privacy reasons,\nthen this stored procedure deletes most of the customer’s data, but leaves the customer’s\npurchase history if either of the following is true:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eAny purchased item has a warranty that has not yet expired.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe customer still owes money (or the customer is owed a refund).\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA more real-world version of this would delete individual rows for which payment has been\nmade and the warranty has expired.\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eStart by creating the tables and loading them:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecustomer_ID\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ereview\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecustomer_ID\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"ni\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003epaid\u003c/span\u003e \u003cspan class=\"ni\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                               \u003cspan class=\"gi\"\u003eproduct_ID\u003c/span\u003e \u003cspan class=\"ni\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_date\u003c/span\u003e \u003cspan class=\"ni\"\u003eDATE\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"67\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003einsert\u003c/span\u003e \u003cspan class=\"ni\"\u003einto\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecustomer_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003epaid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eproduct_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e \n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e99\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e99\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'chocolate'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2018-06-17'\u003c/span\u003e\u003cspan class=\"kn\"\u003e::DATE\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e99\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e  \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'chocolate'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2017-02-14'\u003c/span\u003e\u003cspan class=\"kn\"\u003e::DATE\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e99\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e  \u003cspan class=\"gi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e99\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'chocolate'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2017-03-19'\u003c/span\u003e\u003cspan class=\"kn\"\u003e::DATE\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"ni\"\u003einsert\u003c/span\u003e \u003cspan class=\"ni\"\u003einto\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecustomer_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ereview\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'Loved the milk chocolate!'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"ni\"\u003einsert\u003c/span\u003e \u003cspan class=\"ni\"\u003einto\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecustomer_ID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003ereview\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'Loved the dark chocolate!'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"68\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCreate the stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ecreate or replace procedure delete_nonessential_customer_data(customer_ID varchar)\n    returns varchar not null\n    language javascript\n    as\n    $$\n\n    // If the customer posted reviews of products, delete those reviews.\n    var sql_cmd = \"DELETE FROM reviews WHERE customer_ID = \" + CUSTOMER_ID;\n    snowflake.execute( {sqlText: sql_cmd} );\n\n    // Delete any other records not needed for warranty or payment info.\n    // ...\n\n    var result = \"Deleted non-financial, non-warranty data for customer \" + CUSTOMER_ID;\n\n    // Find out if the customer has any net unpaid balance (or surplus/prepayment).\n    sql_cmd = \"SELECT SUM(price) - SUM(paid) FROM purchase_history WHERE customer_ID = \" + CUSTOMER_ID;\n    var stmt = snowflake.createStatement( {sqlText: sql_cmd} );\n    var rs = stmt.execute();\n    // There should be only one row, so should not need to iterate.\n    rs.next();\n    var net_amount_owed = rs.getColumnValue(1);\n\n    // Look up the number of purchases still under warranty...\n    var number_purchases_under_warranty = 0;\n    // Assuming a 1-year warranty...\n    sql_cmd = \"SELECT COUNT(*) FROM purchase_history \";\n    sql_cmd += \"WHERE customer_ID = \" + CUSTOMER_ID;\n    // Can't use CURRENT_DATE() because that changes. So assume that today is \n    // always June 15, 2019.\n    sql_cmd += \"AND PURCHASE_DATE \u0026gt; dateadd(year, -1, '2019-06-15'::DATE)\";\n    var stmt = snowflake.createStatement( {sqlText: sql_cmd} );\n    var rs = stmt.execute();\n    // There should be only one row, so should not need to iterate.\n    rs.next();\n    number_purchases_under_warranty = rs.getColumnValue(1);\n\n    // Check whether need to keep some purchase history data; if not, then delete the data.\n    if (net_amount_owed == 0.0 \u0026amp;\u0026amp; number_purchases_under_warranty == 0)  {\n        // Delete the purchase history of this customer ...\n        sql_cmd = \"DELETE FROM purchase_history WHERE customer_ID = \" + CUSTOMER_ID;\n        snowflake.execute( {sqlText: sql_cmd} );\n        // ... and delete anything else that that should be deleted.\n        // ...\n        result = \"Deleted all data, including financial and warranty data, for customer \" + CUSTOMER_ID;\n        }\n    return result;\n    $$\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"69\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eShow the data in the tables before deleting any of that data:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+---------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | REVIEW                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+---------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1           | Loved the milk chocolate! |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | Loved the dark chocolate! |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+---------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+-------+-------+------------+---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"70\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCustomer #1 has a warranty that is still in effect. The stored procedure deletes the review comments that they posted,\nbut keeps their purchase record because of the warranty:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003edelete_nonessential_customer_data\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| DELETE_NONESSENTIAL_CUSTOMER_DATA                       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Deleted non-financial, non-warranty data for customer 1 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+---------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | REVIEW                    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+---------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | Loved the dark chocolate! |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+---------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+-------+-------+------------+---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"71\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCustomer #2 still owes money. The stored procedure deletes their review comments, but keeps their purchase record:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003edelete_nonessential_customer_data\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| DELETE_NONESSENTIAL_CUSTOMER_DATA                       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------------------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Deleted non-financial, non-warranty data for customer 2 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+--------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | REVIEW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+--------|\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+--------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+-------+-------+------------+---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 3           | 19.99 | 19.99 | chocolate  | 2017-03-19    |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"72\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCustomer #3 does not owe any money (and is not owed any money). Their warranty expired, so the stored procedure\ndeletes both the review comments and the purchase records:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecall\u003c/span\u003e \u003cspan class=\"gi\"\u003edelete_nonessential_customer_data\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------------------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| DELETE_NONESSENTIAL_CUSTOMER_DATA                                       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------------------------------------------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| Deleted all data, including financial and warranty data, for customer 3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------------------------------------------------------------------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003ereviews\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+--------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | REVIEW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+--------|\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+--------+\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003epurchase_history\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| CUSTOMER_ID | PRICE |  PAID | PRODUCT_ID | PURCHASE_DATE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|-------------+-------+-------+------------+---------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 1           | 19.99 | 19.99 | chocolate  | 2018-06-17    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| 2           | 19.99 |  0    | chocolate  | 2017-02-14    |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e-------------+-------+-------+------------+---------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"73\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n\u003csection id=\"using-session-variables-with-caller-s-rights-and-owner-s-rights-stored-procedures\"\u003e\n\u003cspan id=\"label-sp-session-variables-example\"\u003e\u003c/span\u003e\u003ch3\u003eUsing Session Variables with Caller’s Rights and Owner’s Rights Stored Procedures\u003ca class=\"headerlink\" href=\"#using-session-variables-with-caller-s-rights-and-owner-s-rights-stored-procedures\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThese examples illustrate one of the key differences between caller’s rights and owner’s rights stored\nprocedures. They attempt to use session variables in two ways:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eSet a session variable before calling the stored procedure, then use the session variable inside the stored\nprocedure.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSet a session variable inside the stored procedure, then use the session variable after returning from the stored\nprocedures.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBoth using the session variable and setting the session variable work correctly in a caller’s rights stored procedure.\nBoth fail when using an owner’s rights stored procedure even if the caller is the \u003cspan class=\"emph\"\u003eowner\u003c/span\u003e.\u003c/p\u003e\n\u003csection id=\"caller-s-rights-stored-procedure\"\u003e\n\u003ch4\u003eCaller’s Rights Stored Procedure\u003ca class=\"headerlink\" href=\"#caller-s-rights-stored-procedure\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThe following example demonstrates a caller’s rights stored procedure.\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate and load a table:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e \u003cspan class=\"gi\"\u003esv_table\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003ef\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"ni\"\u003einsert\u003c/span\u003e \u003cspan class=\"ni\"\u003einto\u003c/span\u003e \u003cspan class=\"gi\"\u003esv_table\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003e49\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003e51\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"74\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSet a session variable:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eset\u003c/span\u003e \u003cspan class=\"gi\"\u003eSESSION_VAR1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"75\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCreate a caller’s rights stored procedure that uses one session variable and sets another:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003esession_var_user\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eEXECUTE\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eCALLER\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eSet\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"nd\"\u003esecond\u003c/span\u003e \u003cspan class=\"ni\"\u003esession\u003c/span\u003e \u003cspan class=\"gi\"\u003evariable\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"set SESSION_VAR2 = 'I was set inside the StProc.'\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ers\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003ewe\u003c/span\u003e \u003cspan class=\"ni\"\u003eignore\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003eresult\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ethis\u003c/span\u003e \u003cspan class=\"ni\"\u003ecase\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eRun\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"gi\"\u003equery\u003c/span\u003e \u003cspan class=\"ni\"\u003eusing\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003efirst\u003c/span\u003e \u003cspan class=\"ni\"\u003esession\u003c/span\u003e \u003cspan class=\"gi\"\u003evariable\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"select f from sv_table where f \u0026gt; $SESSION_VAR1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003ers\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003ers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003eoutput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003ers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"gi\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"76\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003esession_var_user\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| SESSION_VAR_USER |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|               51 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"77\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eView the value of the session variable set inside the stored procedure:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e$\u003c/span\u003e\u003cspan class=\"gi\"\u003eSESSION_VAR2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| $SESSION_VAR2                |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|------------------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| I was set inside the StProc. |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e------------------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"78\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"admonition note\"\u003e\n\u003cp class=\"admonition-title\"\u003eNote\u003c/p\u003e\n\u003cp\u003eAlthough you can set a session variable inside a stored procedure and leave it set after the end of the procedure,\nSnowflake does \u003cspan class=\"emph\"\u003enot\u003c/span\u003e recommend doing this.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"owner-s-rights-stored-procedure\"\u003e\n\u003ch4\u003eOwner’s Rights Stored Procedure\u003ca class=\"headerlink\" href=\"#owner-s-rights-stored-procedure\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThe following example demonstrates an owner’s rights stored procedure.\u003c/p\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\u003cp\u003eCreate an owner’s rights stored procedure that uses a session variable:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003ecannot_use_session_vars\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eEXECUTE\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eOWNER\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003eRun\u003c/span\u003e \u003cspan class=\"nf\"\u003ea\u003c/span\u003e \u003cspan class=\"gi\"\u003equery\u003c/span\u003e \u003cspan class=\"ni\"\u003eusing\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003efirst\u003c/span\u003e \u003cspan class=\"ni\"\u003esession\u003c/span\u003e \u003cspan class=\"gi\"\u003evariable\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"select f from sv_table where f \u0026gt; $SESSION_VAR1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ers\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003ers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003eoutput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003ers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003egetColumnValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"gi\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"79\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the procedure (it should fail):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003ecannot_use_session_vars\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"80\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCreate an owner’s rights stored procedure that tries to set a session variable:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003eprocedure\u003c/span\u003e \u003cspan class=\"gi\"\u003ecannot_set_session_vars\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturns\u003c/span\u003e \u003cspan class=\"ni\"\u003efloat\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003elanguage\u003c/span\u003e \u003cspan class=\"ni\"\u003ejavascript\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eEXECUTE\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eOWNER\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eas\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e$$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"ni\"\u003eSet\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"nd\"\u003esecond\u003c/span\u003e \u003cspan class=\"ni\"\u003esession\u003c/span\u003e \u003cspan class=\"gi\"\u003evariable\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003esnowflake\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003ecreateStatement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"gi\"\u003esqlText\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"set SESSION_VAR2 = 'I was set inside the StProc.'\"\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"gi\"\u003evar\u003c/span\u003e \u003cspan class=\"gi\"\u003ers\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"gi\"\u003estmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"ni\"\u003eexecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e  \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003ewe\u003c/span\u003e \u003cspan class=\"ni\"\u003eignore\u003c/span\u003e \u003cspan class=\"gi\"\u003ethe\u003c/span\u003e \u003cspan class=\"ni\"\u003eresult\u003c/span\u003e \u003cspan class=\"ni\"\u003ein\u003c/span\u003e \u003cspan class=\"gi\"\u003ethis\u003c/span\u003e \u003cspan class=\"ni\"\u003ecase\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"p\"\u003e//\u003c/span\u003e \u003cspan class=\"gi\"\u003edummy\u003c/span\u003e \u003cspan class=\"ni\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n\u003cspan class=\"p\"\u003e  $$\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"81\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCall the procedure (it should fail):\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eCALL\u003c/span\u003e \u003cspan class=\"gi\"\u003ecannot_set_session_vars\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"82\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"troubleshooting\"\u003e\n\u003ch2\u003eTroubleshooting\u003ca class=\"headerlink\" href=\"#troubleshooting\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eA general troubleshooting technique is to use a JavaScript try/catch block to\ncatch the error and display error information. The error object contains:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eError code.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eError message.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eError state.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eStack trace at the point of failure.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor more information, including an example, of how to use this information, see \u003ca class=\"reference internal\" href=\"#label-stored-procedure-error-handling\"\u003e\u003cspan class=\"std std-ref\"\u003eCatching an Error using Try/Catch\u003c/span\u003e\u003c/a\u003e (in this topic).\u003c/p\u003e\n\u003cp\u003eTh following sections provide additional suggestions to help debug specific problems.\u003c/p\u003e\n\u003csection id=\"stored-procedure-or-udf-unexpectedly-returns-null\"\u003e\n\u003ch3\u003eStored Procedure or UDF Unexpectedly Returns NULL\u003ca class=\"headerlink\" href=\"#stored-procedure-or-udf-unexpectedly-returns-null\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cdl class=\"field-list\"\u003e\n\u003cdt class=\"field-odd\"\u003eCause\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-odd\"\u003e\u003cp\u003eYour stored procedure/UDF has a parameter, and inside the procedure/UDF, the parameter is referred to by its lowercase name, but Snowflake has\nautomatically converted the name to uppercase.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"field-even\"\u003eSolution\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-even\"\u003e\u003cp\u003eEither:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eUse uppercase for the variable name inside the JavaScript code, or\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eEnclose the variable name in double quotes in the SQL code.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor more details, see \u003ca class=\"reference internal\" href=\"../udf/javascript/udf-javascript-introduction.html#label-js-udf-arguments\"\u003e\u003cspan class=\"std std-ref\"\u003eJavaScript Arguments and Returned Values\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/section\u003e\n\u003csection id=\"stored-procedure-never-finishes-running\"\u003e\n\u003ch3\u003eStored Procedure Never Finishes Running\u003ca class=\"headerlink\" href=\"#stored-procedure-never-finishes-running\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cdl class=\"field-list simple\"\u003e\n\u003cdt class=\"field-odd\"\u003eCause\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-odd\"\u003e\u003cp\u003eYou might have an infinite loop in your JavaScript code.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"field-even\"\u003eSolution\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-even\"\u003e\u003cp\u003eCheck for and fix any infinite loops.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/section\u003e\n\u003csection id=\"error-failed-empty-argument-passed\"\u003e\n\u003ch3\u003eError: \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFailed:\u003c/span\u003e \u003cspan class=\"pre\"\u003eempty\u003c/span\u003e \u003cspan class=\"pre\"\u003eargument\u003c/span\u003e \u003cspan class=\"pre\"\u003epassed\u003c/span\u003e\u003c/code\u003e\u003ca class=\"headerlink\" href=\"#error-failed-empty-argument-passed\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cdl class=\"field-list simple\"\u003e\n\u003cdt class=\"field-odd\"\u003eCause\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-odd\"\u003e\u003cp\u003eYour stored procedure might contain “sqltext” when it should have “sqlText”\n(the first is all lowercase; the second is mixed case).\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"field-even\"\u003eSolution\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-even\"\u003e\u003cp\u003eUse “sqlText”.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/section\u003e\n\u003csection id=\"error-javascript-out-of-memory-error-udf-thread-memory-limit-exceeded\"\u003e\n\u003ch3\u003eError: \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"pre\"\u003eout\u003c/span\u003e \u003cspan class=\"pre\"\u003eof\u003c/span\u003e \u003cspan class=\"pre\"\u003ememory\u003c/span\u003e \u003cspan class=\"pre\"\u003eerror:\u003c/span\u003e \u003cspan class=\"pre\"\u003eUDF\u003c/span\u003e \u003cspan class=\"pre\"\u003ethread\u003c/span\u003e \u003cspan class=\"pre\"\u003ememory\u003c/span\u003e \u003cspan class=\"pre\"\u003elimit\u003c/span\u003e \u003cspan class=\"pre\"\u003eexceeded\u003c/span\u003e\u003c/code\u003e\u003ca class=\"headerlink\" href=\"#error-javascript-out-of-memory-error-udf-thread-memory-limit-exceeded\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cdl class=\"field-list simple\"\u003e\n\u003cdt class=\"field-odd\"\u003eCause\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-odd\"\u003e\u003cp\u003eYou might have an infinite loop in your JavaScript code.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"field-even\"\u003eSolution\u003cspan class=\"colon\"\u003e:\u003c/span\u003e\u003c/dt\u003e\n\u003cdd class=\"field-even\"\u003e\u003cp\u003eCheck for and fix any infinite loops. In particular, ensure that you stop calling for the next row when the result set runs out (i.e. when\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eresultSet.next()\u003c/span\u003e\u003c/code\u003e returns \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003efalse\u003c/span\u003e\u003c/code\u003e).\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\n\n","headings":[{"label":"Understanding the JavaScript API","depth":1,"href":"understanding-the-javascript-api"},{"label":"SQL and JavaScript Data Type Mapping","depth":1,"href":"sql-and-javascript-data-type-mapping"},{"label":"General Tips","depth":1,"href":"general-tips"},{"label":"JavaScript Stored Procedure Considerations","depth":1,"href":"javascript-stored-procedure-considerations"},{"label":"Examples","depth":1,"href":"examples"},{"label":"Troubleshooting","depth":1,"href":"troubleshooting"}],"mastheads":[{"label":"Getting Started","href":"/en/user-guide-getting-started","active":false},{"label":"Guides","href":"/en/guides","active":false},{"label":"Developer","href":"/en/developer","active":true},{"label":"Reference","href":"/en/reference","active":false},{"label":"Releases","href":"/en/release-notes/new-features","active":false},{"label":"Tutorials","href":"/en/tutorials","active":false}],"title":"Writing Stored Procedures in JavaScript | Snowflake Documentation","breadcrumbs":[{"label":"Developer","href":"/en/developer"},{"label":"Functions and Procedures","href":"/en/developer-guide/extensibility"},{"label":"Stored Procedures","href":"/en/developer-guide/stored-procedure/stored-procedures-overview"},{"label":"Javascript","href":"/en/developer-guide/stored-procedure/stored-procedures-javascript"}],"relatedTopics":[{"label":"Working with Stored Procedures","href":"/developer-guide/stored-procedure/stored-procedures-usage","isExternal":false},{"label":"Understanding Caller’s Rights and Owner’s Rights Stored Procedures","href":"/developer-guide/stored-procedure/stored-procedures-rights","isExternal":false},{"label":"JavaScript Stored Procedures API","href":"/developer-guide/stored-procedure/stored-procedures-api","isExternal":false},{"label":"Introduction to JavaScript UDFs","href":"/developer-guide/stored-procedure/../udf/javascript/udf-javascript-introduction","isExternal":false}],"notices":[],"relatedInfo":"","sqlExamples":[],"lang":"en","tree":{"depth":0,"label":"Developer","type":"masthead","href":"/en/developer","active":false,"parentRef":"/en/","children":[{"label":"Overview","type":"page","href":"/en/developer","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[]},{"type":"category","depth":0,"label":"Snowpark Library"},{"label":"Snowpark API","type":"page","href":"/en/developer-guide/snowpark/index","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Java","type":"page","href":"/en/developer-guide/snowpark/java/index","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/index","children":[{"label":"Setting Up a Development Environment","type":"page","href":"/en/developer-guide/snowpark/java/setup","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[{"label":"Prerequisites","type":"page","href":"/en/developer-guide/snowpark/java/prerequisites","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/setup","children":[]},{"label":"IntelliJ IDEA","type":"page","href":"/en/developer-guide/snowpark/java/quickstart-intellij","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/setup","children":[]},{"label":"Other","type":"page","href":"/en/developer-guide/snowpark/java/setup-other-environments","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/setup","children":[]}]},{"label":"Creating a Session","type":"page","href":"/en/developer-guide/snowpark/java/creating-session","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Using DataFrames","type":"page","href":"/en/developer-guide/snowpark/java/working-with-dataframes","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Creating User Defined Functions","type":"page","href":"/en/developer-guide/snowpark/java/creating-udfs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Creating Stored Procedures","type":"page","href":"/en/developer-guide/snowpark/java/creating-sprocs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Calling Functions and Stored Procedures","type":"page","href":"/en/developer-guide/snowpark/java/calling-functions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Example","type":"page","href":"/en/developer-guide/snowpark/java/example","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/snowpark/java/troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Map of Java APIs to SQL Commands","type":"page","href":"/en/developer-guide/snowpark/java/sql-to-snowpark","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/java/index","children":[]},{"label":"Java API Reference","type":"external","href":"/developer-guide/snowpark/reference/java/index.html","depth":2}]},{"label":"Python","type":"page","href":"/en/developer-guide/snowpark/python/index","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/index","children":[{"label":"Setting Up a Development Environment","type":"page","href":"/en/developer-guide/snowpark/python/setup","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Creating a Session","type":"page","href":"/en/developer-guide/snowpark/python/creating-session","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Writing Snowpark Code in Python Worksheets","type":"page","href":"/en/developer-guide/snowpark/python/python-worksheets","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Using DataFrames","type":"page","href":"/en/developer-guide/snowpark/python/working-with-dataframes","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Creating User Defined Functions","type":"page","href":"/en/developer-guide/snowpark/python/creating-udfs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Creating User Defined Table Functions","type":"page","href":"/en/developer-guide/snowpark/python/creating-udtfs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Creating Stored Procedures for DataFrames","type":"page","href":"/en/developer-guide/snowpark/python/creating-sprocs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Calling Functions and Stored Procedures","type":"page","href":"/en/developer-guide/snowpark/python/calling-functions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Training Machine Learning Models with Snowpark Python","type":"page","href":"/en/developer-guide/snowpark/python/python-snowpark-training-ml","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Writing Tests for Snowpark Python","type":"page","href":"/en/developer-guide/snowpark/python/testing-python-snowpark","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Local Testing Framework","type":"page","href":"/en/developer-guide/snowpark/python/testing-locally","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Tutorial: Testing Python Snowpark","type":"page","href":"/en/developer-guide/snowpark/python/tutorials/testing-tutorial","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/snowpark/python/troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","children":[]},{"label":"Python API Reference","type":"page","href":"/en/developer-guide/snowpark/reference/python/latest/index","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/python/index","hideBreadcrumb":true,"children":[]}]},{"label":"Scala","type":"page","href":"/en/developer-guide/snowpark/scala/index","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/index","children":[{"label":"Setting Up a Development Environment","type":"page","href":"/en/developer-guide/snowpark/scala/setup","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[{"label":"Prerequisites","type":"page","href":"/en/developer-guide/snowpark/scala/prerequisites","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"Visual Studio Code","type":"page","href":"/en/developer-guide/snowpark/scala/quickstart-vscode","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"IntelliJ IDEA","type":"page","href":"/en/developer-guide/snowpark/scala/quickstart-intellij","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"SBT REPL","type":"page","href":"/en/developer-guide/snowpark/scala/quickstart-sbt","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"Scala REPL","type":"page","href":"/en/developer-guide/snowpark/scala/quickstart-scala-repl","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"Jupyter Notebook","type":"page","href":"/en/developer-guide/snowpark/scala/quickstart-jupyter","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]},{"label":"Other","type":"page","href":"/en/developer-guide/snowpark/scala/setup-other-environments","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/setup","children":[]}]},{"label":"Creating a Session","type":"page","href":"/en/developer-guide/snowpark/scala/creating-session","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Using DataFrames","type":"page","href":"/en/developer-guide/snowpark/scala/working-with-dataframes","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Creating User-Defined Functions","type":"page","href":"/en/developer-guide/snowpark/scala/creating-udfs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Creating Stored Procedures","type":"page","href":"/en/developer-guide/snowpark/scala/creating-sprocs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Calling Functions and Stored Procedures","type":"page","href":"/en/developer-guide/snowpark/scala/calling-functions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Example","type":"page","href":"/en/developer-guide/snowpark/scala/example","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/snowpark/scala/troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Map of Scala APIs to SQL Commands","type":"page","href":"/en/developer-guide/snowpark/scala/sql-to-snowpark","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark/scala/index","children":[]},{"label":"Scala API Reference","type":"external","href":"/developer-guide/snowpark/reference/scala/com/snowflake/snowpark/index.html","depth":2}]}]},{"label":"Snowpark ML","type":"page","href":"/en/developer-guide/snowpark-ml/index","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Modeling","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-modeling","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/index","children":[]},{"label":"Model Registry","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-mlops-model-registry","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/index","children":[{"label":"Custom Models and Pipelines","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-mlops-custom-models","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/snowpark-ml-mlops-model-registry","children":[]},{"label":"Migrating from Preview API","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-mlops-model-registry-api-diff","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/snowpark-ml-mlops-model-registry","children":[]}]},{"label":"FileSystem and FileSet","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-filesystem-fileset","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/index","children":[]},{"label":"Framework Connectors","type":"page","href":"/en/developer-guide/snowpark-ml/snowpark-ml-framework-connectors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/index","children":[]},{"label":"Snowpark ML API Reference","type":"page","href":"/en/developer-guide/snowpark-ml/reference/latest/index","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-ml/index","hideBreadcrumb":true,"children":[]}]},{"type":"category","depth":0,"label":"Snowpark Runtime"},{"label":"Snowpark Container Services","type":"page","href":"/en/developer-guide/snowpark-container-services/overview","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Tutorials","type":"page","href":"/en/developer-guide/snowpark-container-services/overview-tutorials","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[{"label":"Common Setup","type":"page","href":"/en/developer-guide/snowpark-container-services/tutorials/common-setup","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview-tutorials","children":[]},{"label":"Tutorial 1: Create a Service","type":"page","href":"/en/developer-guide/snowpark-container-services/tutorials/tutorial-1","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview-tutorials","children":[]},{"label":"Tutorial 2: Create a Job Service","type":"page","href":"/en/developer-guide/snowpark-container-services/tutorials/tutorial-2","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview-tutorials","children":[]}]},{"label":"Service Specification Reference","type":"page","href":"/en/developer-guide/snowpark-container-services/specification-reference","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Working with an Image Registry and Repository","type":"page","href":"/en/developer-guide/snowpark-container-services/working-with-registry-repository","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Working with Compute Pools","type":"page","href":"/en/developer-guide/snowpark-container-services/working-with-compute-pool","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[{"label":"Compute Pool Metrics","type":"page","href":"/en/developer-guide/snowpark-container-services/compute-pool-metrics-overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/working-with-compute-pool","children":[]}]},{"label":"Working with Services","type":"page","href":"/en/developer-guide/snowpark-container-services/working-with-services","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Additional Considerations for Services","type":"page","href":"/en/developer-guide/snowpark-container-services/additional-considerations-services-jobs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Snowpark Container Services Troubleshooting","type":"page","href":"/en/developer-guide/snowpark-container-services/troubleshooting","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Snowpark Container Services Costs","type":"page","href":"/en/developer-guide/snowpark-container-services/accounts-orgs-usage-views","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[]},{"label":"Advanced Tutorials","type":"page","href":"/en/developer-guide/snowpark-container-services/overview-advanced-tutorials","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview","children":[{"label":"Tutorial 3: Service to Service Communications","type":"page","href":"/en/developer-guide/snowpark-container-services/tutorials/advanced/tutorial-3","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowpark-container-services/overview-advanced-tutorials","children":[]}]}]},{"label":"Functions and Procedures","type":"page","href":"/en/developer-guide/extensibility","active":false,"depth":0,"isInitiallyOpen":true,"parentRef":"/en/developer","children":[{"label":"Function or Procedure?","type":"page","href":"/en/developer-guide/stored-procedures-vs-udfs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[]},{"label":"Guidelines","type":"page","href":"/en/developer-guide/udf-stored-procedure-guidelines","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Handler Inline or on a Stage?","type":"page","href":"/en/developer-guide/inline-or-staged","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Security Practices","type":"page","href":"/en/developer-guide/udf-stored-procedure-security-practices","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Java Runtime Support","type":"page","href":"/en/developer-guide/java-runtime-support-policy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Python Runtime Support","type":"page","href":"/en/developer-guide/python-runtime-support-policy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Secure UDFs and Procedures","type":"page","href":"/en/developer-guide/secure-udf-procedure","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Pushdown Optimization and Data Visibility","type":"page","href":"/en/developer-guide/pushdown-optimization","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Designing for Snowflake Constraints","type":"page","href":"/en/developer-guide/udf-stored-procedure-constraints","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Naming and Overloading","type":"page","href":"/en/developer-guide/udf-stored-procedure-naming-conventions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Arguments","type":"page","href":"/en/developer-guide/udf-stored-procedure-arguments","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Data Type Mappings","type":"page","href":"/en/developer-guide/udf-stored-procedure-data-type-mapping","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]},{"label":"Uploading Dependencies","type":"page","href":"/en/developer-guide/upload-dependencies","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-guidelines","children":[]}]},{"label":"Stored Procedures","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-overview","active":false,"depth":1,"isInitiallyOpen":true,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Usage","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-usage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Caller and Owner Rights","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-rights","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Creating","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-creating-sql","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Calling","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-calling","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Passing in References","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-calling-references","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"type":"category","depth":2,"label":"Handler Writing"},{"label":"Java","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-java","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Javascript","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-javascript","active":true,"depth":2,"isInitiallyOpen":true,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[{"label":"API","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-api","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-javascript","children":[]}]},{"label":"Python","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-python","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Scala","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-scala","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Snowflake Scripting","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-snowflake-scripting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]}]},{"label":"User-Defined Functions","type":"page","href":"/en/developer-guide/udf/udf-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Privileges","type":"page","href":"/en/developer-guide/udf/udf-access-control","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[]},{"label":"Creating","type":"page","href":"/en/developer-guide/udf/udf-creating-sql","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[]},{"label":"Calling","type":"page","href":"/en/developer-guide/udf/udf-calling-sql","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[]},{"label":"Viewing in Snowsight","type":"page","href":"/en/user-guide/ui-snowsight-data-databases-function","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[]},{"type":"category","depth":2,"label":"Handler Writing"},{"label":"Java","type":"page","href":"/en/developer-guide/udf/java/udf-java-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[{"label":"Limitations","type":"page","href":"/en/developer-guide/udf/java/udf-java-limitations","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]},{"label":"Designing","type":"page","href":"/en/developer-guide/udf/java/udf-java-designing","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]},{"label":"Creating","type":"page","href":"/en/developer-guide/udf/java/udf-java-creating","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]},{"label":"Table Functions","type":"page","href":"/en/developer-guide/udf/java/udf-java-tabular-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]},{"label":"Examples","type":"page","href":"/en/developer-guide/udf/java/udf-java-cookbook","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/udf/java/udf-java-troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/java/udf-java-introduction","children":[]}]},{"label":"Javascript","type":"page","href":"/en/developer-guide/udf/javascript/udf-javascript-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[{"label":"Limitations","type":"page","href":"/en/developer-guide/udf/javascript/udf-javascript-limitations","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/javascript/udf-javascript-introduction","children":[]},{"label":"Scalar Functions","type":"page","href":"/en/developer-guide/udf/javascript/udf-javascript-scalar-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/javascript/udf-javascript-introduction","children":[]},{"label":"Table Functions","type":"page","href":"/en/developer-guide/udf/javascript/udf-javascript-tabular-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/javascript/udf-javascript-introduction","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/udf/javascript/udf-javascript-troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/javascript/udf-javascript-introduction","children":[]}]},{"label":"Python","type":"page","href":"/en/developer-guide/udf/python/udf-python-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[{"label":"Limitations","type":"page","href":"/en/developer-guide/udf/python/udf-python-limitations","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Designing","type":"page","href":"/en/developer-guide/udf/python/udf-python-designing","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Creating","type":"page","href":"/en/developer-guide/udf/python/udf-python-creating","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Table Functions","type":"page","href":"/en/developer-guide/udf/python/udf-python-tabular-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Vectorized UDFs","type":"page","href":"/en/developer-guide/udf/python/udf-python-batch","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Vectorized UDTFs","type":"page","href":"/en/developer-guide/udf/python/udf-python-tabular-vectorized","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Using Third-Party Packages","type":"page","href":"/en/developer-guide/udf/python/udf-python-packages","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Packages Policies","type":"page","href":"/en/developer-guide/udf/python/packages-policy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Examples","type":"page","href":"/en/developer-guide/udf/python/udf-python-examples","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/udf/python/udf-python-troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/python/udf-python-introduction","children":[]}]},{"label":"Scala","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[{"label":"Limitations","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-limitations","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"General Coding","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-general","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"Scalar Functions","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-scalar","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"Optimizing","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-optimizing","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"Project and Packaging","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-packaging","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"Examples","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-examples","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/udf/scala/udf-scala-troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/scala/udf-scala-introduction","children":[]}]},{"label":"SQL","type":"page","href":"/en/developer-guide/udf/sql/udf-sql-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/udf-overview","children":[{"label":"Limitations","type":"page","href":"/en/developer-guide/udf/sql/udf-sql-limitations","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/sql/udf-sql-introduction","children":[]},{"label":"Scalar Functions","type":"page","href":"/en/developer-guide/udf/sql/udf-sql-scalar-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/sql/udf-sql-introduction","children":[]},{"label":"Table Functions","type":"page","href":"/en/developer-guide/udf/sql/udf-sql-tabular-functions","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/sql/udf-sql-introduction","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/udf/sql/udf-sql-troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf/sql/udf-sql-introduction","children":[]}]}]},{"label":"Logging and Tracing","type":"page","href":"/en/developer-guide/logging-tracing/logging-tracing-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Get Started Tutorial","type":"page","href":"/en/developer-guide/logging-tracing/tutorials/logging-tracing-getting-started","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Event Table Set Up","type":"page","href":"/en/developer-guide/logging-tracing/event-table-setting-up","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Event Table Operations","type":"page","href":"/en/developer-guide/logging-tracing/event-table-operations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Event Table Columns","type":"page","href":"/en/developer-guide/logging-tracing/event-table-columns","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Unhandled Exception Messages","type":"page","href":"/en/developer-guide/logging-tracing/unhandled-exception-messages","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Telemetry Package Dependencies","type":"page","href":"/en/developer-guide/logging-tracing/telemetry-package-dependencies","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Packaging","type":"page","href":"/en/developer-guide/logging-tracing/telemetry-build-maven","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Limitations","type":"page","href":"/en/developer-guide/logging-tracing/logging-tracing-limitations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/logging-tracing/logging-tracing-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Costs","type":"page","href":"/en/developer-guide/logging-tracing/logging-tracing-billing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"type":"category","depth":2,"label":"Logging"},{"label":"Introduction","type":"page","href":"/en/developer-guide/logging-tracing/logging","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Log Level","type":"page","href":"/en/developer-guide/logging-tracing/logging-log-level","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Java","type":"page","href":"/en/developer-guide/logging-tracing/logging-java","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"JavaScript","type":"page","href":"/en/developer-guide/logging-tracing/logging-javascript","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Python","type":"page","href":"/en/developer-guide/logging-tracing/logging-python","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Scala","type":"page","href":"/en/developer-guide/logging-tracing/logging-scala","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Snowflake Scripting","type":"page","href":"/en/developer-guide/logging-tracing/logging-snowflake-scripting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Accessing Message Data","type":"page","href":"/en/developer-guide/logging-tracing/logging-accessing-messages","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"type":"category","depth":2,"label":"Tracing"},{"label":"Introduction","type":"page","href":"/en/developer-guide/logging-tracing/tracing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Trace Events","type":"page","href":"/en/developer-guide/logging-tracing/tracing-how-events-work","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Trace Level","type":"page","href":"/en/developer-guide/logging-tracing/tracing-trace-level","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Java","type":"page","href":"/en/developer-guide/logging-tracing/tracing-java","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"JavaScript","type":"page","href":"/en/developer-guide/logging-tracing/tracing-javascript","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Python","type":"page","href":"/en/developer-guide/logging-tracing/tracing-python","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Scala","type":"page","href":"/en/developer-guide/logging-tracing/tracing-scala","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Snowflake Scripting","type":"page","href":"/en/developer-guide/logging-tracing/tracing-snowflake-scripting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]},{"label":"Accessing Trace Data","type":"page","href":"/en/developer-guide/logging-tracing/tracing-accessing-events","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/logging-tracing/logging-tracing-overview","children":[]}]},{"label":"External Network Access","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Creating and Using Access","type":"page","href":"/en/developer-guide/external-network-access/creating-using-external-network-access","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Best Practices","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-best-practices","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Examples","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-examples","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Secret API Reference","type":"page","href":"/en/developer-guide/external-network-access/secret-api-reference","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Limitations","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-limitations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]},{"label":"Costs","type":"page","href":"/en/developer-guide/external-network-access/external-network-access-billing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/external-network-access/external-network-access-overview","children":[]}]},{"label":"Packaging Handler Code","type":"page","href":"/en/developer-guide/udf-stored-procedure-building","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"sbt","type":"page","href":"/en/developer-guide/udf-stored-procedure-build-sbt","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-building","children":[]},{"label":"Maven","type":"page","href":"/en/developer-guide/udf-stored-procedure-build-maven","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/udf-stored-procedure-building","children":[]}]}]},{"type":"category","depth":0,"label":"Snowflake APIs"},{"label":"Snowflake Python API","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Installing","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-installing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Connecting to Snowflake","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-connecting-snowflake","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Managing Tasks and Task Graphs","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-managing-tasks","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Managing Databases, Schemas, and Tables","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-managing-databases","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Managing Virtual Warehouses","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-managing-warehouses","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Managing Snowpark Container Services","type":"page","href":"/en/developer-guide/snowflake-python-api/snowflake-python-managing-containers","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","children":[]},{"label":"Snowflake Python API Reference","type":"page","href":"/en/developer-guide/snowflake-python-api/reference/latest/index","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-python-api/snowflake-python-overview","hideBreadcrumb":true,"children":[]}]},{"label":"SQL REST API","type":"page","href":"/en/developer-guide/sql-api/index","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Introduction","type":"page","href":"/en/developer-guide/sql-api/intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Endpoints","type":"page","href":"/en/developer-guide/sql-api/about-endpoints","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Authentication","type":"page","href":"/en/developer-guide/sql-api/authenticating","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Submitting requests","type":"page","href":"/en/developer-guide/sql-api/submitting-requests","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Handling responses","type":"page","href":"/en/developer-guide/sql-api/handling-responses","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Multiple statements","type":"page","href":"/en/developer-guide/sql-api/submitting-multiple-statements","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Stored procedures","type":"page","href":"/en/developer-guide/sql-api/using-stored-procedures","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Transactions","type":"page","href":"/en/developer-guide/sql-api/using-transactions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Handling errors","type":"page","href":"/en/developer-guide/sql-api/handling-errors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Query canceling","type":"page","href":"/en/developer-guide/sql-api/cancelling-requests","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"SQL API reference","type":"page","href":"/en/developer-guide/sql-api/reference","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]},{"label":"Deprecated functionality","type":"page","href":"/en/developer-guide/sql-api/sql-api-old","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/sql-api/index","children":[]}]},{"type":"category","depth":0,"label":"Apps"},{"label":"Streamlit in Snowflake","type":"page","href":"/en/developer-guide/streamlit/about-streamlit","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Limitations and Unsupported Features","type":"page","href":"/en/developer-guide/streamlit/limitations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Create a Streamlit App by Using SQL","type":"page","href":"/en/developer-guide/streamlit/create-streamlit-sql","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Create a Streamlit App by Using Snowsight","type":"page","href":"/en/developer-guide/streamlit/create-streamlit-ui","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Understanding Owner's Rights","type":"page","href":"/en/developer-guide/streamlit/owners-rights","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Example - Accessing Snowflake Data","type":"page","href":"/en/developer-guide/streamlit/example-access-snowflake","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Example - Single-page Streamlit App","type":"page","href":"/en/developer-guide/streamlit/example-single-page","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]},{"label":"Example - Multi-page Streamlit App","type":"page","href":"/en/developer-guide/streamlit/example-multi-page","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/streamlit/about-streamlit","children":[]}]},{"label":"Snowflake Native App Framework","type":"page","href":"/en/developer-guide/native-apps/native-apps-about","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Tutorial: Develop an app","type":"page","href":"/en/developer-guide/native-apps/tutorials/getting-started-tutorial","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Snowflake Native App workflow","type":"page","href":"/en/developer-guide/native-apps/native-apps-workflow","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Protect provider intellectual property","type":"page","href":"/en/developer-guide/native-apps/redacted-content","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"type":"category","depth":1,"label":"Develop an application package"},{"label":"Create a setup script","type":"page","href":"/en/developer-guide/native-apps/creating-setup-script","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Create a manifest file","type":"page","href":"/en/developer-guide/native-apps/creating-manifest","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Create an application package","type":"page","href":"/en/developer-guide/native-apps/creating-app-package","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Add application logic","type":"page","href":"/en/developer-guide/native-apps/adding-application-logic","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Update an app","type":"page","href":"/en/developer-guide/native-apps/versioning","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Share data content","type":"page","href":"/en/developer-guide/native-apps/preparing-data-content","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Add frontend experience with Streamlit","type":"page","href":"/en/developer-guide/native-apps/adding-streamlit","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Set up logging and event sharing","type":"page","href":"/en/developer-guide/native-apps/setting-up-logging-and-events","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Add billable events to an app","type":"page","href":"/en/developer-guide/native-apps/adding-custom-event-billing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Request access to a consumer account","type":"page","href":"/en/developer-guide/native-apps/requesting-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[{"label":"Request global privileges","type":"page","href":"/en/developer-guide/native-apps/requesting-privs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/requesting-about","children":[]},{"label":"Request references and object-level privileges","type":"page","href":"/en/developer-guide/native-apps/requesting-refs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/requesting-about","children":[]},{"label":"Create a user interface to request privileges and references","type":"page","href":"/en/developer-guide/native-apps/requesting-ui","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/requesting-about","children":[]}]},{"type":"category","depth":1,"label":"Install and test"},{"label":"Install and test an app","type":"page","href":"/en/developer-guide/native-apps/installing-testing-application","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Run the automated security scan","type":"page","href":"/en/developer-guide/native-apps/running-security-scan","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"type":"category","depth":1,"label":"Publish an app"},{"label":"Guidelines for Submitting an App","type":"page","href":"/en/developer-guide/native-apps/publish-guidelines","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Share an app with consumers","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/provider-publishing-app-package","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"type":"category","depth":1,"label":"Use an app as a consumer"},{"label":"Work with an app as a consumer","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/consumer-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Install an app","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/consumer-installing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Grant access to an app","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/consumer-granting-privs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Enable logging and event sharing","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/consumer-enable-logging","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"label":"Manage apps","type":"page","href":"https://other-docs.snowflake.com/en/native-apps/consumer-managing-applications","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]},{"type":"category","depth":1,"label":"Snowflake Native SDK for Connectors"},{"label":"About the Snowflake Native SDK for Connectors","type":"page","href":"/en/developer-guide/native-apps/connector-sdk/about-connector-sdk","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/native-apps/native-apps-about","children":[]}]},{"type":"category","depth":0,"label":"External System Integration"},{"label":"External Functions","type":"page","href":"/en/sql-reference/external-functions","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Introduction to External Functions","type":"page","href":"/en/sql-reference/external-functions-introduction","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]},{"label":"Data Formats","type":"page","href":"/en/sql-reference/external-functions-data-format","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]},{"label":"Request and Response Translators","type":"page","href":"/en/sql-reference/external-functions-translators","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]},{"label":"Performance","type":"page","href":"/en/sql-reference/external-functions-implementation","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]},{"label":"Best Practices","type":"page","href":"/en/sql-reference/external-functions-best-practices","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]},{"label":"AWS","type":"page","href":"/en/sql-reference/external-functions-creating-aws","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[{"label":"Planning","type":"page","href":"/en/sql-reference/external-functions-creating-aws-planning","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws","children":[]},{"label":"Creating Using AWS Management Console","type":"page","href":"/en/sql-reference/external-functions-creating-aws-ui","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws","children":[{"label":"Step 1: Create the Remote Service","type":"page","href":"/en/sql-reference/external-functions-creating-aws-ui-remote-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-ui","children":[]},{"label":"Step 2: Create the Proxy Service","type":"page","href":"/en/sql-reference/external-functions-creating-aws-ui-proxy-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-ui","children":[]},{"label":"Step 3: Create the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-api-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-ui","children":[]},{"label":"Step 4: Link the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-api-integration-proxy-link","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-ui","children":[]},{"label":"Step 5: Create the External Function","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-ext-function","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-ui","children":[]}]},{"label":"Creating Using AWS CloudFormation Template","type":"page","href":"/en/sql-reference/external-functions-creating-aws-template","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws","children":[{"label":"Step 1: Create the Remote Service","type":"page","href":"/en/sql-reference/external-functions-creating-aws-template-services","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-template","children":[]},{"label":"Step 2: Get Gateway URL and Role ARN","type":"page","href":"/en/sql-reference/external-functions-creating-aws-template-gateway-url","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-template","children":[]},{"label":"Step 3: Create the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-api-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-template","children":[]},{"label":"Step 4: Link the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-api-integration-proxy-link","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-template","children":[]},{"label":"Step 5: Create the External Function","type":"page","href":"/en/sql-reference/external-functions-creating-aws-common-ext-function","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws-template","children":[]}]},{"label":"Calling","type":"page","href":"/en/sql-reference/external-functions-creating-aws-call","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/sql-reference/external-functions-creating-aws-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-aws","children":[]}]},{"label":"Google Cloud","type":"page","href":"/en/sql-reference/external-functions-creating-gcp","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[{"label":"Planning","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-planning","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp","children":[]},{"label":"Creating using Google Cloud Console","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-ui","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp","children":[{"label":"Step 1: Create the Remote Service","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-ui-remote-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp-ui","children":[]},{"label":"Step 2: Create the Proxy Service","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-ui-proxy-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp-ui","children":[]},{"label":"Step 3: Create the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-common-api-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp-ui","children":[]},{"label":"Step 4: Create the External Function","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-common-ext-function","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp-ui","children":[]},{"label":"Step 5: Create the Security Policy","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-ui-security-policy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp-ui","children":[]}]},{"label":"Calling","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-call","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/sql-reference/external-functions-creating-gcp-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-gcp","children":[]}]},{"label":"Azure","type":"page","href":"/en/sql-reference/external-functions-creating-azure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[{"label":"Planning","type":"page","href":"/en/sql-reference/external-functions-creating-azure-planning","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure","children":[]},{"label":"Creating using Azure Portal","type":"page","href":"/en/sql-reference/external-functions-creating-azure-ui","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure","children":[{"label":"Step 1: Create the Remote Service","type":"page","href":"/en/sql-reference/external-functions-creating-azure-ui-remote-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]},{"label":"Step 2: Create the Proxy Service","type":"page","href":"/en/sql-reference/external-functions-creating-azure-ui-proxy-service","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]},{"label":"Step 3: Create the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-api-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]},{"label":"Step 4: Link the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-api-integration-proxy-link","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]},{"label":"Step 5: Create the External Function","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-ext-function","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]},{"label":"Step 6: Create the Security Policy","type":"page","href":"/en/sql-reference/external-functions-creating-azure-ui-security-policy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-ui","children":[]}]},{"label":"Creating using ARM Template","type":"page","href":"/en/sql-reference/external-functions-creating-azure-template","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure","children":[{"label":"Step 1: Create the Azure Application","type":"page","href":"/en/sql-reference/external-functions-creating-azure-template-apps","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]},{"label":"Step 2: Create the Remote Service","type":"page","href":"/en/sql-reference/external-functions-creating-azure-template-services","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]},{"label":"Step 3: Create the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-api-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]},{"label":"Step 4: Link the API Integration","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-api-integration-proxy-link","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]},{"label":"Step 5: Create the External Function","type":"page","href":"/en/sql-reference/external-functions-creating-azure-common-ext-function","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]},{"label":"Step 6: Update the Security Policy","type":"page","href":"/en/sql-reference/external-functions-creating-azure-template-security-policy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure-template","children":[]}]},{"label":"Calling","type":"page","href":"/en/sql-reference/external-functions-creating-azure-call","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/sql-reference/external-functions-creating-azure-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions-creating-azure","children":[]}]},{"label":"Security","type":"page","href":"/en/sql-reference/external-functions-security","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/sql-reference/external-functions","children":[]}]},{"label":"Kafka and Spark Connectors","type":"page","href":"/en/user-guide/connectors","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Kafka Connector","type":"page","href":"/en/user-guide/kafka-connector","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/connectors","children":[{"label":"Overview","type":"page","href":"/en/user-guide/kafka-connector-overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]},{"label":"Install","type":"page","href":"/en/user-guide/kafka-connector-install","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]},{"label":"Manage","type":"page","href":"/en/user-guide/kafka-connector-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]},{"label":"Monitor","type":"page","href":"/en/user-guide/kafka-connector-monitor","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]},{"label":"Protobuf","type":"page","href":"/en/user-guide/kafka-connector-protobuf","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/kafka-connector-ts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/kafka-connector","children":[]}]},{"label":"Spark Connector","type":"page","href":"/en/user-guide/spark-connector","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/connectors","children":[{"label":"Overview","type":"page","href":"/en/user-guide/spark-connector-overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/spark-connector","children":[]},{"label":"Install","type":"page","href":"/en/user-guide/spark-connector-install","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/spark-connector","children":[]},{"label":"Configure","type":"page","href":"/en/user-guide/spark-connector-databricks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/spark-connector","children":[]},{"label":"Qubole","type":"page","href":"/en/user-guide/spark-connector-qubole","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/spark-connector","children":[]},{"label":"Usage","type":"page","href":"/en/user-guide/spark-connector-use","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/spark-connector","children":[]}]}]},{"type":"category","depth":0,"label":"Snowflake Scripting"},{"label":"Snowflake Scripting Developer Guide","type":"page","href":"/en/developer-guide/snowflake-scripting/index","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Blocks","type":"page","href":"/en/developer-guide/snowflake-scripting/blocks","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Variables","type":"page","href":"/en/developer-guide/snowflake-scripting/variables","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Returning a value","type":"page","href":"/en/developer-guide/snowflake-scripting/return","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Conditional logic","type":"page","href":"/en/developer-guide/snowflake-scripting/branch","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Loops","type":"page","href":"/en/developer-guide/snowflake-scripting/loops","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Cursors","type":"page","href":"/en/developer-guide/snowflake-scripting/cursors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"RESULTSETs","type":"page","href":"/en/developer-guide/snowflake-scripting/resultsets","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Exceptions","type":"page","href":"/en/developer-guide/snowflake-scripting/exceptions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Affected rows","type":"page","href":"/en/developer-guide/snowflake-scripting/dml-status","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Getting a query ID","type":"page","href":"/en/developer-guide/snowflake-scripting/query-id","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Examples for common use cases","type":"page","href":"/en/developer-guide/snowflake-scripting/use-cases","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]},{"label":"Using Snowflake Scripting in SnowSQL or the Classic Console","type":"page","href":"/en/developer-guide/snowflake-scripting/running-examples","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-scripting/index","children":[]}]},{"type":"category","depth":0,"label":"Tools"},{"label":"Snowflake CLI","type":"page","href":"/en/developer-guide/snowflake-cli-v2/index","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Introduction","type":"page","href":"/en/developer-guide/snowflake-cli-v2/introduction/introduction","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[]},{"label":"Installing Snowflake CLI","type":"page","href":"/en/developer-guide/snowflake-cli-v2/installation/installation","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[]},{"label":"Connecting to Snowflake","type":"page","href":"/en/developer-guide/snowflake-cli-v2/connecting/connect","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Specify Snowflake credentials","type":"page","href":"/en/developer-guide/snowflake-cli-v2/connecting/specify-credentials","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/connecting/connect","children":[]},{"label":"Manage connections","type":"page","href":"/en/developer-guide/snowflake-cli-v2/connecting/manage-connections","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/connecting/connect","children":[]},{"label":"Configure logging","type":"page","href":"/en/developer-guide/snowflake-cli-v2/connecting/configure-logging","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/connecting/connect","children":[]}]},{"label":"Project definition files","type":"page","href":"/en/developer-guide/snowflake-cli-v2/project-definitions/about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[]},{"label":"Working with Snowflake objects","type":"page","href":"/en/developer-guide/snowflake-cli-v2/objects/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Manage Snowflake objects","type":"page","href":"/en/developer-guide/snowflake-cli-v2/objects/manage-objects","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/objects/overview","children":[]},{"label":"Manage Snowflake stages","type":"page","href":"/en/developer-guide/snowflake-cli-v2/objects/manage-stages","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/objects/overview","children":[]}]},{"label":"Managing Container Services","type":"page","href":"/en/developer-guide/snowflake-cli-v2/services/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Work with image registries and repositories","type":"page","href":"/en/developer-guide/snowflake-cli-v2/services/manage-images","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/services/overview","children":[]},{"label":"Manage compute pools","type":"page","href":"/en/developer-guide/snowflake-cli-v2/services/manage-compute-pools","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/services/overview","children":[]},{"label":"Manage services","type":"page","href":"/en/developer-guide/snowflake-cli-v2/services/manage-services","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/services/overview","children":[]}]},{"label":"Using Snowpark APIs","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Initialize a project","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/initialize","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Create a project definition","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/create","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Build artificats","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/build","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Deploy Snowflake objects","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/deploy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Execute functions and procedures","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/execute","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Reuse Snowpark packages","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/reuse","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]},{"label":"Manage functions and procedures","type":"page","href":"/en/developer-guide/snowflake-cli-v2/snowpark/manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/snowpark/overview","children":[]}]},{"label":"Working with Streamlit in Snowflake","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Create a Streamlit app locally","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/manage-apps/initialize-app","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","children":[]},{"label":"Deploy a Streamlit app","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/manage-apps/deploy-app","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","children":[]},{"label":"Retrieve a Streamlit app URL","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/manage-apps/get-url","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","children":[]},{"label":"Share a Streamlit app","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/manage-apps/share-app","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","children":[]},{"label":"Manage Streamlit apps","type":"page","href":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/manage-apps/manage-app","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/streamlit-apps/overview","children":[]}]},{"label":"Using Snowflake Native Apps","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"About projects","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/about-projects","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/overview","children":[]},{"label":"About project definitions","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/project-definitions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/overview","children":[]},{"label":"Create templates","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/create-templates","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/overview","children":[]},{"label":"Create and manage objects","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/overview","children":[{"label":"Create a project","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/initiate-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"Create and install a package","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/create-package","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"Create a versioned package","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/create-app-package-version","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"List package versions","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/list-app-package-version","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"Open an app","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/open-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"Drop a package version","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/drop-app-package-version","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]},{"label":"Drop an object","type":"page","href":"/en/developer-guide/snowflake-cli-v2/native-apps/drop-objects","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/native-apps/create-manage-apps","children":[]}]}]},{"label":"Executing SQL","type":"page","href":"/en/developer-guide/snowflake-cli-v2/sql/execute-sql","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[]},{"label":"Command reference","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/index","children":[{"label":"Connection commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"connection add","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/add-connection","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/overview","children":[]},{"label":"connection list","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/list-connections","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/overview","children":[]},{"label":"connection set-default","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/set-default-connection","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/overview","children":[]},{"label":"connection test","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/test-connection","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/connection-commands/overview","children":[]}]},{"label":"Snowflake Native App commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"app init","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/init-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","children":[]},{"label":"app open","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/open-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","children":[]},{"label":"app run","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/run-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","children":[]},{"label":"app teardown","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/teardown-app","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","children":[]},{"label":"app version commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/overview","children":[{"label":"app version create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/app-version-create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/overview","children":[]},{"label":"app version drop","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/app-version-drop","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/overview","children":[]},{"label":"app version list","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/app-version-list","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/native-apps-commands/version/overview","children":[]}]}]},{"label":"Snowflake object commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"object describe","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/describe","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/overview","children":[]},{"label":"object drop","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/drop","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/overview","children":[]},{"label":"object list","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/list","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/overview","children":[]},{"label":"object stage commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/overview","children":[{"label":"object stage copy","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/copy","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/overview","children":[]},{"label":"object stage create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/overview","children":[]},{"label":"object stage list","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/list","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/overview","children":[]},{"label":"object stage remove","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/remove","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/object-commands/stage/overview","children":[]}]}]},{"label":"Snowpark commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"snowpark build","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/build","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","children":[]},{"label":"snowpark deploy","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/deploy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","children":[]},{"label":"snowpark execute","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/execute","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","children":[]},{"label":"snowpark init","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/init","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","children":[]},{"label":"snowpark package commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/overview","children":[{"label":"snowpark package create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/overview","children":[]},{"label":"snowpark package lookup","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/lookup","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/overview","children":[]},{"label":"snowpark package upload","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/upload","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/snowpark-commands/package-commands/overview","children":[]}]}]},{"label":"Snowpark Container Services (spcs) commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"spcs compute-pool commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/overview","children":[{"label":"spcs compute-pool create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]},{"label":"spcs compute-pool resume","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/resume","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]},{"label":"spcs compute-pool set","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/set","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]},{"label":"spcs compute-pool stop-all","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/stop-all","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]},{"label":"spcs compute-pool suspend","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/suspend","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]},{"label":"spcs compute-pool unset","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/unset","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/compute-pool-commands/overview","children":[]}]},{"label":"spcs image-registry commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/overview","children":[{"label":"spcs image-registry login","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/login","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/overview","children":[]},{"label":"spcs image-registry token","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/token","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/overview","children":[]},{"label":"spcs image-registry url","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/url","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-registry-commands/overview","children":[]}]},{"label":"spcs image-repository commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/overview","children":[{"label":"spcs image-repository create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/overview","children":[]},{"label":"spcs image-repository list-tags","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/list-tags","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/overview","children":[]},{"label":"spcs image-repository list-images","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/list-images","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/overview","children":[]},{"label":"spcs image-repository url","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/url","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/image-repository-commands/overview","children":[]}]},{"label":"spcs service commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/overview","children":[{"label":"spcs service create","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/create","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service list-endpoints","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/list-endpoints","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service logs","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/logs","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service resume","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/resume","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service set","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/set","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service status","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/status","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service suspend","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/suspend","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service unset","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/unset","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]},{"label":"spcs service upgrade","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/upgrade","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/spcs-commands/service-commands/overview","children":[]}]}]},{"label":"SQL commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/sql-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"sql","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/sql-commands/sql","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/sql-commands/overview","children":[]}]},{"label":"Streamlit commands","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/overview","children":[{"label":"streamlit deploy","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/streamlit-deploy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/overview","children":[]},{"label":"streamlit get-url","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/streamlit-get-url","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/overview","children":[]},{"label":"streamlit init","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/streamlit-init","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/overview","children":[]},{"label":"streamlit share","type":"page","href":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/streamlit-share","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/snowflake-cli-v2/command-reference/streamlit-commands/overview","children":[]}]}]}]},{"label":"Git","type":"page","href":"/en/developer-guide/git/git-overview","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Setting up","type":"page","href":"/en/developer-guide/git/git-setting-up","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/git/git-overview","children":[]},{"label":"Operations in Snowflake","type":"page","href":"/en/developer-guide/git/git-operations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/git/git-overview","children":[]},{"label":"Examples","type":"page","href":"/en/developer-guide/git/git-examples","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/git/git-overview","children":[]},{"label":"Limitations","type":"page","href":"/en/developer-guide/git/git-limitations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/git/git-overview","children":[]}]},{"type":"category","depth":0,"label":"Drivers"},{"label":"Overview","type":"page","href":"/en/developer-guide/drivers","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[{"label":"Go","type":"page","href":"/en/developer-guide/golang/go-driver","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[]},{"label":"JDBC","type":"page","href":"/en/developer-guide/jdbc/jdbc","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[{"label":"Requirements","type":"page","href":"/en/developer-guide/jdbc/java-install","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"Download","type":"page","href":"/en/developer-guide/jdbc/jdbc-download","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"Configure","type":"page","href":"/en/developer-guide/jdbc/jdbc-configure","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"Using","type":"page","href":"/en/developer-guide/jdbc/jdbc-using","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"Diagnostic service","type":"page","href":"/en/developer-guide/jdbc/jdbc-diagnostic-service","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"Parameter reference","type":"page","href":"/en/developer-guide/jdbc/jdbc-parameters","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]},{"label":"API support","type":"page","href":"/en/developer-guide/jdbc/jdbc-api","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/jdbc/jdbc","children":[]}]},{"label":".NET","type":"page","href":"/en/developer-guide/dotnet/dotnet-driver","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[]},{"label":"Node.js","type":"page","href":"/en/developer-guide/node-js/nodejs-driver","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[{"label":"Install","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-install","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Connect","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-connect","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Authenticate","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-authenticate","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Execute SQL","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-execute","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Consume results","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-consume","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Configure logging","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-logs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]},{"label":"Options reference","type":"page","href":"/en/developer-guide/node-js/nodejs-driver-options","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/node-js/nodejs-driver","children":[]}]},{"label":"ODBC","type":"page","href":"/en/developer-guide/odbc/odbc","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[{"label":"Download","type":"page","href":"/en/developer-guide/odbc/odbc-download","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Installing for Windows","type":"page","href":"/en/developer-guide/odbc/odbc-windows","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Installing for Mac","type":"page","href":"/en/developer-guide/odbc/odbc-mac","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Installing for Linux","type":"page","href":"/en/developer-guide/odbc/odbc-linux","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Configuration","type":"page","href":"/en/developer-guide/odbc/odbc-parameters","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"API support","type":"page","href":"/en/developer-guide/odbc/odbc-api","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Using","type":"page","href":"/en/developer-guide/odbc/odbc-using","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]},{"label":"Diagnostic service","type":"page","href":"/en/developer-guide/odbc/odbc-diagnostic-service","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/odbc/odbc","children":[]}]},{"label":"PHP","type":"page","href":"/en/developer-guide/php-pdo/php-pdo-driver","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[]},{"label":"Python","type":"page","href":"/en/developer-guide/python-connector/python-connector","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/drivers","children":[{"label":"Installing","type":"page","href":"/en/developer-guide/python-connector/python-connector-install","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"Connecting","type":"page","href":"/en/developer-guide/python-connector/python-connector-connect","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"Using","type":"page","href":"/en/developer-guide/python-connector/python-connector-example","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"pandas DataFrames","type":"page","href":"/en/developer-guide/python-connector/python-connector-pandas","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"Distributing workloads","type":"page","href":"/en/developer-guide/python-connector/python-connector-distributed-fetch","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"Usage with SQLAlchemy","type":"page","href":"/en/developer-guide/python-connector/sqlalchemy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"API","type":"page","href":"/en/developer-guide/python-connector/python-connector-api","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]},{"label":"Dependency management policy","type":"page","href":"/en/developer-guide/python-connector/python-connector-dependencies","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/python-connector/python-connector","children":[]}]}]},{"type":"category","depth":0,"label":"Reference"},{"label":"API Reference","type":"alias","href":"/en/api-reference","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/developer","children":[]}]},"categories":[],"activeNodeParent":{"label":"Stored Procedures","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-overview","active":false,"depth":1,"isInitiallyOpen":true,"parentRef":"/en/developer-guide/extensibility","children":[{"label":"Usage","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-usage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Caller and Owner Rights","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-rights","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Creating","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-creating-sql","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Calling","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-calling","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Passing in References","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-calling-references","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"type":"category","depth":2,"label":"Handler Writing"},{"label":"Java","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-java","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Javascript","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-javascript","active":true,"depth":2,"isInitiallyOpen":true,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[{"label":"API","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-api","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-javascript","children":[]}]},{"label":"Python","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-python","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Scala","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-scala","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]},{"label":"Snowflake Scripting","type":"page","href":"/en/developer-guide/stored-procedure/stored-procedures-snowflake-scripting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/developer-guide/stored-procedure/stored-procedures-overview","children":[]}]},"snowsightDomain":"https://app.snowflake.com","_nextI18Next":{"initialI18nStore":{"en":{"common":{}}},"initialLocale":"en","ns":["common"],"userConfig":{"i18n":{"defaultLocale":"en","locales":["en","fr","de","ja","ko","pt"]},"default":{"i18n":{"defaultLocale":"en","locales":["en","fr","de","ja","ko","pt"]}}}}},"__N_SSP":true},"page":"/[...path]","query":{"path":["developer-guide","stored-procedure","stored-procedures-javascript"]},"buildId":"ICZ5MtOK9ZoGg60IkLaJy","isFallback":false,"dynamicIds":[4304],"gssp":true,"customServer":true,"locale":"en","locales":["en","fr","de","ja","ko","pt"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>