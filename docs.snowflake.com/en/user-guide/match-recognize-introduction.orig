<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Identifying Sequences of Rows That Match a Pattern | Snowflake Documentation</title><link rel="canonical" href="https://docs.snowflake.com/en/user-guide/match-recognize-introduction"/><meta name="next-head-count" content="4"/><script src="/scripts/darkmode.js"></script><link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIHdpZHRoPSIxNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxjbGlwUGF0aCBpZD0iYSI+PHBhdGggZD0ibTAgMGgxNTB2MTUwaC0xNTB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Im0xNTAgMGgtMTUwdjE1MGgxNTB6IiBmaWxsPSIjMjliNWU4Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtMTMwLjM3NSA2Ny4yNTMyLTE0LjA5NiA4LjEyMjEgMTQuMDk2IDguMDUzNmMuODQzLjQ4NzIgMS41ODEgMS4xMzU3IDIuMTc0IDEuOTA4NC41OTIuNzcyNyAxLjAyNiAxLjY1NDUgMS4yNzggMi41OTUxLjI1MS45NDA2LjMxNSAxLjkyMTUuMTg4IDIuODg2Ny0uMTI4Ljk2NTItLjQ0NCAxLjg5NTktLjkzMSAyLjczODgtLjQ4OC44NDMtMS4xMzYgMS41ODE3LTEuOTA5IDIuMTc0cy0xLjY1NCAxLjAyNjctMi41OTUgMS4yNzgyLTEuOTIxLjMxNTQtMi44ODcuMTg3OGMtLjk2NS0uMTI3NS0xLjg5Ni0uNDQ0LTIuNzM5LS45MzEybC0yNS4yNTU5LTE0LjU0OTZjLTEuMTU3NS0uNjY5Ni0yLjExMjgtMS42Mzk0LTIuNzY1LTIuODA2OC0uNjUyMy0xLjE2NzQtLjk3NzMtMi40ODkzLS45NDA4LTMuODI2LjAxOTgtLjU3OTIuMTA4OS0xLjE1MzguMjY1My0xLjcxMTcuNTE3LTEuODcxMSAxLjc0NTgtMy40NjU0IDMuNDIzNC00LjQ0MTlsMjUuMjU2LTE0LjQ5ODNjLjg0Ny0uNDg5MiAxLjc4Mi0uODA2NyAyLjc1MS0uOTM0My45Ny0uMTI3NSAxLjk1NS0uMDYyNyAyLjg5OS4xOTA5Ljk0NS4yNTM2IDEuODMuNjkwOSAyLjYwNSAxLjI4Ny43NzUuNTk2IDEuNDI1IDEuMzM5MSAxLjkxMyAyLjE4NjYuNDkuODQwMi44MDggMS43NjkzLjkzNSAyLjczMzQuMTI4Ljk2NC4wNjMgMS45NDM5LS4xOTEgMi44ODI2LS4yNTQuOTM4OC0uNjkyIDEuODE3Ny0xLjI4OCAyLjU4NTktLjU5Ny43NjgxLTEuMzQgMS40MTAxLTIuMTg2IDEuODg4N3ptLTEzLjM0MyAzOS4zNjk4LTI1LjI0NzgtMTQuNTI0M2MtMS4xMjk2LS42NDgzLTIuNDA5MS0uOTg5Ni0zLjcxMTUtLjk5MDJzLTIuNTgyMy4zMzk3LTMuNzEyNC45ODdjLTEuMTMwMS42NDcyLTIuMDcxMiAxLjU3OS0yLjcyOTcgMi43MDI2LS42NTg1IDEuMTIzNy0xLjAxMTUgMi40MDAxLTEuMDIzOSAzLjcwMjR2MjkuMDEzNWMuMDY1NCAxLjkyOC44NzcyIDMuNzU1IDIuMjY0IDUuMDk1IDEuMzg2OSAxLjM0MSAzLjI0MDMgMi4wOSA1LjE2OTEgMi4wOSAxLjkyODkgMCAzLjc4MjMtLjc0OSA1LjE2OTEtMi4wOSAxLjM4NjgtMS4zNCAyLjE5ODYtMy4xNjcgMi4yNjQtNS4wOTV2LTE2LjI2MWwxNC4xMzAxIDguMTIyYy44NDMuNDg4IDEuNzc0LjgwNSAyLjczOS45MzMuOTY2LjEyOCAxLjk0Ny4wNjQgMi44ODgtLjE4N3MxLjgyMy0uNjg1IDIuNTk2LTEuMjc3Yy43NzQtLjU5MiAxLjQyMy0xLjMzMSAxLjkxLTIuMTc0LjQ4OC0uODQzLjgwNS0xLjc3My45MzMtMi43MzkuMTI4LS45NjUuMDY1LTEuOTQ2LS4xODYtMi44ODdzLS42ODUtMS44MjQtMS4yNzctMi41OTctMS4zMzEtMS40MjItMi4xNzQtMS45MXptLTI5LjA5OTItMjguMzgwNi0xMC41MjcgMTAuMzk4NmMtLjM2MDEuMzM0OS0uODI2OS41MzE5LTEuMzE4LjU1NjNoLTMuMDg5N2MtLjQ5LS4wMjk0LS45NTUxLS4yMjU3LTEuMzE4LS41NTYzbC0xMC40NjcxLTEwLjQzMjljLS4zMjc0LS4zNTczLS41MjEtLjgxNy0uNTQ3OC0xLjMwMDl2LTMuMDgxYy4wMjgzLS40ODYxLjIyMTUtLjk0ODEuNTQ3OC0xLjMwOTVsMTAuNDY3MS0xMC40MzI5Yy4zNjM3LS4zMjgxLjgyOS0uNTIxNCAxLjMxOC0uNTQ3N2gzLjA4OTdjLjQ4OTkuMDIyOC45NTYyLjIxNjYgMS4zMTguNTQ3N2wxMC40OTI4IDEwLjQzMjljLjMyMzcuMzYyMy41MTQuODI0My41MzkyIDEuMzA5NXYzLjA4MWMtLjAyMzcuNDgzLS4yMTQzLjk0MjgtLjUzOTIgMS4zMDA5em0tOC4zODc0LTIuODkyOGMtLjA0MDQtLjQ5OS0uMjQ4NS0uOTY5Ni0uNTkwNS0xLjMzNTJsLTMuMDM4My0zLjAwNGMtLjM2NDEtLjMyNzUtLjgyOTEtLjUyMDctMS4zMTgtLjU0NzhoLS4xMTEzYy0uNDg2Ny4wMjU1LS45NDk1LjIxOTEtMS4zMDk0LjU0NzhsLTMuMDM4MyAzLjAwNGMtLjMyNjIuMzY3Ni0uNTE2NS44MzU4LS41MzkyIDEuMzI2NnYuMTExM2MuMDIxNS40ODM0LjIxMjQuOTQzOS41MzkyIDEuMzAwOWwzLjA1NTQgMi45OTU1Yy4zNjA3LjMyNzQuODIzLjUyMDggMS4zMDk0LjU0NzdoLjExMTNjLjQ4ODktLjAyNy45NTM5LS4yMjAzIDEuMzE4LS41NDc3bDMuMDM4My0zLjAyMTJjLjMyODItLjM1NzYuNTI0NC0uODE2Ni41NTYzLTEuMzAwOXptLTQ3LjQ5MTQtMzEuMjIxNyAyNS4yNTYzIDE0LjQ4MTFjMS4xMzA4LjY0OCAyLjQxMTUuOTg5IDMuNzE0OS45ODg5IDEuMzAzMyAwIDIuNTg0LS4zNDA5IDMuNzE0OC0uOTg5IDEuMTMwOS0uNjQ4IDIuMDcyNS0xLjU4MDYgMi43MzE0LTIuNzA1MS42NTktMS4xMjQ1IDEuMDEyMy0yLjQwMTggMS4wMjQ5LTMuNzA1MXYtMjguOTg3OWMtLjA2NTQtMS45Mjc3LS44NzcyLTMuNzU0Ni0yLjI2NC01LjA5NTJzLTMuMjQwMi0yLjA4OTktNS4xNjkxLTIuMDg5OWMtMS45Mjg4IDAtMy43ODIyLjc0OTMtNS4xNjkgMi4wODk5LTEuMzg2OSAxLjM0MDYtMi4xOTg3IDMuMTY3NS0yLjI2NDEgNS4wOTUydjE2LjI2MTNsLTE0LjE0NzMtOC4xMzA3Yy0uODQyOS0uNDg3Ny0xLjc3MzctLjgwNDctMi43MzkyLS45MzI4LS45NjU0LS4xMjgxLTEuOTQ2Ni0uMDY0Ny0yLjg4NzYuMTg2NHMtMS44MjMyLjY4NTItMi41OTY1IDEuMjc3M2MtLjc3MzIuNTkyMS0xLjQyMjIgMS4zMzA3LTEuOTEgMi4xNzM2LS40ODc4Ljg0My0uODA0OCAxLjc3MzgtLjkzMjkgMi43MzkyLS4xMjguOTY1NS0uMDY0NyAxLjk0NjcuMTg2NCAyLjg4NzYuMjUxMi45NDEuNjg1MiAxLjgyMzMgMS4yNzczIDIuNTk2NS41OTIxLjc3MzMgMS4zMzA3IDEuNDIyMyAyLjE3MzcgMS45MTAxem01NS40MjUyIDE1LjQ3MzljMS40OTE0LjExOCAyLjk4MzYtLjIxOTMgNC4yNzkzLS45NjcxbDI1LjI0NzUtMTQuNTQ5NmMuODQzLS40ODc3IDEuNTgyLTEuMTM2OCAyLjE3NC0xLjkxczEuMDI2LTEuNjU1NSAxLjI3Ny0yLjU5NjUuMzE1LTEuOTIyMi4xODctMi44ODc2Yy0uMTI4LS45NjU1LS40NDUtMS44OTYyLS45MzMtMi43MzkyLS40ODgtLjg0MjktMS4xMzctMS41ODE2LTEuOTEtMi4xNzM3LS43NzQtLjU5MjEtMS42NTYtMS4wMjYxLTIuNTk3LTEuMjc3Mi0xLjktLjUwNzItMy45MjQtLjIzODctNS42MjcuNzQ2NGwtMTQuMTI5OCA4LjE5OTF2LTE2LjI2MTNjLS4wNjU0LTEuOTI3Ny0uODc3Mi0zLjc1NDYtMi4yNjQtNS4wOTUyLTEuMzg2OC0xLjM0MDUtMy4yNDAyLTIuMDg5OS01LjE2OTEtMi4wODk5LTEuOTI4OCAwLTMuNzgyMi43NDk0LTUuMTY5IDIuMDg5OS0xLjM4NjkgMS4zNDA2LTIuMTk4NyAzLjE2NzUtMi4yNjQxIDUuMDk1MnYyOS4wMTM2Yy0uMDAyMyAxLjg3ODQuNzA4NiAzLjY4NzYgMS45ODkyIDUuMDYxOSAxLjI4MDUgMS4zNzQzIDMuMDM1MSAyLjIxMTEgNC45MDkgMi4zNDEyem0tMjUuODU1NCAzMS41Mjk4Yy0xLjQ5MTYtLjEyMTMtMi45ODQ3LjIxNjItNC4yNzkzLjk2NzFsLTI1LjI5MDUgMTQuNDg5M2MtMS43MDI0Ljk4NS0yLjk0MzggMi42MDctMy40NTEgNC41MDdzLS4yMzg3IDMuOTI0Ljc0NjUgNS42MjdjLjk4NTEgMS43MDIgMi42MDYxIDIuOTQzIDQuNTA2NSAzLjQ1MSAxLjkwMDQuNTA3IDMuOTI0NC4yMzggNS42MjY4LS43NDdsMTQuMTQ3My04LjEyMnYxNi4yNjFjLjA2NTQgMS45MjguODc3MiAzLjc1NSAyLjI2NDEgNS4wOTYgMS4zODY4IDEuMzQgMy4yNDAyIDIuMDkgNS4xNjkgMi4wOSAxLjkyODkgMCAzLjc4MjMtLjc1IDUuMTY5MS0yLjA5IDEuMzg2OC0xLjM0MSAyLjE5ODYtMy4xNjggMi4yNjQtNS4wOTZ2LTI5LjA2NDVjLS4wMDM4LTEuODY5LS43MTQ0LTMuNjY3My0xLjk4OTEtNS4wMzQxcy0zLjAxOTItMi4yMDA5LTQuODgzNC0yLjMzNDh6bS02Ljg0NjgtMTMuNTgyNWMuNDg3NS0xLjYwMzIuNDE0LTMuMzI0Ny0uMjA4My00Ljg4MDYtLjYyMjQtMS41NTU5LTEuNzU2NC0yLjg1MzItMy4yMTUyLTMuNjc3OWwtMjUuMjMwNi0xNC41NDFjLTEuNzA0LS45NzYtMy43MjQ4LTEuMjM4NS01LjYyMTYtLjczMDMtMS44OTY4LjUwODMtMy41MTU1IDEuNzQ2MS00LjUwMzIgMy40NDMzLS40ODg5Ljg0LS44MDY1IDEuNzY4Ni0uOTM0MyAyLjczMi0uMTI3OC45NjM1LS4wNjMyIDEuOTQyOC4xODk5IDIuODgxMS4yNTMxLjkzODQuNjg5NyAxLjgxNzMgMS4yODQ2IDIuNTg1OC41OTUuNzY4NiAxLjMzNjQgMS40MTE1IDIuMTgxNCAxLjg5MTdsMTQuMDk2IDguMTIyMS0xNC4wOTYgOC4wNTM2Yy0uODQyOS40ODYxLTEuNTgxOSAxLjEzMzQtMi4xNzQ2IDEuOTA1MS0uNTkyOC43NzE3LTEuMDI3NyAxLjY1MjYtMS4yODAxIDIuNTkyMy0uMjUyMy45Mzk4LS4zMTcgMS45MjAxLS4xOTA1IDIuODg0OXMuNDQxOCAxLjg5NTIuOTI3OSAyLjczODJjLjQ4NjEuODQyOSAxLjEzMzUgMS41ODE5IDEuOTA1MSAyLjE3NDYuNzcxNy41OTI4IDEuNjUyNiAxLjAyNzcgMi41OTI0IDEuMjgwMS45Mzk3LjI1MjMgMS45Mi4zMTcgMi44ODQ4LjE5MDVzMS44OTUyLS40NDE4IDIuNzM4Mi0uOTI3OWwyNS4yMzA2LTE0LjU0OTZjMS42MjQ4LS45MDcxIDIuODQ1MS0yLjM5NjUgMy40MTQ5LTQuMTY4eiIgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvc3ZnPg=="/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"/><link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/1c3ff358e360dad7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1c3ff358e360dad7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/304.8a0d80134255b6de.js"></script><script src="/_next/static/chunks/webpack-48a9d1c9a83eec21.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fd514f7d9ee4d3f2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-103500770c0400fb.js" defer=""></script><script src="/_next/static/chunks/314-3c486869a31a6ad8.js" defer=""></script><script src="/_next/static/chunks/141-52e6bd64aca8e746.js" defer=""></script><script src="/_next/static/chunks/144-6b784825890c7a2f.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-9731655fe727f940.js" defer=""></script><script src="/_next/static/ICZ5MtOK9ZoGg60IkLaJy/_buildManifest.js" defer=""></script><script src="/_next/static/ICZ5MtOK9ZoGg60IkLaJy/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap&subset=latin">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="h-full relative overflow-y-hidden flex flex-col"><nav id="masthead" class="print:hidden flex flex-col"><div class="flex items-center justify-between w-full px-6 border-b py-2"><a href="https://docs.snowflake.com" class="flex flex-1 my-2 items-center "><svg xmlns="http://www.w3.org/2000/svg" width="102" height="24" viewBox="0 0 102 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M62.6792 7.50872L62.6761 7.50679C62.6761 7.50679 62.6747 7.50562 62.6729 7.50562C62.6038 7.47437 62.5284 7.45813 62.4562 7.45813C62.3386 7.45898 62.2259 7.49541 62.1277 7.55931C62.0276 7.62524 61.9428 7.72138 61.8943 7.84166V7.84463L59.6011 14.3663L57.8338 9.99498L57.8311 9.9931C57.7813 9.87089 57.6924 9.77644 57.5915 9.7107C57.4896 9.64477 57.372 9.60849 57.2482 9.60849C57.1279 9.60849 57.0157 9.64769 56.917 9.71155C56.8191 9.77733 56.7312 9.87089 56.6818 9.9931L56.6805 9.99498L54.9096 14.3691L52.6043 7.85032H52.6025C52.5625 7.7243 52.4804 7.62609 52.383 7.56119C52.2843 7.49541 52.1685 7.45898 52.0491 7.45813C51.9728 7.45813 51.8961 7.47437 51.8229 7.50562H51.8198L51.8171 7.50872C51.6021 7.61282 51.4707 7.83597 51.4702 8.07917C51.4702 8.15564 51.4846 8.23178 51.5128 8.30722L54.3477 16.22V16.2227C54.3697 16.2818 54.4011 16.3401 54.4469 16.3974C54.4801 16.4383 54.529 16.4728 54.5793 16.5015C54.5887 16.5108 54.6031 16.5241 54.6251 16.5384C54.6489 16.5538 54.6794 16.5645 54.7103 16.57C54.7611 16.5875 54.8279 16.6128 54.9177 16.6128C55.0326 16.6128 55.1389 16.57 55.2345 16.5061C55.3238 16.4442 55.4037 16.3515 55.4477 16.2314L55.4549 16.2257L57.2482 11.7711L59.0437 16.2075H59.0455C59.0868 16.3258 59.1595 16.4185 59.2439 16.4843C59.3332 16.5538 59.4328 16.5968 59.5387 16.6128H59.6141C59.6854 16.6128 59.7555 16.5987 59.8138 16.5748C59.8753 16.5502 59.9251 16.5175 59.9664 16.4853C60.0629 16.4088 60.1369 16.3039 60.1831 16.1874V16.1848L63.0005 8.30722C63.0284 8.23178 63.0427 8.15654 63.0427 8.08039C63.0418 7.83893 62.9049 7.609 62.6792 7.50872ZM49.7164 12.0261C49.7164 11.0969 49.3731 10.2553 48.8269 9.64769C48.2776 9.03889 47.534 8.66675 46.7262 8.66675C45.9184 8.66675 45.173 9.03889 44.6249 9.64769C44.0776 10.2553 43.7343 11.0969 43.7343 12.0261C43.7343 12.9544 44.0776 13.7881 44.6249 14.3919C45.173 14.9979 45.9184 15.3642 46.7262 15.3642C47.534 15.3642 48.2803 14.9979 48.8269 14.3919C49.3731 13.7881 49.7164 12.9544 49.7164 12.0261ZM49.7007 8.80035C50.4591 9.63611 50.92 10.7829 50.9218 12.0261C50.92 13.2692 50.4591 14.4148 49.7007 15.2507C48.9481 16.0853 47.8971 16.613 46.728 16.613C45.5684 16.613 44.5156 16.0853 43.7602 15.2507C43.0036 14.4148 42.5353 13.2692 42.5353 12.0261C42.5353 10.7829 43.0036 9.63611 43.7602 8.80035C44.5156 7.96646 45.5684 7.43898 46.728 7.43898C47.8971 7.43898 48.9481 7.96646 49.7007 8.80035ZM37.7615 7.45522C36.8213 7.45522 35.9631 7.83597 35.3223 8.44355V8.08039C35.3213 7.91333 35.2617 7.75762 35.1569 7.64317C35.0552 7.53065 34.9044 7.45522 34.7393 7.45522C34.5683 7.45522 34.4142 7.52665 34.3069 7.64213C34.2013 7.75573 34.138 7.91333 34.138 8.08039V16.1771L34.1627 16.2027L34.1637 16.2067C34.1702 16.2334 34.1865 16.2629 34.2039 16.2914C34.2857 16.4412 34.4197 16.5548 34.5858 16.6052L34.6097 16.613H34.7393C34.8257 16.613 34.9127 16.594 34.9954 16.5538C35.0643 16.5195 35.1285 16.4642 35.1799 16.3936L35.1818 16.3945C35.1881 16.3879 35.1901 16.3793 35.1974 16.3727C35.2002 16.3717 35.2029 16.3688 35.2047 16.3658C35.2367 16.323 35.2635 16.2792 35.2801 16.2381C35.2976 16.1894 35.3085 16.1435 35.3168 16.1083L35.3223 16.0853V11.2236C35.3397 10.5282 35.6151 9.89955 36.0568 9.44246C36.4955 8.98571 37.0967 8.70317 37.7615 8.70317C38.4373 8.70317 39.0403 8.98571 39.4773 9.44246C39.9161 9.8978 40.1824 10.5254 40.1824 11.2171V15.9911C40.1824 16.1654 40.2539 16.3268 40.3624 16.4375C40.4734 16.5479 40.6248 16.613 40.7828 16.613C40.9434 16.613 41.0941 16.5479 41.2042 16.4375C41.3162 16.3268 41.3841 16.1654 41.3841 15.9911V11.2171C41.3841 9.15644 39.7646 7.45813 37.7615 7.45522ZM96.9417 11.1406C96.6001 9.701 95.384 8.6754 93.9959 8.67832C92.5729 8.67832 91.3728 9.68204 91.0013 11.1406H96.9417ZM98.257 11.7304V11.7922C98.257 11.965 98.183 12.1205 98.0703 12.2227C97.9581 12.3256 97.8123 12.3791 97.6552 12.381H90.9178C91.0892 14.0894 92.4019 15.351 93.969 15.3642H94.3666C94.8849 15.3661 95.3903 15.18 95.8345 14.8719C96.2797 14.5667 96.6643 14.1402 96.9354 13.6707C96.991 13.5706 97.0714 13.4943 97.1584 13.4475C97.2473 13.397 97.3429 13.374 97.4394 13.374C97.5457 13.374 97.6512 13.4027 97.7441 13.4608L97.7504 13.4637L97.758 13.4694C97.9267 13.5982 98.0326 13.7948 98.0326 14.0106C98.0326 14.1202 98.0048 14.2318 97.9469 14.3328L97.9451 14.3368L97.9433 14.3385C97.5668 14.9608 97.0534 15.5283 96.444 15.9396C95.8336 16.3517 95.1259 16.613 94.3666 16.613H93.9627C92.7802 16.6043 91.7117 16.0853 90.9411 15.2554C90.1728 14.4283 89.6994 13.292 89.6994 12.0434C89.6994 10.7734 90.1769 9.62096 90.9514 8.78708C91.7265 7.95423 92.8031 7.43898 93.9959 7.43898C95.134 7.43898 96.1568 7.90933 96.9143 8.67936C97.6718 9.44919 98.1664 10.5185 98.2548 11.7216L98.257 11.7304ZM70.6211 3.67057C70.4569 3.67057 70.3065 3.74221 70.1984 3.85475C70.0898 3.96643 70.0211 4.12384 70.0211 4.29455V15.9911C70.0211 16.1618 70.0898 16.3182 70.1984 16.429C70.3065 16.5395 70.4569 16.613 70.6211 16.613C70.9618 16.613 71.2373 16.3344 71.2391 15.9911V4.29455C71.2373 3.9502 70.9618 3.67057 70.6211 3.67057ZM31.36 11.8027C30.8751 11.5652 30.3252 11.3897 29.7764 11.2008C29.2714 11.0234 28.759 10.8725 28.3936 10.6742C28.2101 10.572 28.0669 10.4643 27.9742 10.3431C27.8795 10.2221 27.8337 10.0989 27.8309 9.93093C27.8319 9.701 27.8961 9.51597 28.0044 9.35183C28.1687 9.10675 28.4441 8.91583 28.7452 8.79258C29.0427 8.669 29.365 8.61065 29.5954 8.61065C30.2765 8.61169 30.7072 8.84731 31.0378 9.09136C31.201 9.21461 31.3389 9.33941 31.4693 9.44246C31.5362 9.49597 31.5987 9.54463 31.6712 9.58072C31.7399 9.61611 31.8207 9.64477 31.909 9.64477C31.9649 9.64477 32.0211 9.63423 32.0722 9.61145C32.1263 9.58868 32.1734 9.55602 32.2184 9.51597C32.2624 9.47319 32.3001 9.42157 32.3267 9.36425C32.3506 9.30505 32.3615 9.24411 32.3615 9.18406C32.3615 9.07324 32.3275 8.96933 32.2788 8.87183C32.188 8.70025 32.0483 8.53625 31.8704 8.37211C31.606 8.12788 31.2572 7.89503 30.8816 7.71964C30.5051 7.54411 30.1013 7.42468 29.7166 7.42468C28.8251 7.42468 28.0807 7.63456 27.5398 8.02119C27.258 8.22331 27.0102 8.44458 26.8349 8.74995C26.6567 9.05616 26.5575 9.43399 26.5447 9.92524C26.5439 9.94717 26.5439 9.9691 26.5439 9.99103C26.5421 10.4681 26.6897 10.8613 26.922 11.1692C27.2746 11.6331 27.798 11.9106 28.3112 12.1072C28.8235 12.3036 29.3356 12.421 29.6588 12.5336C30.114 12.691 30.5979 12.8617 30.9504 13.0878C31.1259 13.2033 31.2681 13.3274 31.3646 13.4637C31.4583 13.6041 31.5113 13.7489 31.5133 13.9322V13.9457C31.5123 14.2108 31.4372 14.4188 31.3131 14.5971C31.1259 14.8624 30.8147 15.0569 30.484 15.18C30.1546 15.3003 29.8121 15.351 29.5917 15.351C28.8142 15.351 28.2938 15.1562 27.9164 14.9608C27.7272 14.8624 27.5739 14.7651 27.4352 14.6829C27.3664 14.6439 27.3022 14.6076 27.2342 14.579C27.1681 14.5505 27.0975 14.532 27.0177 14.532C26.969 14.532 26.9158 14.5408 26.867 14.5607C26.8175 14.5827 26.7725 14.6133 26.7347 14.6504C26.6825 14.7033 26.6366 14.7621 26.6046 14.8299C26.5733 14.8978 26.5575 14.9692 26.5575 15.0436C26.5575 15.1659 26.6015 15.2775 26.6642 15.3785C26.7623 15.5243 26.9065 15.6552 27.0864 15.7859C27.2717 15.9146 27.4932 16.0417 27.7483 16.1667C28.3139 16.4442 29.0391 16.5892 29.59 16.5987H29.5917C30.4484 16.5987 31.1882 16.3936 31.8116 15.9167V15.9155H31.8124C32.422 15.4386 32.8012 14.7297 32.8012 13.9293C32.8012 13.4895 32.7021 13.1164 32.5287 12.8113C32.267 12.3485 31.8418 12.0434 31.36 11.8027ZM79.6751 12.0261C79.6751 11.0881 79.3345 10.2477 78.7901 9.64115C78.2462 9.03616 77.5004 8.669 76.6841 8.66693C75.874 8.66693 75.1309 9.03616 74.5816 9.64115C74.0363 10.2477 73.6912 11.0881 73.6912 12.0261C73.6912 12.963 74.0363 13.7979 74.5816 14.3996C75.1277 15.0017 75.874 15.3642 76.6841 15.3642C77.5022 15.3642 78.2485 15.0017 78.7919 14.4017C79.3345 13.7979 79.6751 12.9639 79.6751 12.0261ZM80.6961 7.61282C80.8069 7.7243 80.8756 7.88571 80.8756 8.06002V15.9911C80.8756 16.1618 80.8056 16.3182 80.6997 16.429C80.5911 16.5395 80.4416 16.613 80.2765 16.613C80.1113 16.613 79.9597 16.5395 79.8533 16.429C79.7447 16.3182 79.6751 16.1618 79.6751 15.9911V15.2173C78.9194 16.0655 77.8581 16.613 76.6841 16.613C75.5155 16.613 74.4631 16.0912 73.7096 15.2554C72.953 14.4236 72.4903 13.2777 72.4903 12.0261C72.4903 10.7745 72.953 9.6275 73.7096 8.79484C74.4631 7.95992 75.5155 7.43898 76.6841 7.43898C77.8576 7.43898 78.9194 7.9706 79.6751 8.8147V8.06002C79.6751 7.88571 79.7438 7.7243 79.8551 7.61282C79.9659 7.50303 80.1158 7.43898 80.2765 7.43898C80.4354 7.43898 80.5866 7.50303 80.6961 7.61282ZM89.1725 8.417C89.2919 8.2939 89.3565 8.1306 89.3565 7.96853C89.3565 7.80924 89.2919 7.64976 89.1712 7.53428H89.1725C89.1712 7.53065 89.1685 7.53065 89.1685 7.53065C89.168 7.52769 89.1658 7.52665 89.1658 7.52665H89.164C89.0482 7.40844 88.8997 7.34355 88.7462 7.34355C88.5914 7.34355 88.4397 7.41065 88.3239 7.53065L83.6302 12.2846V4.29455C83.6302 3.9502 83.3528 3.67057 83.0122 3.67057C82.848 3.67057 82.6976 3.74221 82.5899 3.85475C82.4831 3.96643 82.4117 4.12384 82.4117 4.29455V15.9911C82.4117 16.1618 82.4831 16.3182 82.5899 16.429C82.6976 16.5395 82.848 16.613 83.0122 16.613C83.3528 16.613 83.6302 16.3344 83.6302 15.9911V14.061L85.1587 12.4745L88.2745 16.3812C88.3333 16.4709 88.4132 16.5327 88.4922 16.5653C88.5819 16.6007 88.6694 16.613 88.7471 16.613C88.8548 16.613 89.006 16.5892 89.1393 16.4804L89.1469 16.4758L89.1546 16.467C89.2793 16.3392 89.3502 16.1694 89.3502 15.9957C89.3502 15.8497 89.2982 15.7009 89.2017 15.5819V15.5799L86.0298 11.5728L89.1694 8.417H89.1725ZM68.1444 3.69837H68.0102C67.9927 3.69837 67.9756 3.70026 67.9572 3.70095C67.9406 3.70026 67.9231 3.69837 67.9056 3.69837C67.5596 3.69837 67.2235 3.73927 66.9093 3.84802C66.6001 3.95486 66.3147 4.13144 66.0935 4.3995L66.0926 4.39847L66.0917 4.3995V4.40037C65.8633 4.66463 65.7125 4.98049 65.6209 5.33936C65.5289 5.69992 65.4912 6.10628 65.4876 6.56802V7.46209H64.5389C64.2095 7.46402 63.9479 7.73776 63.9479 8.06882C63.9461 8.24712 64.013 8.41131 64.1216 8.52971C64.2306 8.64604 64.3801 8.72232 64.5465 8.73183H65.4876V16.0063L65.4863 16.0234C65.4863 16.1941 65.5554 16.3515 65.6667 16.4642C65.7766 16.5748 65.931 16.6406 66.0989 16.6406C66.4184 16.6389 66.6809 16.3679 66.6818 16.0234V8.73183H67.7019C67.8661 8.72232 68.0178 8.6507 68.126 8.53522C68.2373 8.41992 68.305 8.25785 68.305 8.08213V8.05846C68.3014 7.73103 68.038 7.46209 67.7082 7.46209H66.6818V6.57178C66.6885 6.1779 66.7276 5.88308 66.7846 5.66853C66.8398 5.45277 66.9152 5.31729 66.9829 5.23338C67.0494 5.15898 67.1355 5.09686 67.276 5.04712C67.4173 4.99969 67.6126 4.9691 67.8773 4.9691H67.9083C67.924 4.9691 67.9406 4.96618 67.9554 4.96618C67.9738 4.96618 67.9909 4.9691 68.0102 4.9691H68.0874H68.1444C68.4827 4.9691 68.756 4.68483 68.756 4.33357C68.756 3.98265 68.4827 3.69837 68.1444 3.69837ZM7.67882 12.439C7.72747 12.2796 7.74775 12.1155 7.74407 11.9534C7.73846 11.836 7.72383 11.7188 7.69174 11.6015C7.59526 11.2371 7.3667 10.9115 7.02419 10.7063L2.153 7.78336C1.46535 7.37202 0.588678 7.61658 0.194023 8.33018C-0.20445 9.0427 0.0305809 9.95268 0.718234 10.3651L3.44027 12.0011L0.718234 13.6325C0.0305809 14.0456 -0.20362 14.9558 0.194023 15.6713C0.588678 16.3829 1.46535 16.6263 2.153 16.215L7.02419 13.2901C7.35292 13.0935 7.576 12.7852 7.67882 12.439ZM9.00081 15.1781C8.72091 15.1532 8.42993 15.2143 8.16816 15.3728L3.29328 18.2938C2.60745 18.706 2.37325 19.6209 2.76907 20.3347C3.16671 21.0465 4.04255 21.2916 4.72737 20.8775L7.45856 19.2403V22.5117C7.45856 23.336 8.10021 24.0038 8.89432 24.0038C9.68461 24.0038 10.3283 23.336 10.3283 22.5117V16.6634C10.3283 15.8782 9.74259 15.2333 9.00081 15.1781ZM13.9931 8.82209C14.2721 8.84609 14.5623 8.78411 14.8241 8.62755L19.6979 5.70373C20.3848 5.29136 20.6178 4.38034 20.223 3.6647C19.8273 2.95235 18.9507 2.70793 18.2648 3.11995L15.5355 4.75903V1.48654C15.5355 0.664582 14.8938 -0.00341797 14.0997 -0.00341797C13.3056 -0.00341797 12.6656 0.664582 12.6656 1.48654V7.33489C12.6656 8.11922 13.2496 8.76515 13.9931 8.82209ZM3.29328 5.70373L8.16816 8.62755C8.42993 8.78411 8.72091 8.84609 9.00081 8.82209C9.74259 8.76515 10.3283 8.11922 10.3283 7.33489V1.48654C10.3283 0.664582 9.68461 -0.00341797 8.89432 -0.00341797C8.10021 -0.00341797 7.45856 0.664582 7.45856 1.48654V4.75903L4.72737 3.11995C4.04255 2.70793 3.16671 2.95235 2.76907 3.6647C2.37325 4.38034 2.60745 5.29136 3.29328 5.70373ZM12.4545 11.9888C12.4545 11.9039 12.405 11.7855 12.3472 11.7227L11.7605 11.1157C11.7027 11.0558 11.5888 11.0061 11.5069 11.0061H11.4841C11.4024 11.0061 11.2887 11.0558 11.2317 11.1157L10.645 11.7227C10.5862 11.7855 10.5412 11.9039 10.5412 11.9888V12.0126C10.5412 12.0965 10.5862 12.2139 10.645 12.275L11.2317 12.8836C11.2895 12.9437 11.4024 12.9932 11.4841 12.9932H11.5069C11.5888 12.9932 11.7027 12.9437 11.7605 12.8836L12.3472 12.275C12.405 12.2139 12.4545 12.0965 12.4545 12.0126V11.9888ZM14.074 12.5725L12.0479 14.6755C11.9899 14.7372 11.878 14.7878 11.7936 14.7878H11.6466H11.3473H11.1978C11.1159 14.7878 11.0021 14.7372 10.9433 14.6755L8.91824 12.5725C8.86026 12.5133 8.81345 12.3942 8.81345 12.3102V12.1547V11.8436V11.6902C8.81345 11.6042 8.86026 11.485 8.91824 11.4249L10.9433 9.32213C11.0021 9.2602 11.1159 9.2115 11.1978 9.2115H11.3473H11.6466H11.7936C11.8761 9.2115 11.9899 9.2602 12.0479 9.32213L14.074 11.4249C14.1318 11.485 14.1786 11.6042 14.1786 11.6902V11.8436V12.1547V12.3102C14.1786 12.3942 14.1318 12.5133 14.074 12.5725ZM19.6979 18.2938L14.8241 15.3728C14.5623 15.2143 14.2721 15.1532 13.9931 15.1781C13.2496 15.2333 12.6656 15.8782 12.6656 16.6634V22.5117C12.6656 23.336 13.3056 24.0038 14.0997 24.0038C14.8938 24.0038 15.5355 23.336 15.5355 22.5117V19.2403L18.2648 20.8775C18.9505 21.2916 19.8273 21.0465 20.223 20.3347C20.6178 19.6209 20.3848 18.706 19.6979 18.2938ZM22.275 10.3651L19.5528 12.0011L22.275 13.6325C22.9625 14.0456 23.1975 14.9558 22.8 15.6713C22.4034 16.3829 21.5259 16.6263 20.8409 16.215L15.966 13.2901C15.6409 13.0935 15.4153 12.7852 15.3151 12.439C15.2674 12.2796 15.2453 12.1155 15.2508 11.9534C15.2536 11.836 15.2701 11.7188 15.3013 11.6015C15.3988 11.2371 15.6273 10.9117 15.966 10.7063L20.8409 7.78336C21.5259 7.37202 22.4034 7.61658 22.8 8.33018C23.1975 9.0427 22.9625 9.95268 22.275 10.3651ZM101.327 7.44726C101.327 8.26731 100.799 8.95173 99.9166 8.95173C99.0401 8.95173 98.5182 8.26077 98.5182 7.44726C98.5182 6.62722 99.0401 5.94265 99.9166 5.94265C100.799 5.94265 101.327 6.62722 101.327 7.44726ZM101.047 7.44726C101.047 6.74995 100.6 6.2202 99.9166 6.2202C99.2452 6.2202 98.7978 6.72388 98.7978 7.44726C98.7978 8.13804 99.2452 8.67399 99.9166 8.67399C100.6 8.67399 101.047 8.14463 101.047 7.44726ZM99.3632 6.7691H99.966C100.295 6.7691 100.513 6.95635 100.513 7.24689C100.513 7.42778 100.426 7.56326 100.295 7.64731L100.531 8.00237V8.07348H100.19L99.9597 7.73122H99.6926V8.07348H99.3632V6.7691ZM99.9597 7.08566H99.6926V7.42778H99.9597C100.084 7.42778 100.165 7.36957 100.165 7.25997C100.165 7.14364 100.09 7.08566 99.9597 7.08566Z" fill="#29B5E8"></path></svg><span class="ml-[14px] text-[12px] font-extrabold tracking-[.72px] text-primary">DOCUMENTATION</span></a><div class="flex justify-end items-center md:max-w-[440px] flex-1 gap-6"><div class="flex items-center lg:hidden"><div class="mr-4"><button type="button" class="rounded-lg ui-icon flex align-center" aria-label="Search"><svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="scale-110 fill-black-10 dark:fill-gray-50 dark:stroke-gray-50 shrink-0"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.50157 7.50472C2.50157 4.74156 4.74156 2.50157 7.50472 2.50157C10.2679 2.50157 12.5079 4.74156 12.5079 7.50472C12.5079 10.2679 10.2679 12.5079 7.50472 12.5079C4.74156 12.5079 2.50157 10.2679 2.50157 7.50472ZM7.50472 0C3.35998 0 0 3.35998 0 7.50472C0 11.6495 3.35998 15.0094 7.50472 15.0094C9.02874 15.0094 10.4467 14.5552 11.6305 13.7746L16.5548 18.6989C17.0432 19.1874 17.8352 19.1874 18.3237 18.6989C18.8121 18.2105 18.8121 17.4185 18.3237 16.9301L13.4625 12.0689C14.4328 10.8043 15.0094 9.22184 15.0094 7.50472C15.0094 3.35998 11.6495 0 7.50472 0Z" fill="#5D6A85"></path></svg></button></div><div><button type="button" class="rounded-lg ui-icon flex align-center" aria-label="Search"><svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="scale-110 fill-black-10 dark:fill-gray-50 dark:stroke-gray-50 shrink-0"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.25 0C0.559644 0 0 0.559644 0 1.25C0 1.94036 0.559644 2.5 1.25 2.5H18.75C19.4404 2.5 20 1.94036 20 1.25C20 0.559644 19.4404 0 18.75 0H1.25ZM1.25 5C0.559644 5 0 5.55964 0 6.25C0 6.94036 0.559644 7.5 1.25 7.5H18.75C19.4404 7.5 20 6.94036 20 6.25C20 5.55964 19.4404 5 18.75 5H1.25ZM0 11.25C0 10.5596 0.559644 10 1.25 10H18.75C19.4404 10 20 10.5596 20 11.25C20 11.9404 19.4404 12.5 18.75 12.5H1.25C0.559644 12.5 0 11.9404 0 11.25ZM1.25 15C0.559644 15 0 15.5596 0 16.25C0 16.9404 0.559644 17.5 1.25 17.5H10C10.6904 17.5 11.25 16.9404 11.25 16.25C11.25 15.5596 10.6904 15 10 15H1.25Z" fill="#5D6A85"></path></svg></button></div></div><div class="relative border h-full rounded-md items-center px-3 gap-2 w-full bg-gray-10 dark:bg-gray-85 hover:border-gray-50 hidden lg:flex" role="search"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="none" class="fill-black-10 dark:fill-gray-50 stroke-black-10 dark:stroke-gray-50 shrink-0 m-0 h-3 w-3"><circle cx="4.5" cy="4.5" r="4" fill="none"></circle><path d="M7.85355 7.14645C7.65829 6.95118 7.34171 6.95118 7.14645 7.14645C6.95118 7.34171 6.95118 7.65829 7.14645 7.85355L7.85355 7.14645ZM10.682 11.3891L11.0355 11.7426L11.7426 11.0355L11.3891 10.682L10.682 11.3891ZM7.14645 7.85355L10.682 11.3891L11.3891 10.682L7.85355 7.14645L7.14645 7.85355Z" stroke="none"></path></svg><input autoComplete="off" name="q" placeholder="Search" role="searchbox" class="outline-none w-full bg-gray-10 dark:bg-gray-85 placeholder:text-secondary pr-3 py-2 text-sm"/><span class="text-secondary text-xs font-normal font-mono leading-none px-1.5 py-1 bg-level-3 hidden sm:inline-flex rounded border border-slate-300 ">/</span></div><div class="w-12 shrink-0 hidden lg:block"></div></div></div><div class="hidden lg:flex border-b gap-3 pl-6"><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/user-guide-getting-started" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Getting Started<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/guides" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link text-link">Guides<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2 bg-blue-50 dark:bg-blue-30"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/developer" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Developer<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/reference" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Reference<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/release-notes/new-features" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Releases<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="/en/tutorials" target="" rel="" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Tutorials<!-- --></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div><div class="flex flex-col mt-2 gap-2 justify-between"><a href="https://status.snowflake.com" target="_blank" rel="noreferrer" class="flex items-center whitespace-nowrap p-2 hover:bg-level-3 rounded-md text-masthead-link">Status<!-- --><span class="ml-[10px]"><span class=""><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-question" class="svg-inline--fa fa-circle-question " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"></path></svg></span></span></a><div class="h-[3px] rounded-tl-[5px] rounded-tr-[5px] mx-2"></div></div></div></nav><div class="grid h-full auto-rows-auto relative overflow-y-hidden"><main class="flex overflow-y-hidden"><aside class="flex-none hidden lg:block overflow-y-auto bg-lightgray border-r pb-8 scroll-bar w-80 scroll-bar-stable" data-testid="toc-wrapper"><div class="pt-6 pl-1"><nav id="toc"><ol><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Overview"><span>Overview</span></a></div><ul></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-connecting" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Connecting to Snowflake"><span>Connecting to Snowflake</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/user-guide/warehouses" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Virtual warehouses"><span>Virtual warehouses</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-db" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Databases, Tables, &amp; Views"><span>Databases, Tables, &amp; Views</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/data-types" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Data Types"><span>Data Types</span></a></div><ul></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-loading-data" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Data Loading"><span>Data Loading</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-unloading-data" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Data Unloading"><span>Data Unloading</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-queries" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Queries"><span>Queries</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(90deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:auto;opacity:0"><div><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-joins" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Joins"><span>Joins</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-subqueries" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Subqueries"><span>Subqueries</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/queries-hierarchical" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Querying Hierarchical Data"><span>Querying Hierarchical Data</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/queries-cte" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Common Table Expressions (CTE)"><span>Common Table Expressions (CTE)</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-semistructured" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Querying Semi-structured Data"><span>Querying Semi-structured Data</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/functions-window-using" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Window Functions"><span>Window Functions</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center bg-highlight text-blue-60 dark:text-blue-30 pl-5" id="selected-item"><a href="/en/user-guide/match-recognize-introduction" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Match Recognize"><span>Match Recognize</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-sequences" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Sequences"><span>Sequences</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-persisted-results" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Persisted Query Results"><span>Persisted Query Results</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-distinct-counts" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Distinct Counts"><span>Distinct Counts</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-approximate-similarity" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Similarity Estimation"><span>Similarity Estimation</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-approximate-frequent-values" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Frequency Estimation"><span>Frequency Estimation</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-approximate-percentile-values" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Estimating Percentile Values"><span>Estimating Percentile Values</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/ui-snowsight-activity" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Monitor query activity with Query History"><span>Monitor query activity with Query History</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/ui-query-profile" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Query Profile"><span>Query Profile</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/query-hash" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Query Hash"><span>Query Hash</span></a></div><ul></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center pl-5"><a href="/en/user-guide/querying-cancel-statements" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Cancel Statements"><span>Cancel Statements</span></a></div><ul></ul></li></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/user-guide/snowflake-cortex/overview" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Snowflake Cortex"><span>Snowflake Cortex</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-sharing" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Data Sharing &amp; Collaboration"><span>Data Sharing &amp; Collaboration</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-alerts" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Alerts &amp; Notifications"><span>Alerts &amp; Notifications</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-secure" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Security"><span>Security</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-govern" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Data Governance"><span>Data Governance</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-privacy" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Privacy"><span>Privacy</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-manage" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Organizations &amp; Accounts"><span>Organizations &amp; Accounts</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/user-guide/replication-intro" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Business Continuity &amp; Data Recovery"><span>Business Continuity &amp; Data Recovery</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="border-t pb-1 mt-1 mx-5"></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-performance" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Performance Optimization"><span>Performance Optimization</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li><li class="font-normal"><div class="px-3 text-sm rounded-md hover:bg-level-3 mx-5 flex justify-between items-center"><a href="/en/guides-overview-cost" class="w-full py-2 text-ellipsis overflow-hidden text-sm leading-4" title="Cost &amp; Billing"><span>Cost &amp; Billing</span></a><div class="w-5 h-5 cursor-pointer flex justify-center items-center select-none py-2" style="transform:rotate(0deg)"><svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 6.5L4.5 4L2 1.5" stroke="#8A96AD" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"></path></svg></div></div><ul><ol class="overflow-hidden" style="height:0;opacity:0"><div></div></ol></ul></li></ol></nav></div></aside><div class="w-full overflow-y-auto" id="scrolltarget"><div class="flex flex-col-reverse xl:flex-row xl:justify-between mx-auto pt-8 px-8 mb-12 max-w-[1175px]"><div class="w-full xl:w-9/12"><nav class="mb-2 flex space-x-4 text-sm flex-wrap"><a href="/en/guides" class="text-link hover:underline">Guides</a><span class="ui-icon mb-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg></span><a href="/en/guides-overview-queries" class="text-link hover:underline">Queries</a><span class="ui-icon mb-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg></span><span class="mb-2">Match Recognize</span></nav><article>


  
  <section id="identifying-sequences-of-rows-that-match-a-pattern">
<h1>Identifying Sequences of Rows That Match a Pattern<a class="headerlink" href="#identifying-sequences-of-rows-that-match-a-pattern" title="Link to this heading">¶</a></h1>


<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>In some cases, you might need to identify sequences of table rows that match a pattern. For example, you might need to:</p>
<ul class="simple">
<li><p>Determine which users followed a specific sequence of pages and actions on your website before opening a support ticket or
making a purchase.</p></li>
<li><p>Find the stocks with prices that followed a V-shaped or W-shaped recovery over a period of time.</p></li>
<li><p>Look for patterns in sensor data that might indicate an upcoming system failure.</p></li>
</ul>
<p>To identify sequences of rows that match a specific pattern, use the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> subclause of the
<a class="reference internal" href="../sql-reference/constructs/from"><span class="doc">FROM</span></a> clause.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use the MATCH_RECOGNIZE clause in a <strong>recursive</strong> <a class="reference internal" href="queries-cte"><span class="doc">common table expression (CTE)</span></a>.</p>
</div>
</section>
<section id="a-simple-example-that-identifies-a-sequence-of-rows">
<h2>A Simple Example That Identifies a Sequence of Rows<a class="headerlink" href="#a-simple-example-that-identifies-a-sequence-of-rows" title="Link to this heading">¶</a></h2>
<p>As an example, suppose that a table contains data about stock prices. Each row contains the closing price of each stock symbol on
a specific day. The table contains the following columns:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%">
<col style="width: 50.0%">
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">price_date</span></code></p></td>
<td><p>The date of the closing price.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">price</span></code></p></td>
<td><p>The closing stock price on that date.</p></td>
</tr>
</tbody>
</table>
<p>Suppose that you want to detect a pattern in which the stock price decreases and then increases, producing a “V” shape in the
graph of the stock price.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/match-recognize-stock-chart.png"><img alt="Chart of the Stock Price for &quot;ABCD&quot;" src="../_images/match-recognize-stock-chart.png" style="width: 660.0px; height: 435.0px;"></a>
</figure>
<p>(This example does not account for cases in which the stock price does not change from day to day.)</p>
<p>In this example, for a given stock symbol, you want to find sequences of rows where the value in the <code class="docutils literal notranslate"><span class="pre">price</span></code> column decreases
before increasing.</p>
<figure class="align-default" id="label-match-recognize-figure-overlapping-matches">
<a class="reference internal image-reference" href="../_images/match-recognize-row-sequences.png"><img alt="Sequence of rows that match the &quot;V&quot; pattern" src="../_images/match-recognize-row-sequences.png" style="width: 615.0px; height: 419.25px;"></a>
</figure>
<p>For each sequence of rows that matches this pattern, you want to return:</p>
<ul class="simple">
<li><p>A number that identifies the sequence (the first matching sequence, the second matching sequence, etc.).</p></li>
<li><p>The day before the stock price decreased.</p></li>
<li><p>The last day when the stock price increased.</p></li>
<li><p>The number of days in the “V” pattern.</p></li>
<li><p>The number of days when the stock price decreased.</p></li>
<li><p>The number of days when the stock price increased.</p></li>
</ul>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---------+--------------+------------+------------+------------------+---------------+---------------+
| COMPANY | MATCH_NUMBER | START_DATE | END_DATE   | ROWS_IN_SEQUENCE | NUM_DECREASES | NUM_INCREASES |
|---------+--------------+------------+------------+------------------+---------------+---------------|
| ABCD    |            1 | 2020-10-01 | 2020-10-04 |                4 |             1 |             2 |
| ABCD    |            2 | 2020-10-04 | 2020-10-08 |                5 |             1 |             3 |
+---------+--------------+------------+------------+------------------+---------------+---------------+
</pre></div>
</div><div data-codeblock-index="0" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>The following figure illustrates the price decreases (<code class="docutils literal notranslate"><span class="pre">NUM_DECREASES</span></code>) and increases (<code class="docutils literal notranslate"><span class="pre">NUM_INCREASES</span></code>) within the “V” pattern
that the returned data captures. Note that <code class="docutils literal notranslate"><span class="pre">ROWS_IN_SEQUENCE</span></code> includes an initial row that is not counted in <code class="docutils literal notranslate"><span class="pre">NUM_DECREASES</span></code>
or <code class="docutils literal notranslate"><span class="pre">NUM_INCREASES</span></code>.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/match-recognize-stock-chart-increases-decreases.png"><img alt="The number of price decreases and increases in each &quot;V&quot; pattern" src="../_images/match-recognize-stock-chart-increases-decreases.png" style="width: 660.0px; height: 503.25px;"></a>
</figure>
<p>To produce this output, you can use the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause shown below.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span> <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
  <span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
    <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
    <span class="ni">MEASURES</span>
      <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="nd">match_number</span><span class="p">,</span>
      <span class="ni">FIRST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="gi">start_date</span><span class="p">,</span>
      <span class="ni">LAST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="gi">end_date</span><span class="p">,</span>
      <span class="ni">COUNT</span><span class="p">(*)</span> <span class="ni">AS</span> <span class="gi">rows_in_sequence</span><span class="p">,</span>
      <span class="ni">COUNT</span><span class="p">(</span><span class="gi">row_with_price_decrease</span><span class="p">.*)</span> <span class="ni">AS</span> <span class="gi">num_decreases</span><span class="p">,</span>
      <span class="ni">COUNT</span><span class="p">(</span><span class="gi">row_with_price_increase</span><span class="p">.*)</span> <span class="ni">AS</span> <span class="gi">num_increases</span>
    <span class="ni">ONE</span> <span class="ni">ROW</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
    <span class="ni">AFTER</span> <span class="ni">MATCH</span> <span class="ni">SKIP</span> <span class="ni">TO</span> <span class="ni">LAST</span> <span class="gi">row_with_price_increase</span>
    <span class="ni">PATTERN</span><span class="p">(</span><span class="gi">row_before_decrease</span> <span class="gi">row_with_price_decrease</span><span class="p">+</span> <span class="gi">row_with_price_increase</span><span class="p">+)</span>
    <span class="ni">DEFINE</span>
      <span class="gi">row_with_price_decrease</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
      <span class="gi">row_with_price_increase</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
  <span class="p">)</span>
<span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">company</span><span class="p">,</span> <span class="nd">match_number</span><span class="p">;</span>
</pre></div>
</div><div data-codeblock-index="1" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>As shown above, the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause consists of many subclauses, each of which serves a different purpose (e.g.
specifying the pattern to match, specifying the data to return, etc.).</p>
<p>The next sections explain each of the subclauses in this example.</p>
<section id="setting-up-the-data-for-this-example">
<h3>Setting Up the Data For This Example<a class="headerlink" href="#setting-up-the-data-for-this-example" title="Link to this heading">¶</a></h3>
<p>To set up the data used in this example, run the following SQL statements:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">create</span> <span class="ni">table</span> <span class="gi">stock_price_history</span> <span class="p">(</span><span class="gi">company</span> <span class="ni">TEXT</span><span class="p">,</span> <span class="gi">price_date</span> <span class="ni">DATE</span><span class="p">,</span> <span class="gi">price</span> <span class="ni">INT</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="2" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">insert</span> <span class="ni">into</span> <span class="gi">stock_price_history</span> <span class="ni">values</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-01'</span><span class="p">,</span> <span class="gi">50</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-01'</span><span class="p">,</span> <span class="gi">89</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-02'</span><span class="p">,</span> <span class="gi">36</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-02'</span><span class="p">,</span> <span class="gi">24</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-03'</span><span class="p">,</span> <span class="gi">39</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-03'</span><span class="p">,</span> <span class="gi">37</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-04'</span><span class="p">,</span> <span class="gi">42</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-04'</span><span class="p">,</span> <span class="gi">63</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-05'</span><span class="p">,</span> <span class="gi">30</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-05'</span><span class="p">,</span> <span class="gi">65</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-06'</span><span class="p">,</span> <span class="gi">47</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-06'</span><span class="p">,</span> <span class="gi">56</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-07'</span><span class="p">,</span> <span class="gi">71</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-07'</span><span class="p">,</span> <span class="gi">50</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-08'</span><span class="p">,</span> <span class="gi">80</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-08'</span><span class="p">,</span> <span class="gi">54</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-09'</span><span class="p">,</span> <span class="gi">75</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-09'</span><span class="p">,</span> <span class="gi">30</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'ABCD'</span><span class="p">,</span> <span class="nc">'2020-10-10'</span><span class="p">,</span> <span class="gi">63</span><span class="p">),</span>
    <span class="p">(</span><span class="nc">'XYZ'</span> <span class="p">,</span> <span class="nc">'2020-10-10'</span><span class="p">,</span> <span class="gi">32</span><span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="3" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
<section id="step-1-specifying-the-order-and-grouping-of-rows">
<span id="label-match-recognize-introduction-example-partition-order"></span><h3>Step 1: Specifying the Order and Grouping of Rows<a class="headerlink" href="#step-1-specifying-the-order-and-grouping-of-rows" title="Link to this heading">¶</a></h3>
<p>The first step in identifying a sequence of rows is defining the grouping and sort order of the rows that you want to search. For
the example of finding a “V” pattern in the stock price for a company:</p>
<ul class="simple">
<li><p>The rows should be grouped by company, since you want to find a pattern in the price for a given company.</p></li>
<li><p>Within each group of rows (the prices for a given company), the rows should be sorted by date in ascending order.</p></li>
</ul>
<p>In a <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause, you use the <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> and <code class="code docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> subclauses to specify the grouping and
order of rows. For example:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
  <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="4" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
<section id="step-2-defining-the-pattern-to-match">
<h3>Step 2: Defining the Pattern to Match<a class="headerlink" href="#step-2-defining-the-pattern-to-match" title="Link to this heading">¶</a></h3>
<p>Next, determine the pattern that matches the sequence of rows that you want to find.</p>
<p>To specify this pattern, you use something similar to a <a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">regular expression</a>.
In regular expressions, you use a combination of literals and metacharacters to specify a pattern to match in a string.</p>
<p>For example, to find a sequence of characters that includes:</p>
<ul class="simple">
<li><p>any single character, followed by</p></li>
<li><p>one or more uppercase letters, followed by</p></li>
<li><p>one or more lowercase letters</p></li>
</ul>
<p>you can use the following Perl-compatible regular expression:</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.[A-Z]+[a-z]+
</pre></div>
</div><div data-codeblock-index="5" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> matches any single character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[A-Z]+</span></code> matches one or more uppercase letters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[a-z]+</span></code> matches one or more lowercase letters.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">+</span></code> is a <a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression#Basic_concepts">quantifier</a> that specifies that one or more of the
preceding characters need to match.</p>
<p>For example, the regular expression above matches sequences of characters like:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1Stock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">@SFComputing</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%Fn</span></code></p></li>
</ul>
<p>In a <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause, you use a similar expression to specify the pattern of rows to match. In this case, finding
rows that match a “V” pattern involves finding a sequence of rows that includes:</p>
<ul class="simple">
<li><p>the row before the stock price decreases, followed by</p></li>
<li><p>one or more rows where the stock price decreases, followed by</p></li>
<li><p>one or more rows where the stock price increases</p></li>
</ul>
<p>You can express this as the following row pattern:</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>row_before_decrease row_with_price_decrease+ row_with_price_increase+
</pre></div>
</div><div data-codeblock-index="6" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Row patterns consist of <em>pattern variables</em>, <a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-quantifiers"><span class="std std-ref">quantifiers</span></a> (which are similar to those
used in regular expressions), and <a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-operators"><span class="std std-ref">operators</span></a>. A pattern variable defines an expression
that is evaluated against a row.</p>
<p>In this row pattern:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code>, <code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code>, and <code class="docutils literal notranslate"><span class="pre">row_with_price_increase</span></code> are pattern variables. The expressions for
these pattern variables should evaluate to:</p>
<ul class="simple">
<li><p>any row (the row before the stock price decreases)</p></li>
<li><p>a row where the stock price decreases</p></li>
<li><p>a row where the stock price increases</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">.</span></code> in a regular expression. In the following regular expression, <code class="docutils literal notranslate"><span class="pre">.</span></code> matches any
single character that appears before the first uppercase letter in the pattern.</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.[A-Z]+[a-z]+
</pre></div>
</div><div data-codeblock-index="7" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Similarly, in the row pattern, <code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code> matches any single row that appears before the first row with a price
decrease.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> quantifiers after <code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code> and <code class="docutils literal notranslate"><span class="pre">row_with_price_increase</span></code> specify that one or more rows of each
of these must match.</p></li>
</ul>
<p>In a <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause, you use the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclause to specify the row pattern to match:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="p">...</span>
  <span class="ni">PATTERN</span><span class="p">(</span><span class="gi">row_before_decrease</span> <span class="gi">row_with_price_decrease</span><span class="p">+</span> <span class="gi">row_with_price_increase</span><span class="p">+)</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="8" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>To specify the expressions for the pattern variables, you use the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> subclause:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="p">...</span>
  <span class="ni">DEFINE</span>
    <span class="gi">row_with_price_decrease</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
    <span class="gi">row_with_price_increase</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="9" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code> does not need to be defined here because it should evaluate to any row.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code> is defined as an expression for a row with a price decrease.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_increase</span></code> is defined as an expression for a row with a price increase.</p></li>
</ul>
<p>To compare the prices in different rows, the definitions of these variables use the
<a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions"><span class="std std-ref">navigational function</span></a> <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code>  to specify price for the previous row.</p>
<p>The row pattern matches two sequences of rows, as illustrated below:</p>
<figure class="align-default" id="label-match-recognize-figure-first-matching-sequence">
<a class="reference internal image-reference" href="../_images/match-recognize-first-pattern-match.png"><img alt="First sequence of rows that match the &quot;V&quot; pattern" src="../_images/match-recognize-first-pattern-match.png" style="width: 720.0px; height: 419.25px;"></a>
</figure>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/match-recognize-second-pattern-match.png"><img alt="Second sequence of rows that match the &quot;V&quot; pattern" src="../_images/match-recognize-second-pattern-match.png" style="width: 720.0px; height: 419.25px;"></a>
</figure>
<p>For the first matching sequence of rows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code> matches the row with the stock price <code class="docutils literal notranslate"><span class="pre">50</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code> matches the next row with the stock price <code class="docutils literal notranslate"><span class="pre">36</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_increase</span></code> matches the next two rows with the stock prices <code class="docutils literal notranslate"><span class="pre">39</span></code> and <code class="docutils literal notranslate"><span class="pre">42</span></code>.</p></li>
</ul>
<p>For the second matching sequence of rows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">row_before_decrease</span></code> matches the row with the stock price <code class="docutils literal notranslate"><span class="pre">42</span></code>. (This is the same row that is at the end of the first
matching sequence of rows.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code> matches the next row with the stock price <code class="docutils literal notranslate"><span class="pre">30</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_with_price_increase</span></code> matches the next two rows with the stock prices <code class="docutils literal notranslate"><span class="pre">47</span></code>, <code class="docutils literal notranslate"><span class="pre">71</span></code>, and <code class="docutils literal notranslate"><span class="pre">80</span></code>.</p></li>
</ul>
</section>
<section id="step-3-specifying-the-rows-to-return">
<h3>Step 3: Specifying the Rows to Return<a class="headerlink" href="#step-3-specifying-the-rows-to-return" title="Link to this heading">¶</a></h3>
<p><code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> can either return:</p>
<ul class="simple">
<li><p>a single row that summarizes each matching sequence, or</p></li>
<li><p>each row in each matching sequence</p></li>
</ul>
<p>For this example, you want to return a summary of each matching sequence. Use the <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> subclause to specify
that one row should be returned for each matching sequence.</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="p">...</span>
  <span class="ni">ONE</span> <span class="ni">ROW</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="10" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</section>
<section id="step-4-specifying-the-measures-to-select">
<h3>Step 4: Specifying the Measures to Select<a class="headerlink" href="#step-4-specifying-the-measures-to-select" title="Link to this heading">¶</a></h3>
<p>When you use <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>, <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> does not return any of the columns in the table (except for the
column specified by <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code>), even when <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> is in a <code class="code docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code> statement. To specify the
data to be returned by this statement, you must define <em>measures</em>. Measures are additional columns of data that are calculated for
each matching sequence of rows (e.g. the starting date of the sequence, the ending date of the sequence, the number of days in the
sequence, etc.).</p>
<p>Use the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause to specify these additional columns to return in the output. The general format for defining a
measure is:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="gi">expression</span><span class="p">&gt;</span> <span class="ni">AS</span> <span class="p">&lt;</span><span class="gi">column_name</span><span class="p">&gt;</span>
</pre></div>
</div><div data-codeblock-index="11" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>where:</p>
<ul class="simple">
<li><p><code class="samp docutils literal notranslate"><em><span class="pre">expression</span></em></code> specifies the information about the sequence that you want to return. For the expression, you can use
functions with columns from the table and pattern variables that you defined earlier.</p></li>
<li><p><code class="samp docutils literal notranslate"><em><span class="pre">column_name</span></em></code> specifies the name of the column that will be returned in the output.</p></li>
</ul>
<p>For this example, you can define the following measures:</p>
<ul>
<li><p>A number that identifies the sequence (the first matching sequence, the second matching sequence, etc.).</p>
<p>For this measure, use the <code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code> function, which returns the number of the match. The numbers start with <code class="docutils literal notranslate"><span class="pre">1</span></code>
for the first match for a <a class="reference internal" href="#label-match-recognize-introduction-example-partition-order"><span class="std std-ref">partition</span></a> of rows. If there are
multiple partitions, the number starts with <code class="docutils literal notranslate"><span class="pre">1</span></code> for each partition.</p>
</li>
<li><p>The day before the stock price decreased.</p>
<p>For this measure, use the <code class="code docutils literal notranslate"><span class="pre">FIRST()</span></code> function, which returns the value of the expression for the first row in the matching
sequence. In this example, <code class="code docutils literal notranslate"><span class="pre">FIRST(price_date)</span></code> returns the value of the <code class="docutils literal notranslate"><span class="pre">price_date</span></code> column in the first row in each
matching sequence, which is the date before the stock price decreased.</p>
</li>
<li><p>The last day when the stock price increased.</p>
<p>For this measure, use the <code class="code docutils literal notranslate"><span class="pre">LAST()</span></code> function, which returns the value of the expression for the last row in the matching
sequence.</p>
</li>
<li><p>The number of days in the “V” pattern.</p>
<p>For this measure, use <code class="code docutils literal notranslate"><span class="pre">COUNT(*)</span></code>. Because you are specifying <code class="code docutils literal notranslate"><span class="pre">COUNT(*)</span></code> in the definition of a measure, the asterisk
(<code class="docutils literal notranslate"><span class="pre">*</span></code>) specifies that you want to count all of the rows in a matching sequence (not all of the rows in the table).</p>
</li>
<li><p>The number of days when the stock decreased.</p>
<p>For this measure, use <code class="code docutils literal notranslate"><span class="pre">COUNT(row_with_price_decrease.*)</span></code>. The period followed by an asterisk (<code class="docutils literal notranslate"><span class="pre">.*</span></code>) specifies that you
want to count all of the rows in a matching sequence that match the pattern variable <code class="docutils literal notranslate"><span class="pre">row_with_price_decrease</span></code>.</p>
</li>
<li><p>The number of days when the stock increased.</p>
<p>For this measure, use <code class="code docutils literal notranslate"><span class="pre">COUNT(row_with_price_increase.*)</span></code>.</p>
</li>
</ul>
<p>The following is the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause that defines the measures above:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="p">...</span>
  <span class="ni">MEASURES</span>
    <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="nd">match_number</span><span class="p">,</span>
    <span class="ni">FIRST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="gi">start_date</span><span class="p">,</span>
    <span class="ni">LAST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="gi">end_date</span><span class="p">,</span>
    <span class="ni">COUNT</span><span class="p">(*)</span> <span class="ni">AS</span> <span class="gi">num_matching_rows</span><span class="p">,</span>
    <span class="ni">COUNT</span><span class="p">(</span><span class="gi">row_with_price_decrease</span><span class="p">.*)</span> <span class="ni">AS</span> <span class="gi">num_decreases</span><span class="p">,</span>
    <span class="ni">COUNT</span><span class="p">(</span><span class="gi">row_with_price_increase</span><span class="p">.*)</span> <span class="ni">AS</span> <span class="gi">num_increases</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="12" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>The following shows an example of the output with the selected measures:</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---------+--------------+------------+------------+-------------------+---------------+---------------+
| COMPANY | MATCH_NUMBER | START_DATE | END_DATE   | NUM_MATCHING_ROWS | NUM_DECREASES | NUM_INCREASES |
|---------+--------------+------------+------------+-------------------+---------------+---------------|
| ABCD    |            1 | 2020-10-01 | 2020-10-04 |                 4 |             1 |             2 |
| ABCD    |            2 | 2020-10-04 | 2020-10-08 |                 5 |             1 |             3 |
+---------+--------------+------------+------------+-------------------+---------------+---------------+
</pre></div>
</div><div data-codeblock-index="13" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>As mentioned earlier, the output includes the <code class="docutils literal notranslate"><span class="pre">company</span></code> column because the <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> clause specifies that column.</p>
</section>
<section id="step-5-specifying-where-to-continue-finding-the-next-match">
<h3>Step 5: Specifying Where to Continue Finding the Next Match<a class="headerlink" href="#step-5-specifying-where-to-continue-finding-the-next-match" title="Link to this heading">¶</a></h3>
<p>After finding a matching sequence of rows, <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> continues to find the next matching sequence. You can specify
where <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> should start searching for the next matching sequence.</p>
<p>As shown in the <a class="reference internal" href="#label-match-recognize-figure-overlapping-matches"><span class="std std-ref">illustration of matching sequences</span></a>, a row can be part of
more than one matching sequence. In this example, the row for <code class="docutils literal notranslate"><span class="pre">2020-10-04</span></code> is part of two “V” patterns.</p>
<p>For this example, to find the next matching sequence, you can start from a row where the price increased. To specify this in the
<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause, use <code class="code docutils literal notranslate"><span class="pre">AFTER</span> <span class="pre">MATCH</span> <span class="pre">SKIP</span></code>:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span><span class="p">(</span>
  <span class="p">...</span>
  <span class="ni">AFTER</span> <span class="ni">MATCH</span> <span class="ni">SKIP</span> <span class="ni">TO</span> <span class="ni">LAST</span> <span class="gi">row_with_price_increase</span>
  <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="14" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>where <code class="docutils literal notranslate"><span class="pre">TO</span> <span class="pre">LAST</span> <span class="pre">row_with_price_increase</span></code> specifies that you want to start searching at
<a class="reference internal" href="#label-match-recognize-figure-first-matching-sequence"><span class="std std-ref">the last row where the price increased</span></a>.</p>
</section>
</section>
<section id="partitioning-and-sorting-the-rows">
<span id="label-match-recognize-introduction-partitioning-ordering"></span><h2>Partitioning and Sorting the Rows<a class="headerlink" href="#partitioning-and-sorting-the-rows" title="Link to this heading">¶</a></h2>
<p>The first step in identifying patterns across rows is putting the rows in an order that allows you to find your patterns. For
example, if you want to find a pattern of changes in stock prices over time for each company’s stock:</p>
<ul class="simple">
<li><p>Partition the rows by company, so that you can search across each company’s stock prices.</p></li>
<li><p>Sort the rows within each partition by date, so that you can find changes to a company’s stock price over time.</p></li>
</ul>
<p>To partition the data and specify the order of rows, use the <a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-partition-by"><span class="std std-ref">PARTITION BY</span></a> and
<a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-order-by"><span class="std std-ref">ORDER BY</span></a> subclauses in <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>. For example:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">...</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
        <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
            <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
            <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
            <span class="p">...</span>
        <span class="p">);</span>
</pre></div>
</div><div data-codeblock-index="15" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>(The <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> clause for <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> works the same way as the <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> clause for
<a class="reference internal" href="../sql-reference/functions-analytic"><span class="doc">window functions</span></a>.)</p>
<p>An additional benefit of partitioning is that it can take advantage of parallel processing.</p>
</section>
<section id="defining-the-pattern-of-rows-to-match">
<span id="label-match-recognize-introduction-defining-pattern"></span><h2>Defining the Pattern of Rows to Match<a class="headerlink" href="#defining-the-pattern-of-rows-to-match" title="Link to this heading">¶</a></h2>
<p>With <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>, you can find a sequence of rows that match a pattern. You specify this pattern in terms of rows that
match specific conditions.</p>
<p>In the example of the table of daily stock prices for different companies, suppose that you want to find a sequence of three rows
in which:</p>
<ul class="simple">
<li><p>On a given day, the stock price for a company is less than 45.00.</p></li>
<li><p>On the next day, the stock price decreases by at least 10%.</p></li>
<li><p>On the following day, the stock price increases by at least 3%.</p></li>
</ul>
<p>To find this sequence, you specify a pattern that matches three rows with the following conditions:</p>
<ul class="simple">
<li><p>In the first row in the sequence, the value of the <code class="docutils literal notranslate"><span class="pre">price</span></code> column must be less than 45.00.</p></li>
<li><p>In the second row, the value of the <code class="docutils literal notranslate"><span class="pre">price</span></code> column must be less than or equal to 90% of the value of the previous row.</p></li>
<li><p>In the third row, the value of the <code class="docutils literal notranslate"><span class="pre">price</span></code> column must be greater than or equal to 105% of the value of the previous row.</p></li>
</ul>
<p>The second and third rows have conditions that require a comparison between column values in different rows. To compare the value
in one row against the value in the previous or next row, use the functions <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code> or <code class="code docutils literal notranslate"><span class="pre">LEAD()</span></code>:</p>
<ul class="simple">
<li><p><code class="samp docutils literal notranslate"><span class="pre">LAG(</span><em><span class="pre">column</span></em><span class="pre">)</span></code> returns the value of <code class="samp docutils literal notranslate"><em><span class="pre">column</span></em></code> in the previous row.</p></li>
<li><p><code class="samp docutils literal notranslate"><span class="pre">LEAD(</span><em><span class="pre">column</span></em><span class="pre">)</span></code> returns the value of <code class="samp docutils literal notranslate"><em><span class="pre">column</span></em></code> in the next row.</p></li>
</ul>
<p>For this example, you can specify the conditions for the three rows as:</p>
<ul class="simple">
<li><p>The first row in the sequence must have <code class="docutils literal notranslate"><span class="pre">price</span> <span class="pre">&lt;</span> <span class="pre">45.00</span></code>.</p></li>
<li><p>The second row must have <code class="docutils literal notranslate"><span class="pre">LAG(price)</span> <span class="pre">*</span> <span class="pre">0.90</span> <span class="pre">&gt;=</span> <span class="pre">price</span></code>.</p></li>
<li><p>The third row must have <code class="docutils literal notranslate"><span class="pre">LAG(price)</span> <span class="pre">*</span> <span class="pre">1.05</span> <span class="pre">&lt;=</span> <span class="pre">price</span></code>.</p></li>
</ul>
<p>When specifying the pattern for the sequence of these three rows, you use a pattern variable for each row that has a different
condition. Use the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> subclause to define each pattern variable as a row that must meet a specified condition. The
following example defines three pattern variables for the three rows:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">define</span>
    <span class="gi">low_priced_stock</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
    <span class="gi">decreased_10_percent</span> <span class="ni">as</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
    <span class="gi">increased_05_percent</span> <span class="ni">as</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
</pre></div>
</div><div data-codeblock-index="16" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>To define the pattern itself, use the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclause. In this subclause, use a regular expression to specify the
pattern to match. For the building blocks of the expression, use the pattern variables that you defined. For example, the
following pattern finds the sequence of three rows:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">pattern</span> <span class="p">(</span> <span class="gi">low_priced_stock</span>  <span class="gi">decreased_10_percent</span>  <span class="gi">increased_05_percent</span> <span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="17" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>The SQL statement below uses the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> and <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclauses shown above:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">DECREASED_10_PERCENT</span> <span class="gi">INCREASED_05_PERCENT</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">DECREASED_10_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
               <span class="gi">INCREASED_05_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE |</span>
<span class="no">|---------+------------+-------|</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |</span>
<span class="no">| ABCD    | 2020-10-05 |    30 |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
</pre></div>
</div><div data-codeblock-index="18" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The next sections explain how to define patterns that match specific numbers of rows and rows that appear at the beginning or end
of a partition.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#label-match-recognize-introduction-pattern-variable-quantifiers"><span class="std std-ref">Using Quantifiers With Pattern Variables</span></a></p></li>
<li><p><a class="reference internal" href="#label-match-recognize-introduction-search-start-or-end-partition"><span class="std std-ref">Matching Patterns Relative to the Beginning or End of a Partition</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MATCH_RECOGNIZE uses <a class="reference external" href="https://en.wikipedia.org/wiki/Backtracking">backtracking</a> to match patterns. As is the case with other
<a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression#Implementations_and_running_times">regular expression engines that use backtracking</a>,
some combinations of patterns and data to match can take a long time to execute, which can result in high computation costs.</p>
<p>To improve performance, define a pattern that is as specific as possible:</p>
<ul class="simple">
<li><p>Make sure that each row matches only one symbol or a small number of symbols</p></li>
<li><p>Avoid using symbols that match every row (e.g. symbols not in the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clause or symbols that are defined as true)</p></li>
<li><p>Define an upper limit for quantifiers (e.g. <code class="docutils literal notranslate"><span class="pre">{,10}</span></code> instead of <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p></li>
</ul>
<p>For example, the following pattern can result in increased costs if no rows match:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="gi">symbol1</span><span class="p">+</span> <span class="gi">any_symbol</span><span class="p">*</span> <span class="gi">symbol2</span>
</pre></div>
</div><div data-codeblock-index="19" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>If there is an upper limit to the number of rows that you want to match, you can specify that limit in the quantifiers to
improve performance. In addition, rather than specifying that you want to find <code class="docutils literal notranslate"><span class="pre">any_symbol</span></code> that follows <code class="docutils literal notranslate"><span class="pre">symbol1</span></code>, you can
look for a row that is not <code class="docutils literal notranslate"><span class="pre">symbol1</span></code>  (<code class="docutils literal notranslate"><span class="pre">not_symbol1</span></code>, in this example);</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="gi">symbol1</span><span class="p">{</span><span class="nf">1</span><span class="p">,</span><span class="ni">limit</span><span class="p">}</span> <span class="gi">not_symbol1</span><span class="p">{,</span><span class="ni">limit</span><span class="p">}</span> <span class="gi">symbol2</span>
</pre></div>
</div><div data-codeblock-index="20" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>In general, you should monitor the query execution time to verify that the query is not taking longer than expected.</p>
</div>
<section id="using-quantifiers-with-pattern-variables">
<span id="label-match-recognize-introduction-pattern-variable-quantifiers"></span><h3>Using Quantifiers With Pattern Variables<a class="headerlink" href="#using-quantifiers-with-pattern-variables" title="Link to this heading">¶</a></h3>
<p>In the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclause, you use a regular expression to specify a pattern of rows to match. You use pattern variables
to identify rows in the sequence that meet specific conditions.</p>
<p>If you need to match multiple rows that meet a specific condition, you can use a
<a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-quantifiers"><span class="std std-ref">quantifier</span></a>, as you would in a
<a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression#Basic_concepts">regular expression</a>.</p>
<p>For example, you can use the quantifier <code class="docutils literal notranslate"><span class="pre">+</span></code> to specify that pattern must include one or more rows in which the stock price
decreases by 10%, followed by one or more rows in which the stock price increases by 5%:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">pattern</span> <span class="p">(</span><span class="gi">decreased_10_percent</span><span class="p">+</span> <span class="gi">increased_05_percent</span><span class="p">+)</span>
<span class="ni">define</span>
    <span class="gi">decreased_10_percent</span> <span class="ni">as</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
    <span class="gi">increased_05_percent</span> <span class="ni">as</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
</pre></div>
</div><div data-codeblock-index="21" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</section>
<section id="matching-patterns-relative-to-the-beginning-or-end-of-a-partition">
<span id="label-match-recognize-introduction-search-start-or-end-partition"></span><h3>Matching Patterns Relative to the Beginning or End of a Partition<a class="headerlink" href="#matching-patterns-relative-to-the-beginning-or-end-of-a-partition" title="Link to this heading">¶</a></h3>
<p>To find a sequence of rows relative to the beginning or end of a partition, you can use the metacharacters <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code> in the
<code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclause. These metacharacters in a row pattern have a similar purpose as
<a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended">the same metacharacters have in a regular expression</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">^</span></code> represents the beginning of a partition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$</span></code> represents the end of a partition.</p></li>
</ul>
<p>The following pattern matches a stock with a price greater than 75.00 at the beginning of the partition:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">PATTERN</span> <span class="p">(^</span> <span class="gi">GT75</span><span class="p">)</span>
<span class="ni">DEFINE</span>
    <span class="gi">GT75</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="gi">75</span><span class="p">.</span><span class="gi">00</span>
</pre></div>
</div><div data-codeblock-index="22" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code> specify positions and do not represent the rows at those positions (much like <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code> in a
regular expression specify the position and not the characters at those positions). In <code class="code docutils literal notranslate"><span class="pre">PATTERN</span> <span class="pre">(^</span> <span class="pre">GT75)</span></code>, the first row
(not the second row) must have a price greater than 75.00. In <code class="code docutils literal notranslate"><span class="pre">PATTERN</span> <span class="pre">(GT75</span> <span class="pre">$)</span></code>, the last row (not the second-to-last row)
must be greater than 75.</p>
<p>Here is a complete example with <code class="docutils literal notranslate"><span class="pre">^</span></code>. Note that although the XYZ stock has a price higher than 60.00 in more than one
row in this partition, only the row at the start of the partition is considered a match.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(^</span> <span class="gi">GT60</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">GT60</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="gi">60</span><span class="p">.</span><span class="gi">00</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |</span>
<span class="no">|---------+------------+-------+---------+------------------|</span>
<span class="no">| XYZ     | 2020-10-01 |    89 |       1 |                1 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
</pre></div>
</div><div data-codeblock-index="23" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>Here is a complete example with <code class="docutils literal notranslate"><span class="pre">$</span></code>.  Note that although the ABCD stock has a price higher than 50.00 in more than
one row in this partition, only the row at the end of the partition is considered a match.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">GT50</span> <span class="p">$)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">GT50</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="gi">50</span><span class="p">.</span><span class="gi">00</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |</span>
<span class="no">|---------+------------+-------+---------+------------------|</span>
<span class="no">| ABCD    | 2020-10-10 |    63 |       1 |                1 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
</pre></div>
</div><div data-codeblock-index="24" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
</section>
<section id="specifying-output-rows">
<h2>Specifying Output Rows<a class="headerlink" href="#specifying-output-rows" title="Link to this heading">¶</a></h2>
<p>Statements that use <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> can choose which rows to output.</p>
<section id="generating-one-row-for-each-match-vs-generating-all-rows-for-each-match">
<span id="label-one-row-per-match-vs-all-rows-per-match"></span><h3>Generating One Row for Each Match vs Generating All Rows for Each Match<a class="headerlink" href="#generating-one-row-for-each-match-vs-generating-all-rows-for-each-match" title="Link to this heading">¶</a></h3>
<p>When <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> finds a match, the output can be either one summary row for the entire match, or one row
for each data point in the pattern.</p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">ROWS</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> specifies that the output include all rows in the match.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> specifies that the output include only one row for each match in each partition.</p>
<p>The projection clause of the SELECT statement can use only the output of the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>.
Effectively, this means that the SELECT statement can only use columns from the following subclauses of
<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>:</p>
<blockquote>
<div></div></blockquote>
<ul>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> subclause.</p>
<p>All rows in a match are from the same partition, and therefore have the same value for the <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code>
subclause expressions.</p>
</li>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause.</p>
<p>When you use <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span> <span class="pre">...</span> <span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>, the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause generates not only
expressions that return the same value for all rows in the match (e.g. <code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code>), but also expressions
that can return different values for different rows in the match (e.g. <code class="code docutils literal notranslate"><span class="pre">MATCH_SEQUENCE_NUMBER()</span></code>). If you use
expressions that can return different values for different rows in the match, the output is not deterministic.</p>
</li>
</ul>
<p>If you are familiar with aggregate functions and <code class="code docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code>, the following analogy might be helpful in
understanding <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>:</p>
<ul class="simple">
<li><p>The <code class="code docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> clause in <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> groups data similarly to the way that <code class="code docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code>
groups data in a <code class="code docutils literal notranslate"><span class="pre">SELECT</span></code>.</p></li>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause in a <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span> <span class="pre">...</span> <span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> allows aggregate functions, such as
<code class="code docutils literal notranslate"><span class="pre">COUNT()</span></code>, that return the same value for each row in the match, as <code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code> does.</p></li>
</ul>
<p>If you use only aggregate functions and expressions that return the same value for each row in the match,
then <code class="code docutils literal notranslate"><span class="pre">...</span> <span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> behaves similarly to <code class="code docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> and aggregate functions.</p>
</li>
</ul>
<p>The default is <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>.</p>
<p>The following examples show the difference in outputs between <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> and <code class="code docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">ROWS</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>.
These two code examples are almost identical except for the <code class="code docutils literal notranslate"><span class="pre">...ROW(S)</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> clause. (In typical usage, a SQL
statement with <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> has different <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclauses than a SQL statement with
<code class="code docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">ROWS</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>.)</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span><span class="p">,</span>
               <span class="ni">COUNT</span><span class="p">(*)</span> <span class="ni">AS</span> <span class="vi">"Num Rows In Match"</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">UP</span> <span class="gi">UP</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">UP</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
           <span class="p">)</span>
    <span class="ni">WHERE</span> <span class="gi">company</span> <span class="p">=</span> <span class="nc">'ABCD'</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+-------------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # | Num Rows In Match |</span>
<span class="no">|---------+------------+-------+---------+------------------+-------------------|</span>
<span class="no">| ABCD    | 2020-10-02 |    36 |       1 |                1 |                 1 |</span>
<span class="no">| ABCD    | 2020-10-03 |    39 |       1 |                2 |                 2 |</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |       1 |                3 |                 3 |</span>
<span class="no">| ABCD    | 2020-10-05 |    30 |       2 |                1 |                 1 |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |       2 |                2 |                 2 |</span>
<span class="no">| ABCD    | 2020-10-07 |    71 |       2 |                3 |                 3 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+-------------------+</span>

<span class="py">-- As you can see, the MATCH_SEQUENCE_NUMBER isn't useful when using</span>
<span class="py">-- "ONE ROW PER MATCH". But the COUNT(*), which wasn't very useful in</span>
<span class="py">-- "ALL ROWS PER MATCH", is useful here.</span>
<span class="ni">SELECT</span> <span class="p">*</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span><span class="p">,</span>
               <span class="ni">COUNT</span><span class="p">(*)</span> <span class="ni">AS</span> <span class="vi">"Num Rows In Match"</span>
           <span class="ni">ONE</span> <span class="ni">ROW</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">UP</span> <span class="gi">UP</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">UP</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
           <span class="p">)</span>
    <span class="ni">WHERE</span> <span class="gi">company</span> <span class="p">=</span> <span class="nc">'ABCD'</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+---------+------------------+-------------------+</span>
<span class="no">| COMPANY | Match # | Match Sequence # | Num Rows In Match |</span>
<span class="no">|---------+---------+------------------+-------------------|</span>
<span class="no">| ABCD    |       1 |                3 |                 3 |</span>
<span class="no">| ABCD    |       2 |                3 |                 3 |</span>
<span class="p">+</span><span class="no">---------+---------+------------------+-------------------+</span>
</pre></div>
</div><div data-codeblock-index="25" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</section>
<section id="excluding-rows-from-the-output">
<h3>Excluding Rows from the Output<a class="headerlink" href="#excluding-rows-from-the-output" title="Link to this heading">¶</a></h3>
<p>For some queries, you might want to include only part of the pattern in the output. For example, you might want to
find patterns in which stocks rose many days in a row, but display only the peaks and some summary information
(for example, the number of days of price increases before each peak).</p>
<p>You can use <a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-exclusions"><span class="std std-ref">exclusion syntax</span></a> in the pattern to tell <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> to
search for a particular pattern variable but not include it in the output. To include a pattern variable as part of
the pattern to search for, but not as part of the output, use the <code class="docutils literal notranslate"><span class="pre">{-</span> <span class="pre">&lt;pattern_variable&gt;</span> <span class="pre">-}</span></code> notation.</p>
<p>Here is a simple example that shows the difference between using exclusion syntax and not using it. This example
contains two queries, each of which searches for a stock price that started at less than $45,
then decreased, and then increased. The first query does not use exclusion syntax, and therefore shows all
the rows. The second query uses the exclusion syntax and does not show the day that the stock price fell.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">DECREASED_10_PERCENT</span> <span class="gi">INCREASED_05_PERCENT</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">DECREASED_10_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
               <span class="gi">INCREASED_05_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE |</span>
<span class="no">|---------+------------+-------|</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |</span>
<span class="no">| ABCD    | 2020-10-05 |    30 |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
</pre></div>
</div><div data-codeblock-index="26" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="p">{-</span> <span class="gi">DECREASED_10_PERCENT</span> <span class="p">-}</span> <span class="gi">INCREASED_05_PERCENT</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">DECREASED_10_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
               <span class="gi">INCREASED_05_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE |</span>
<span class="no">|---------+------------+-------|</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
</pre></div>
</div><div data-codeblock-index="27" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The next example is more realistic. It searches for patterns in which a stock price rose one or more days in a row,
and then fell one or more days in a row. Because the output could be quite large, this uses exclusion to show only
the first day the stock rose (if it rose more than one day in a row) and only the first
day it dropped (if it dropped more than one day in a row). The pattern is shown below:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">PATTERN</span><span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">UP</span> <span class="p">{-</span> <span class="gi">UP</span><span class="p">*</span> <span class="p">-}</span> <span class="gi">DOWN</span> <span class="p">{-</span> <span class="gi">DOWN</span><span class="p">*</span> <span class="p">-})</span>
</pre></div>
</div><div data-codeblock-index="28" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>This pattern looks for the following events in order:</p>
<ul class="simple">
<li><p>A starting price less than 45.</p></li>
<li><p>An UP, possibly followed immediately by others that are not included in the output.</p></li>
<li><p>A DOWN, possibly followed immediately by others that are not included in the output.</p></li>
</ul>
<p>Here are the code and output for versions of the preceding pattern without exclusion and with exclusion:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span> <span class="gi">LESS_THAN_45</span> <span class="gi">UP</span> <span class="gi">UP</span><span class="p">*</span> <span class="gi">DOWN</span> <span class="gi">DOWN</span><span class="p">*</span> <span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">UP</span>   <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
               <span class="gi">DOWN</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
           <span class="p">)</span>
    <span class="ni">WHERE</span> <span class="gi">company</span> <span class="p">=</span> <span class="nc">'XYZ'</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE |</span>
<span class="no">|---------+------------+-------|</span>
<span class="no">| XYZ     | 2020-10-02 |    24 |</span>
<span class="no">| XYZ     | 2020-10-03 |    37 |</span>
<span class="no">| XYZ     | 2020-10-04 |    63 |</span>
<span class="no">| XYZ     | 2020-10-05 |    65 |</span>
<span class="no">| XYZ     | 2020-10-06 |    56 |</span>
<span class="no">| XYZ     | 2020-10-07 |    50 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
</pre></div>
</div><div data-codeblock-index="29" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span> <span class="p">{-</span> <span class="gi">LESS_THAN_45</span> <span class="p">-}</span>  <span class="gi">UP</span>  <span class="p">{-</span> <span class="gi">UP</span><span class="p">*</span> <span class="p">-}</span>  <span class="gi">DOWN</span>  <span class="p">{-</span> <span class="gi">DOWN</span><span class="p">*</span> <span class="p">-}</span> <span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">UP</span>   <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
               <span class="gi">DOWN</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
           <span class="p">)</span>
    <span class="ni">WHERE</span> <span class="gi">company</span> <span class="p">=</span> <span class="nc">'XYZ'</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE |</span>
<span class="no">|---------+------------+-------|</span>
<span class="no">| XYZ     | 2020-10-03 |    37 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+</span>
</pre></div>
</div><div data-codeblock-index="30" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
</section>
<section id="returning-information-about-the-match">
<span id="label-match-recognize-introduction-displaying-information-about-the-match"></span><h2>Returning Information About the Match<a class="headerlink" href="#returning-information-about-the-match" title="Link to this heading">¶</a></h2>
<section id="basic-match-information">
<h3>Basic Match Information<a class="headerlink" href="#basic-match-information" title="Link to this heading">¶</a></h3>
<p>In many cases, you want your query to list not only information from the table that contains the data, but also
information about the patterns that were found. When you want information about the matches themselves, you specify
that information in the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause can include the following functions, which are specific to <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code>: Each time a match is found, it is assigned a sequential match number, starting from one. This
function returns that match number.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">MATCH_SEQUENCE_NUMBER()</span></code>: Because a pattern usually involves more than one data point, you might want to know which
data point is associated with each value from the table. This function returns the sequential number of the data
point within the match.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">CLASSIFIER()</span></code>: The classifier is the name of the pattern variable that the row matched.</p></li>
</ul>
<p>The query below includes a <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause with the match number, match sequence number, and classifier.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span> <span class="gi">price</span><span class="p">,</span>
       <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">,</span> <span class="vi">"Symbol Matched"</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span><span class="p">,</span>
               <span class="nd">CLASSIFIER</span> <span class="ni">AS</span> <span class="vi">"Symbol Matched"</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">LESS_THAN_45</span> <span class="gi">DECREASED_10_PERCENT</span> <span class="gi">INCREASED_05_PERCENT</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">LESS_THAN_45</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="gi">45</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">DECREASED_10_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">0</span><span class="p">.</span><span class="gi">90</span> <span class="p">&gt;=</span> <span class="gi">price</span><span class="p">,</span>
               <span class="gi">INCREASED_05_PERCENT</span> <span class="ni">AS</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span> <span class="p">*</span> <span class="nf">1</span><span class="p">.</span><span class="gi">05</span> <span class="p">&lt;=</span> <span class="gi">price</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">company</span><span class="p">,</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+----------------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # | Symbol Matched       |</span>
<span class="no">|---------+------------+-------+---------+------------------+----------------------|</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |       1 |                1 | LESS_THAN_45         |</span>
<span class="no">| ABCD    | 2020-10-05 |    30 |       1 |                2 | DECREASED_10_PERCENT |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |       1 |                3 | INCREASED_05_PERCENT |</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+----------------------+</span>
</pre></div>
</div><div data-codeblock-index="31" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<p>The <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause can produce much more information than this. For more details, see
<a class="reference internal" href="../sql-reference/constructs/match_recognize"><span class="doc">the MATCH_RECOGNIZE reference documentation</span></a>.</p>
</section>
<section id="windows-window-frames-and-navigational-functions">
<h3>Windows, Window Frames, and Navigational Functions<a class="headerlink" href="#windows-window-frames-and-navigational-functions" title="Link to this heading">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause operates on a “window” of rows. If the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> contains a <code class="code docutils literal notranslate"><span class="pre">PARTITION</span></code>
subclause, then each <a class="reference internal" href="#label-match-recognize-introduction-partitioning-ordering"><span class="std std-ref">partition</span></a> is one window. If there is
no <code class="code docutils literal notranslate"><span class="pre">PARTITION</span></code> subclause, then the entire input is one window.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> subclause of <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> specifies the symbols in order from left to right. For example:</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">PATTERN</span> <span class="p">(</span><span class="ni">START</span> <span class="gi">DOWN</span> <span class="gi">UP</span><span class="p">)</span>
</pre></div>
</div><div data-codeblock-index="32" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>If you picture the data as a sequence of rows in ascending order from left to right, you can think of
<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> as moving rightward (e.g. from the earliest date to the latest date in the stock price example),
searching for a pattern in the rows inside each window.</p>
<p><code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> starts with the first row in the window and checks whether that row and the subsequent rows
match the pattern.</p>
<p>In the simplest case, after determining whether there’s a pattern match starting at the first row in the window,
<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> moves rightward one row and repeats the process, checking whether the 2nd row is the beginning
of an occurrence of the pattern. <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> continues moving rightward until it reaches the end of the window.</p>
<p>(<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> can move rightward by more than one row. For example, you can tell <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> to start
searching for the next pattern after the end of the current pattern.)</p>
<p>You can picture this loosely as though there were a “frame” moving rightward inside the window. The left-hand edge
of that frame is at the first row in the set of rows currently being checked for a match. The right-hand edge
of the frame is not defined until a match is found; once a match is found, the right-hand edge of the frame is
the last row in the match. For example, if the search pattern were <code class="code docutils literal notranslate"><span class="pre">pattern</span> <span class="pre">(start</span> <span class="pre">down</span> <span class="pre">up)</span></code> then the
row that matches the <code class="docutils literal notranslate"><span class="pre">up</span></code> is the last row before the right-hand edge of the frame.</p>
<p>(If no match is found, then the right-hand edge of the frame is never defined and is never referenced.)</p>
<p>In simple cases, you can picture a sliding window frame as illustrated below:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/window-functions-sliding-frame.png"><img alt="3-day sliding window frame in 7-day window" src="../_images/window-functions-sliding-frame.png" style="width: 1152.6px; height: 381.65px;"></a>
</figure>
<p>You have already seen <a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions"><span class="std std-ref">navigational functions</span></a> such as <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code>
used in expressions in the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> subclause (e.g. <code class="code docutils literal notranslate"><span class="pre">DEFINE</span> <span class="pre">down_10_percent</span> <span class="pre">as</span> <span class="pre">LAG(price)</span> <span class="pre">*</span> <span class="pre">0.9</span> <span class="pre">&gt;=</span> <span class="pre">price</span></code>).
The following query shows that navigational functions can also be used in the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause. In this example,
the navigational functions show the edges (and thus the size) of the window frame that contains the current match.</p>
<blockquote>
<div></div></blockquote>
<p>Each output row from this query includes the values of the <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code>, <code class="code docutils literal notranslate"><span class="pre">LEAD()</span></code>, <code class="code docutils literal notranslate"><span class="pre">FIRST()</span></code>, and <code class="code docutils literal notranslate"><span class="pre">LAST()</span></code>
navigational functions for that row. The size of the window frame is the number of rows between <code class="code docutils literal notranslate"><span class="pre">FIRST()</span></code> and
<code class="code docutils literal notranslate"><span class="pre">LAST()</span></code>, including the first and last rows themselves.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> and <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> clauses in the query below select groups of three rows
(October 1-3, October 2-4, October 3-5, etc.).</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">,</span>
       <span class="vi">"First(price_date)"</span><span class="p">,</span> <span class="vi">"Lag(price_date)"</span><span class="p">,</span> <span class="vi">"Lead(price_date)"</span><span class="p">,</span> <span class="vi">"Last(price_date)"</span><span class="p">,</span>
       <span class="vi">"Match#"</span><span class="p">,</span> <span class="vi">"MatchSeq#"</span><span class="p">,</span> <span class="vi">"Classifier"</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
        <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
            <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
            <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
            <span class="ni">MEASURES</span>
                <span class="py">-- Show the "edges" of the "window frame".</span>
                <span class="ni">FIRST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="vi">"First(price_date)"</span><span class="p">,</span>
                <span class="ni">LAG</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="vi">"Lag(price_date)"</span><span class="p">,</span>
                <span class="nd">LEAD</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="vi">"Lead(price_date)"</span><span class="p">,</span>
                <span class="ni">LAST</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">AS</span> <span class="vi">"Last(price_date)"</span><span class="p">,</span>
                <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match#"</span><span class="p">,</span>
                <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"MatchSeq#"</span><span class="p">,</span>
                <span class="nd">CLASSIFIER</span> <span class="ni">AS</span> <span class="vi">"Classifier"</span>
            <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
            <span class="ni">AFTER</span> <span class="ni">MATCH</span> <span class="ni">SKIP</span> <span class="ni">TO</span> <span class="ni">NEXT</span> <span class="ni">ROW</span>
            <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">CURRENT_ROW</span> <span class="gi">T2</span> <span class="gi">T3</span><span class="p">)</span>
            <span class="ni">DEFINE</span>
                <span class="gi">CURRENT_ROW</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
                <span class="gi">T2</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
                <span class="gi">T3</span> <span class="ni">AS</span> <span class="ni">TRUE</span>
            <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">company</span><span class="p">,</span> <span class="vi">"Match#"</span><span class="p">,</span> <span class="vi">"MatchSeq#"</span>
    <span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------+</span>
<span class="no">| COMPANY | PRICE_DATE | First(price_date) | Lag(price_date) | Lead(price_date) | Last(price_date) | Match# | MatchSeq# | Classifier  |</span>
<span class="no">|---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------|</span>
<span class="no">| ABCD    | 2020-10-01 | 2020-10-01        | NULL            | 2020-10-02       | 2020-10-01       |      1 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-02 | 2020-10-01        | 2020-10-01      | 2020-10-03       | 2020-10-02       |      1 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-03 | 2020-10-01        | 2020-10-02      | NULL             | 2020-10-03       |      1 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-02 | 2020-10-02        | NULL            | 2020-10-03       | 2020-10-02       |      2 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-03 | 2020-10-02        | 2020-10-02      | 2020-10-04       | 2020-10-03       |      2 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-04 | 2020-10-02        | 2020-10-03      | NULL             | 2020-10-04       |      2 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-03 | 2020-10-03        | NULL            | 2020-10-04       | 2020-10-03       |      3 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-04 | 2020-10-03        | 2020-10-03      | 2020-10-05       | 2020-10-04       |      3 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-05 | 2020-10-03        | 2020-10-04      | NULL             | 2020-10-05       |      3 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-04 | 2020-10-04        | NULL            | 2020-10-05       | 2020-10-04       |      4 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-05 | 2020-10-04        | 2020-10-04      | 2020-10-06       | 2020-10-05       |      4 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-06 | 2020-10-04        | 2020-10-05      | NULL             | 2020-10-06       |      4 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-05 | 2020-10-05        | NULL            | 2020-10-06       | 2020-10-05       |      5 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-06 | 2020-10-05        | 2020-10-05      | 2020-10-07       | 2020-10-06       |      5 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-07 | 2020-10-05        | 2020-10-06      | NULL             | 2020-10-07       |      5 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-06 | 2020-10-06        | NULL            | 2020-10-07       | 2020-10-06       |      6 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-07 | 2020-10-06        | 2020-10-06      | 2020-10-08       | 2020-10-07       |      6 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-08 | 2020-10-06        | 2020-10-07      | NULL             | 2020-10-08       |      6 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-07 | 2020-10-07        | NULL            | 2020-10-08       | 2020-10-07       |      7 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-08 | 2020-10-07        | 2020-10-07      | 2020-10-09       | 2020-10-08       |      7 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-09 | 2020-10-07        | 2020-10-08      | NULL             | 2020-10-09       |      7 |         3 | T3          |</span>
<span class="no">| ABCD    | 2020-10-08 | 2020-10-08        | NULL            | 2020-10-09       | 2020-10-08       |      8 |         1 | CURRENT_ROW |</span>
<span class="no">| ABCD    | 2020-10-09 | 2020-10-08        | 2020-10-08      | 2020-10-10       | 2020-10-09       |      8 |         2 | T2          |</span>
<span class="no">| ABCD    | 2020-10-10 | 2020-10-08        | 2020-10-09      | NULL             | 2020-10-10       |      8 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-01 | 2020-10-01        | NULL            | 2020-10-02       | 2020-10-01       |      1 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-02 | 2020-10-01        | 2020-10-01      | 2020-10-03       | 2020-10-02       |      1 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-03 | 2020-10-01        | 2020-10-02      | NULL             | 2020-10-03       |      1 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-02 | 2020-10-02        | NULL            | 2020-10-03       | 2020-10-02       |      2 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-03 | 2020-10-02        | 2020-10-02      | 2020-10-04       | 2020-10-03       |      2 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-04 | 2020-10-02        | 2020-10-03      | NULL             | 2020-10-04       |      2 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-03 | 2020-10-03        | NULL            | 2020-10-04       | 2020-10-03       |      3 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-04 | 2020-10-03        | 2020-10-03      | 2020-10-05       | 2020-10-04       |      3 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-05 | 2020-10-03        | 2020-10-04      | NULL             | 2020-10-05       |      3 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-04 | 2020-10-04        | NULL            | 2020-10-05       | 2020-10-04       |      4 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-05 | 2020-10-04        | 2020-10-04      | 2020-10-06       | 2020-10-05       |      4 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-06 | 2020-10-04        | 2020-10-05      | NULL             | 2020-10-06       |      4 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-05 | 2020-10-05        | NULL            | 2020-10-06       | 2020-10-05       |      5 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-06 | 2020-10-05        | 2020-10-05      | 2020-10-07       | 2020-10-06       |      5 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-07 | 2020-10-05        | 2020-10-06      | NULL             | 2020-10-07       |      5 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-06 | 2020-10-06        | NULL            | 2020-10-07       | 2020-10-06       |      6 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-07 | 2020-10-06        | 2020-10-06      | 2020-10-08       | 2020-10-07       |      6 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-08 | 2020-10-06        | 2020-10-07      | NULL             | 2020-10-08       |      6 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-07 | 2020-10-07        | NULL            | 2020-10-08       | 2020-10-07       |      7 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-08 | 2020-10-07        | 2020-10-07      | 2020-10-09       | 2020-10-08       |      7 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-09 | 2020-10-07        | 2020-10-08      | NULL             | 2020-10-09       |      7 |         3 | T3          |</span>
<span class="no">| XYZ     | 2020-10-08 | 2020-10-08        | NULL            | 2020-10-09       | 2020-10-08       |      8 |         1 | CURRENT_ROW |</span>
<span class="no">| XYZ     | 2020-10-09 | 2020-10-08        | 2020-10-08      | 2020-10-10       | 2020-10-09       |      8 |         2 | T2          |</span>
<span class="no">| XYZ     | 2020-10-10 | 2020-10-08        | 2020-10-09      | NULL             | 2020-10-10       |      8 |         3 | T3          |</span>
<span class="p">+</span><span class="no">---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------+</span>
</pre></div>
</div><div data-codeblock-index="33" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>The output of this query also illustrates that <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code> and <code class="code docutils literal notranslate"><span class="pre">LEAD()</span></code> functions return NULL for expressions that
attempt to reference rows outside the match group (i.e. outside the <a class="reference internal" href="../sql-reference/functions-analytic.html#label-window-frames"><span class="std std-ref">window frame</span></a>).</p>
<p>The rules for navigational functions in <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clauses are slightly different from the rules for
navigational functions in <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clauses. For example, the <code class="code docutils literal notranslate"><span class="pre">PREV()</span></code> function is available in the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> clause
but currently not in the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clause. Instead, you can use <code class="code docutils literal notranslate"><span class="pre">LAG()</span></code> in the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clause. The reference
documentation for <a class="reference internal" href="../sql-reference/constructs/match_recognize"><span class="doc">MATCH_RECOGNIZE</span></a> lists the corresponding rule for each
<a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions"><span class="std std-ref">navigational function</span></a>.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause can also include the following:</p>
<ul>
<li><p>Aggregate functions. For example, if the pattern can match a varying number of rows (e.g. because it matches
1 or more falling stock prices), then you might want to know the total number of rows in the match; you can
show this by using <code class="code docutils literal notranslate"><span class="pre">COUNT(*)</span></code>.</p></li>
<li><p>General expressions that operate on values in each row in the match. These can be mathematical expressions,
logical expressions, etc. For example, you could look at values in the row and print text descriptors such as
“ABOVE AVERAGE”.</p>
<p>Remember that if you group rows (<code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>), and if a column has different values for different rows
in the group, the value selected for that column for that match is non-deterministic, and expressions based on that
value are also likely to be non-deterministic.</p>
</li>
</ul>
<p>For more information about the <code class="code docutils literal notranslate"><span class="pre">MEASURES</span></code> subclause, see the
<a class="reference internal" href="../sql-reference/constructs/match_recognize"><span class="doc">reference documentation for MATCH_RECOGNIZE</span></a>.</p>
</section>
</section>
<section id="specifying-where-to-search-for-the-next-match">
<span id="label-match-recognize-introduction-skip-to"></span><h2>Specifying Where to Search for the Next Match<a class="headerlink" href="#specifying-where-to-search-for-the-next-match" title="Link to this heading">¶</a></h2>
<p>By default, after <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> finds a match, it starts looking for the next match immediately after the
end of the most recent match. For example, if <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> finds a match in rows 2, 3, and 4, then
<code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> will start looking for the next match at row 5. This prevents overlapping matches.</p>
<p>However, you can choose alternative starting points.</p>
<p>Consider the following data:</p>
<div class="relative group text-sm"><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Month  | Price | Price Relative to Previous Day
=======|=======|===============================
     1 |   200 |
     2 |   100 | down
     3 |   200 | up
     4 |   100 | down
     5 |   200 | up
     6 |   100 | down
     7 |   200 | up
     8 |   100 | down
     9 |   200 | up
</pre></div>
</div><div data-codeblock-index="34" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
<p>Suppose you search the data for a <code class="docutils literal notranslate"><span class="pre">W</span></code> pattern (down, up, down up). There are three <code class="docutils literal notranslate"><span class="pre">W</span></code> shapes:</p>
<ol class="arabic simple">
<li><p>Months: 1, 2, 3, 4, and 5.</p></li>
<li><p>Months: 3, 4, 5, 6, and 7.</p></li>
<li><p>Months: 5, 6, 7, 8, and 9.</p></li>
</ol>
<p>You can use the <code class="code docutils literal notranslate"><span class="pre">SKIP</span></code> clause to specify whether you want all patterns, or only non-overlapping patterns. The
<code class="code docutils literal notranslate"><span class="pre">SKIP</span></code> clause supports other options, as well. The <code class="code docutils literal notranslate"><span class="pre">SKIP</span></code> clause is documented in more detail in
<a class="reference internal" href="../sql-reference/constructs/match_recognize"><span class="doc">MATCH_RECOGNIZE</span></a>.</p>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Include an ORDER BY clause in your <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause.</p>
<ul>
<li><p>Remember that this ORDER BY applies only within the <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> clause. If you want the entire query to
return results in a specific order, then use an additional <code class="code docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause at the outermost level of the query.</p></li>
</ul>
</li>
<li><p>Pattern variable names:</p>
<ul>
<li><p>Use meaningful pattern variable names to make your patterns easier to understand and debug.</p></li>
<li><p>Check for typographical errors in pattern variable names in both the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> and <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clauses.</p></li>
</ul>
</li>
<li><p>Avoid using defaults for subclauses that have defaults. Make your choices explicit.</p></li>
<li><p>Test your pattern with a small sample of data before scaling up to your full data set.</p></li>
<li><p>The <code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code>, <code class="code docutils literal notranslate"><span class="pre">MATCH_SEQUENCE_NUMBER()</span></code>, and <code class="code docutils literal notranslate"><span class="pre">CLASSIFIER()</span></code> are very helpful in debugging.</p></li>
<li><p>Consider using an <code class="code docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause in the outermost level of the query to force the output to be in order by
using <code class="code docutils literal notranslate"><span class="pre">MATCH_NUMBER()</span></code> and <code class="code docutils literal notranslate"><span class="pre">MATCH_SEQUENCE_NUMBER()</span></code>. If the output data is in another order, then the output might
not appear to match the pattern.</p></li>
</ul>
</section>
<section id="avoiding-analytic-errors">
<h2>Avoiding Analytic Errors<a class="headerlink" href="#avoiding-analytic-errors" title="Link to this heading">¶</a></h2>
<section id="correlation-vs-causality">
<h3>Correlation vs Causality<a class="headerlink" href="#correlation-vs-causality" title="Link to this heading">¶</a></h3>
<p>Correlation does not guarantee causality. <code class="code docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> can return “false positives” (cases where you see a
pattern, but it is just a coincidence).</p>
<p>Pattern matching can also result in “false negatives” (cases where there is a pattern in the real world, but the
pattern does not appear in the data sample).</p>
<p>In most cases, finding a match (for example, finding a pattern that suggests insurance fraud) is just the first step
in an analysis.</p>
<p>The following factors typically increase the number of false positives:</p>
<ul class="simple">
<li><p>Large data sets.</p></li>
<li><p>Searching for a large number of patterns.</p></li>
<li><p>Searching for short or simple patterns.</p></li>
</ul>
<p>The following factors typically increase the number of false negatives.</p>
<ul class="simple">
<li><p>Small data sets.</p></li>
<li><p>Not searching for all the possible relevant patterns.</p></li>
<li><p>Searching for patterns that are more complex than necessary.</p></li>
</ul>
</section>
<section id="order-insensitive-patterns">
<h3>Order-Insensitive Patterns<a class="headerlink" href="#order-insensitive-patterns" title="Link to this heading">¶</a></h3>
<p>Although most pattern matching requires that the data be in order (for example, by time), there are exceptions.
For example, if a person commits insurance fraud both in an automobile accident and in a home burglary, it doesn’t
matter which order the frauds occur in.</p>
<p>If the pattern you’re looking for is not order-sensitive, then you can use operators such as
“alternative” (<code class="docutils literal notranslate"><span class="pre">|</span></code>) and <code class="code docutils literal notranslate"><span class="pre">PERMUTE</span></code> to make your searches less order-sensitive.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>This section contains additional examples.</p>
<p>You can find still more examples in <a class="reference internal" href="../sql-reference/constructs/match_recognize"><span class="doc">MATCH_RECOGNIZE</span></a>.</p>
<section id="find-multi-day-price-increases">
<h3>Find Multi-Day Price Increases<a class="headerlink" href="#find-multi-day-price-increases" title="Link to this heading">¶</a></h3>
<p>The following query finds all the patterns in which the price of company ABCD rose two days in a row:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">SELECT</span> <span class="p">*</span>
    <span class="ni">FROM</span> <span class="gi">stock_price_history</span>
       <span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
           <span class="ni">PARTITION</span> <span class="ni">BY</span> <span class="gi">company</span>
           <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">price_date</span>
           <span class="ni">MEASURES</span>
               <span class="nd">MATCH_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match #"</span><span class="p">,</span>
               <span class="nd">MATCH_SEQUENCE_NUMBER</span><span class="p">()</span> <span class="ni">AS</span> <span class="vi">"Match Sequence #"</span>
           <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
           <span class="ni">PATTERN</span> <span class="p">(</span><span class="gi">MINIMUM_37</span> <span class="gi">UP</span> <span class="gi">UP</span><span class="p">)</span>
           <span class="ni">DEFINE</span>
               <span class="gi">MINIMUM_37</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;=</span> <span class="gi">37</span><span class="p">.</span><span class="gi">00</span><span class="p">,</span>
               <span class="gi">UP</span> <span class="ni">AS</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">LAG</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
           <span class="p">)</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">company</span><span class="p">,</span> <span class="vi">"Match #"</span><span class="p">,</span> <span class="vi">"Match Sequence #"</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |</span>
<span class="no">|---------+------------+-------+---------+------------------|</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |       1 |                1 |</span>
<span class="no">| ABCD    | 2020-10-07 |    71 |       1 |                2 |</span>
<span class="no">| ABCD    | 2020-10-08 |    80 |       1 |                3 |</span>
<span class="no">| XYZ     | 2020-10-03 |    37 |       1 |                1 |</span>
<span class="no">| XYZ     | 2020-10-04 |    63 |       1 |                2 |</span>
<span class="no">| XYZ     | 2020-10-05 |    65 |       1 |                3 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+---------+------------------+</span>
</pre></div>
</div><div data-codeblock-index="35" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<section id="demonstrate-the-permute-operator">
<h4>Demonstrate the PERMUTE Operator<a class="headerlink" href="#demonstrate-the-permute-operator" title="Link to this heading">¶</a></h4>
<p>This example demonstrates the <code class="code docutils literal notranslate"><span class="pre">PERMUTE</span></code> operator in the pattern. Search for all upward and downward spikes in the
charts limiting the number of rising prices to two:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">select</span> <span class="p">*</span> <span class="ni">from</span> <span class="gi">stock_price_history</span> <span class="ni">match_recognize</span><span class="p">(</span>
        <span class="ni">partition</span> <span class="ni">by</span> <span class="gi">company</span>
        <span class="ni">order</span> <span class="ni">by</span> <span class="gi">price_date</span>
        <span class="ni">measures</span>
            <span class="nd">match_number</span><span class="p">()</span> <span class="ni">as</span> <span class="vi">"MATCH_NUMBER"</span><span class="p">,</span>
            <span class="ni">first</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">as</span> <span class="vi">"START"</span><span class="p">,</span>
            <span class="ni">last</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">as</span> <span class="vi">"END"</span><span class="p">,</span>
            <span class="ni">count</span><span class="p">(</span><span class="gi">up</span><span class="p">.</span><span class="gi">price</span><span class="p">)</span> <span class="ni">as</span> <span class="gi">ups</span><span class="p">,</span>
            <span class="ni">count</span><span class="p">(*)</span> <span class="ni">as</span> <span class="vi">"PRICE_COUNT"</span><span class="p">,</span>
            <span class="ni">last</span><span class="p">(</span><span class="nd">classifier</span><span class="p">())</span> <span class="p">=</span> <span class="nc">'DOWN'</span> <span class="gi">up_spike</span>
        <span class="ni">after</span> <span class="ni">match</span> <span class="ni">skip</span> <span class="ni">to</span> <span class="ni">next</span> <span class="ni">row</span>
        <span class="ni">pattern</span><span class="p">(</span><span class="gi">ANY_ROW</span> <span class="nd">PERMUTE</span><span class="p">(</span><span class="gi">UP</span><span class="p">{</span><span class="nf">2</span><span class="p">},</span> <span class="gi">DOWN</span><span class="p">+))</span>
        <span class="ni">define</span>
            <span class="gi">ANY_ROW</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
            <span class="gi">UP</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
            <span class="gi">DOWN</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="ni">order</span> <span class="ni">by</span> <span class="gi">company</span><span class="p">,</span> <span class="nd">match_number</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+--------------+------------+------------+-----+-------------+----------+</span>
<span class="no">| COMPANY | MATCH_NUMBER | START      | END        | UPS | PRICE_COUNT | UP_SPIKE |</span>
<span class="no">|---------+--------------+------------+------------+-----+-------------+----------|</span>
<span class="no">| ABCD    |            1 | 2020-10-01 | 2020-10-04 |   2 |           4 | False    |</span>
<span class="no">| ABCD    |            2 | 2020-10-02 | 2020-10-05 |   2 |           4 | True     |</span>
<span class="no">| ABCD    |            3 | 2020-10-04 | 2020-10-07 |   2 |           4 | False    |</span>
<span class="no">| ABCD    |            4 | 2020-10-06 | 2020-10-10 |   2 |           5 | True     |</span>
<span class="no">| XYZ     |            1 | 2020-10-01 | 2020-10-04 |   2 |           4 | False    |</span>
<span class="no">| XYZ     |            2 | 2020-10-03 | 2020-10-07 |   2 |           5 | True     |</span>
<span class="p">+</span><span class="no">---------+--------------+------------+------------+-----+-------------+----------+</span>
</pre></div>
</div><div data-codeblock-index="36" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
</section>
<section id="demonstrate-the-skip-to-next-row-option">
<h3>Demonstrate the SKIP TO NEXT ROW Option<a class="headerlink" href="#demonstrate-the-skip-to-next-row-option" title="Link to this heading">¶</a></h3>
<p>This example demonstrates the <code class="code docutils literal notranslate"><span class="pre">SKIP</span> <span class="pre">TO</span> <span class="pre">NEXT</span> <span class="pre">ROW</span></code> option. This query searches for W-shaped curves in each company’s chart.
The matches can overlap.</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">select</span> <span class="p">*</span> <span class="ni">from</span> <span class="gi">stock_price_history</span> <span class="ni">match_recognize</span><span class="p">(</span>
    <span class="ni">partition</span> <span class="ni">by</span> <span class="gi">company</span>
    <span class="ni">order</span> <span class="ni">by</span> <span class="gi">price_date</span>
    <span class="ni">measures</span>
        <span class="nd">match_number</span><span class="p">()</span> <span class="ni">as</span> <span class="vi">"MATCH_NUMBER"</span><span class="p">,</span>
        <span class="ni">first</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">as</span> <span class="vi">"START"</span><span class="p">,</span>
        <span class="ni">last</span><span class="p">(</span><span class="gi">price_date</span><span class="p">)</span> <span class="ni">as</span> <span class="vi">"END"</span><span class="p">,</span>
        <span class="ni">count</span><span class="p">(*)</span> <span class="ni">as</span> <span class="vi">"PRICE_COUNT"</span>
    <span class="ni">after</span> <span class="ni">match</span> <span class="ni">skip</span> <span class="ni">to</span> <span class="ni">next</span> <span class="ni">row</span>
    <span class="ni">pattern</span><span class="p">(</span><span class="gi">ANY_ROW</span> <span class="gi">DOWN</span><span class="p">+</span> <span class="gi">UP</span><span class="p">+</span> <span class="gi">DOWN</span><span class="p">+</span> <span class="gi">UP</span><span class="p">+)</span>
    <span class="ni">define</span>
        <span class="gi">ANY_ROW</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
        <span class="gi">UP</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
        <span class="gi">DOWN</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
<span class="p">)</span>
<span class="ni">order</span> <span class="ni">by</span> <span class="gi">company</span><span class="p">,</span> <span class="nd">match_number</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+--------------+------------+------------+-------------+</span>
<span class="no">| COMPANY | MATCH_NUMBER | START      | END        | PRICE_COUNT |</span>
<span class="no">|---------+--------------+------------+------------+-------------|</span>
<span class="no">| ABCD    |            1 | 2020-10-01 | 2020-10-08 |           8 |</span>
<span class="no">| XYZ     |            1 | 2020-10-01 | 2020-10-08 |           8 |</span>
<span class="no">| XYZ     |            2 | 2020-10-05 | 2020-10-10 |           6 |</span>
<span class="no">| XYZ     |            3 | 2020-10-06 | 2020-10-10 |           5 |</span>
<span class="p">+</span><span class="no">---------+--------------+------------+------------+-------------+</span>
</pre></div>
</div><div data-codeblock-index="37" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
<section id="exclusion-syntax">
<h4>Exclusion Syntax<a class="headerlink" href="#exclusion-syntax" title="Link to this heading">¶</a></h4>
<p>This example shows the exclusion syntax in the pattern. This pattern (like the previous pattern) searches for
<code class="docutils literal notranslate"><span class="pre">W</span></code> shapes, but this query’s output excludes falling prices. Note that in this query, matching continues past the
last row of a match:</p>
<blockquote>
<div><div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">select</span> <span class="p">*</span> <span class="ni">from</span> <span class="gi">stock_price_history</span> <span class="ni">match_recognize</span><span class="p">(</span>
        <span class="ni">partition</span> <span class="ni">by</span> <span class="gi">company</span>
        <span class="ni">order</span> <span class="ni">by</span> <span class="gi">price_date</span>
        <span class="ni">measures</span>
            <span class="nd">match_number</span><span class="p">()</span> <span class="ni">as</span> <span class="vi">"MATCH_NUMBER"</span><span class="p">,</span>
            <span class="nd">classifier</span> <span class="ni">as</span> <span class="gi">cl</span><span class="p">,</span>
            <span class="ni">count</span><span class="p">(*)</span> <span class="ni">as</span> <span class="vi">"PRICE_COUNT"</span>
        <span class="ni">all</span> <span class="ni">rows</span> <span class="ni">per</span> <span class="ni">match</span>
        <span class="ni">pattern</span><span class="p">(</span><span class="gi">ANY_ROW</span> <span class="p">{-</span> <span class="gi">DOWN</span><span class="p">+</span> <span class="p">-}</span> <span class="gi">UP</span><span class="p">+</span> <span class="p">{-</span> <span class="gi">DOWN</span><span class="p">+</span> <span class="p">-}</span> <span class="gi">UP</span><span class="p">+)</span>
        <span class="ni">define</span>
            <span class="gi">ANY_ROW</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
            <span class="gi">UP</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&gt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">),</span>
            <span class="gi">DOWN</span> <span class="ni">as</span> <span class="gi">price</span> <span class="p">&lt;</span> <span class="ni">lag</span><span class="p">(</span><span class="gi">price</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="ni">order</span> <span class="ni">by</span> <span class="gi">company</span><span class="p">,</span> <span class="gi">price_date</span><span class="p">;</span>
<span class="p">+</span><span class="no">---------+------------+-------+--------------+---------+-------------+</span>
<span class="no">| COMPANY | PRICE_DATE | PRICE | MATCH_NUMBER | CL      | PRICE_COUNT |</span>
<span class="no">|---------+------------+-------+--------------+---------+-------------|</span>
<span class="no">| ABCD    | 2020-10-01 |    50 |            1 | ANY_ROW |           1 |</span>
<span class="no">| ABCD    | 2020-10-03 |    39 |            1 | UP      |           3 |</span>
<span class="no">| ABCD    | 2020-10-04 |    42 |            1 | UP      |           4 |</span>
<span class="no">| ABCD    | 2020-10-06 |    47 |            1 | UP      |           6 |</span>
<span class="no">| ABCD    | 2020-10-07 |    71 |            1 | UP      |           7 |</span>
<span class="no">| ABCD    | 2020-10-08 |    80 |            1 | UP      |           8 |</span>
<span class="no">| XYZ     | 2020-10-01 |    89 |            1 | ANY_ROW |           1 |</span>
<span class="no">| XYZ     | 2020-10-03 |    37 |            1 | UP      |           3 |</span>
<span class="no">| XYZ     | 2020-10-04 |    63 |            1 | UP      |           4 |</span>
<span class="no">| XYZ     | 2020-10-05 |    65 |            1 | UP      |           5 |</span>
<span class="no">| XYZ     | 2020-10-08 |    54 |            1 | UP      |           8 |</span>
<span class="p">+</span><span class="no">---------+------------+-------+--------------+---------+-------------+</span>
</pre></div>
</div><div data-codeblock-index="38" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</div></blockquote>
</section>
</section>
<section id="search-for-patterns-in-non-adjacent-rows">
<span id="label-match-recognize-introduction-search-for-patterns-in-non-adjacent-rows"></span><h3>Search for Patterns in Non-Adjacent Rows<a class="headerlink" href="#search-for-patterns-in-non-adjacent-rows" title="Link to this heading">¶</a></h3>
<p>In some situations, you might want to look for patterns in non-contiguous rows. For example, if you are analyzing
log files, you might want to search for all patterns in which a fatal error was preceded by a particular sequence
of warnings. There might not be a natural way to partition and sort the rows so that all of the relevant messages
(rows) are in a single window and adjacent. In that situation, you might need a pattern that looks for
particular events, but doesn’t require that the events be contiguous in the data.</p>
<p>Below is an example of <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> and <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> clauses that recognizes either contiguous or non-contiguous
rows that fit the pattern. The symbol <code class="docutils literal notranslate"><span class="pre">ANY_ROW</span></code> is defined as TRUE (so it matches any row). The <code class="docutils literal notranslate"><span class="pre">*</span></code> after each
occurrence of <code class="docutils literal notranslate"><span class="pre">ANY_ROW</span></code> says to allow 0 or more of occurrences of <code class="docutils literal notranslate"><span class="pre">ANY_ROW</span></code> between the first warning and the
second warning, and between the second warning and the fatal error log message. Thus the entire pattern says to
search for <code class="docutils literal notranslate"><span class="pre">WARNING1</span></code>, followed by any number of rows, followed by <code class="docutils literal notranslate"><span class="pre">WARNING2</span></code>, followed by any number of rows,
followed by <code class="docutils literal notranslate"><span class="pre">FATAL_ERROR</span></code>. To omit the irrelevant rows from the output, the query uses
<a class="reference internal" href="../sql-reference/constructs/match_recognize.html#label-match-recognize-exclusions"><span class="std std-ref">exclusion</span></a> syntax (<code class="docutils literal notranslate"><span class="pre">{-</span></code> and <code class="docutils literal notranslate"><span class="pre">-}</span></code>).</p>
<div class="relative group text-sm"><div class="highlight-sqlexample-lower notranslate"><div class="highlight"><pre><span></span><span class="ni">MATCH_RECOGNIZE</span> <span class="p">(</span>
    <span class="p">...</span>
    <span class="ni">ORDER</span> <span class="ni">BY</span> <span class="gi">log_message_timestamp</span>
    <span class="p">...</span>
    <span class="ni">ALL</span> <span class="ni">ROWS</span> <span class="ni">PER</span> <span class="ni">MATCH</span>
    <span class="ni">PATTERN</span> <span class="p">(</span> <span class="gi">WARNING1</span>  <span class="p">{-</span> <span class="gi">ANY_ROW</span><span class="p">*</span> <span class="p">-}</span>  <span class="gi">WARNING2</span>  <span class="p">{-</span> <span class="gi">ANY_ROW</span><span class="p">*</span> <span class="p">-}</span>  <span class="gi">FATAL_ERROR</span> <span class="p">)</span>
    <span class="ni">DEFINE</span>
        <span class="gi">ANY_ROW</span> <span class="ni">AS</span> <span class="ni">TRUE</span><span class="p">,</span>
        <span class="gi">WARNING1</span> <span class="ni">AS</span> <span class="nd">SUBSTR</span><span class="p">(</span><span class="gi">log_message</span><span class="p">,</span> <span class="nf">1</span><span class="p">,</span> <span class="gi">42</span><span class="p">)</span> <span class="p">=</span> <span class="nc">'WARNING: Available memory is less than 10%'</span><span class="p">,</span>
        <span class="gi">WARNING2</span> <span class="ni">AS</span> <span class="nd">SUBSTR</span><span class="p">(</span><span class="gi">log_message</span><span class="p">,</span> <span class="nf">1</span><span class="p">,</span> <span class="gi">41</span><span class="p">)</span> <span class="p">=</span> <span class="nc">'WARNING: Available memory is less than 5%'</span><span class="p">,</span>
        <span class="gi">FATAL_ERROR</span> <span class="ni">AS</span> <span class="nd">SUBSTR</span><span class="p">(</span><span class="gi">log_message</span><span class="p">,</span> <span class="nf">1</span><span class="p">,</span> <span class="gi">11</span><span class="p">)</span> <span class="p">=</span> <span class="nc">'FATAL ERROR'</span>
    <span class="p">)</span>
<span class="p">...</span>
</pre></div>
</div><div data-codeblock-index="39" class="copybutton"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512" class="copybutton-icon icon-copy"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" class="copybutton-icon icon-copied hidden"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"></path></svg><span>Copy</span></div></div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<section id="errors-when-using-one-row-per-match-and-specifying-columns-in-the-select-clause">
<h3>Errors When Using ONE ROW PER MATCH and Specifying Columns in the Select Clause<a class="headerlink" href="#errors-when-using-one-row-per-match-and-specifying-columns-in-the-select-clause" title="Link to this heading">¶</a></h3>
<p>The <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> clause acts similarly to an aggregate function. This limits the output columns you can
use. For example, if you use <code class="code docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> and each match contains three rows with different dates, then
you can’t specify the date column as an output column in the SELECT clause because no single date is correct for all
three rows.</p>
</section>
<section id="unexpected-results">
<h3>Unexpected Results<a class="headerlink" href="#unexpected-results" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Check for typographical errors in the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> and <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clauses.</p>
<p>If a pattern variable name used in the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> clause is not defined in the <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clause (e.g. because the
name is typed incorrectly in either the <code class="code docutils literal notranslate"><span class="pre">PATTERN</span></code> or <code class="code docutils literal notranslate"><span class="pre">DEFINE</span></code> clause), then no error is reported. Instead, the
pattern variable name is simply assumed to be true for each row.</p>
</li>
<li><p>Review the <code class="code docutils literal notranslate"><span class="pre">SKIP</span></code> clause to make sure that it is appropriate, for example to include or exclude overlapping patterns.</p></li>
</ul>
</section>
</section>
</section>


</article><footer class="mt-24 mb-12 print:hidden"><div class="mb-8"><div class="flex"><p class="mr-4 text-primary">Was this page helpful?</p><button class="button-primary-bg rounded-md button-primary-text py-1 px-3 text-sm mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="thumbs-up" class="svg-inline--fa fa-thumbs-up pr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M128 447.1V223.1c0-17.67-14.33-31.1-32-31.1H32c-17.67 0-32 14.33-32 31.1v223.1c0 17.67 14.33 31.1 32 31.1h64C113.7 479.1 128 465.6 128 447.1zM512 224.1c0-26.5-21.48-47.98-48-47.98h-146.5c22.77-37.91 34.52-80.88 34.52-96.02C352 56.52 333.5 32 302.5 32c-63.13 0-26.36 76.15-108.2 141.6L178 186.6C166.2 196.1 160.2 210 160.1 224c-.0234 .0234 0 0 0 0L160 384c0 15.1 7.113 29.33 19.2 38.39l34.14 25.59C241 468.8 274.7 480 309.3 480H368c26.52 0 48-21.47 48-47.98c0-3.635-.4805-7.143-1.246-10.55C434 415.2 448 397.4 448 376c0-9.148-2.697-17.61-7.139-24.88C463.1 347 480 327.5 480 304.1c0-12.5-4.893-23.78-12.72-32.32C492.2 270.1 512 249.5 512 224.1z"></path></svg>Yes<!-- --></button><button class="button-primary-bg rounded-md button-primary-text py-1 px-3 text-sm"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="thumbs-down" class="svg-inline--fa fa-thumbs-down pr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M96 32.04H32c-17.67 0-32 14.32-32 31.1v223.1c0 17.67 14.33 31.1 32 31.1h64c17.67 0 32-14.33 32-31.1V64.03C128 46.36 113.7 32.04 96 32.04zM467.3 240.2C475.1 231.7 480 220.4 480 207.9c0-23.47-16.87-42.92-39.14-47.09C445.3 153.6 448 145.1 448 135.1c0-21.32-14-39.18-33.25-45.43C415.5 87.12 416 83.61 416 79.98C416 53.47 394.5 32 368 32h-58.69c-34.61 0-68.28 11.22-95.97 31.98L179.2 89.57C167.1 98.63 160 112.9 160 127.1l.1074 160c0 0-.0234-.0234 0 0c.0703 13.99 6.123 27.94 17.91 37.36l16.3 13.03C276.2 403.9 239.4 480 302.5 480c30.96 0 49.47-24.52 49.47-48.11c0-15.15-11.76-58.12-34.52-96.02H464c26.52 0 48-21.47 48-47.98C512 262.5 492.2 241.9 467.3 240.2z"></path></svg>No<!-- --></button></div></div><div class="grid md:grid-cols-2 xl:grid-cols-3 grid-auto justify-items-start items-start gap-x-6 gap-y-4 border-t border-b py-8"><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 19 19" fill="none" class="fill-gray-70 dark:fill-gray-55"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.08044 9.85246C6.11896 9.72629 6.13502 9.59631 6.13211 9.46798C6.12767 9.37501 6.11608 9.28222 6.09067 9.18929C6.01427 8.90076 5.83329 8.64297 5.56208 8.48046L1.70485 6.16593C1.16033 5.84021 0.466142 6.03386 0.153636 6.59893C-0.161893 7.16313 0.0242153 7.88369 0.568731 8.21023L2.72417 9.50569L0.568731 10.7976C0.0242153 11.1247 -0.161236 11.8454 0.153636 12.4119C0.466142 12.9754 1.16033 13.1682 1.70485 12.8425L5.56208 10.5264C5.82238 10.3707 5.99903 10.1266 6.08044 9.85246ZM7.12726 12.0214C6.90562 12.0017 6.6752 12.0501 6.46792 12.1756L2.60777 14.4886C2.0647 14.815 1.87925 15.5394 2.19267 16.1046C2.50755 16.6683 3.20108 16.8624 3.74335 16.5344L5.90603 15.2381V17.8285C5.90603 18.4812 6.41412 19.01 7.04293 19.01C7.66872 19.01 8.17841 18.4812 8.17841 17.8285V13.1976C8.17841 12.5758 7.71463 12.0652 7.12726 12.0214ZM11.0804 6.98844C11.3013 7.00744 11.5311 6.95837 11.7384 6.83439L15.5977 4.51919C16.1416 4.19265 16.3261 3.47126 16.0135 2.90459C15.7002 2.34051 15.006 2.14697 14.4629 2.47323L12.3017 3.77112V1.17982C12.3017 0.528953 11.7936 0 11.1648 0C10.536 0 10.0292 0.528953 10.0292 1.17982V5.81081C10.0292 6.43187 10.4917 6.94335 11.0804 6.98844ZM2.60777 4.51919L6.46792 6.83439C6.6752 6.95837 6.90562 7.00744 7.12726 6.98844C7.71463 6.94335 8.17841 6.43187 8.17841 5.81081V1.17982C8.17841 0.528953 7.66872 0 7.04293 0C6.41412 0 5.90603 0.528953 5.90603 1.17982V3.77112L3.74335 2.47323C3.20108 2.14697 2.50755 2.34051 2.19267 2.90459C1.87925 3.47126 2.0647 4.19265 2.60777 4.51919ZM9.86206 9.49596C9.86206 9.42874 9.82287 9.33499 9.7771 9.28524L9.31254 8.80465C9.26677 8.75722 9.17654 8.71787 9.11169 8.71787H9.09367C9.02896 8.71787 8.93888 8.75722 8.89375 8.80465L8.42922 9.28524C8.38267 9.33499 8.34703 9.42874 8.34703 9.49596V9.51486C8.34703 9.58126 8.38267 9.67419 8.42922 9.7226L8.89375 10.2045C8.93952 10.2521 9.02896 10.2913 9.09367 10.2913H9.11169C9.17654 10.2913 9.26677 10.2521 9.31254 10.2045L9.7771 9.7226C9.82287 9.67419 9.86206 9.58126 9.86206 9.51486V9.49596ZM11.1444 9.95821L9.54007 11.6234C9.49416 11.6723 9.40553 11.7124 9.33873 11.7124H9.22231H8.98529H8.86692C8.8021 11.7124 8.71198 11.6723 8.66543 11.6234L7.06187 9.95821C7.01596 9.91134 6.97889 9.81703 6.97889 9.75047V9.62732V9.38104V9.25953C6.97889 9.19145 7.01596 9.09702 7.06187 9.04944L8.66543 7.3844C8.71198 7.33536 8.8021 7.29679 8.86692 7.29679H8.98529H9.22231H9.33873C9.40408 7.29679 9.49416 7.33536 9.54007 7.3844L11.1444 9.04944C11.1902 9.09702 11.2273 9.19145 11.2273 9.25953V9.38104V9.62732V9.75047C11.2273 9.81703 11.1902 9.91134 11.1444 9.95821ZM15.5977 14.4886L11.7384 12.1756C11.5311 12.0501 11.3013 12.0017 11.0804 12.0214C10.4917 12.0652 10.0292 12.5758 10.0292 13.1976V17.8285C10.0292 18.4812 10.536 19.01 11.1648 19.01C11.7936 19.01 12.3017 18.4812 12.3017 17.8285V15.2381L14.4629 16.5344C15.0059 16.8624 15.7002 16.6683 16.0135 16.1046C16.3261 15.5394 16.1416 14.815 15.5977 14.4886ZM17.6383 8.21023L15.4828 9.50569L17.6383 10.7976C18.1828 11.1247 18.3689 11.8454 18.0541 12.4119C17.74 12.9754 17.0452 13.1682 16.5028 12.8425L12.6426 10.5264C12.3852 10.3707 12.2065 10.1266 12.1272 9.85246C12.0894 9.72629 12.0719 9.59631 12.0763 9.46798C12.0785 9.37501 12.0915 9.28222 12.1162 9.18929C12.1935 8.90076 12.3745 8.64308 12.6426 8.48046L16.5028 6.16593C17.0452 5.84021 17.74 6.03386 18.0541 6.59893C18.3689 7.16313 18.1828 7.88369 17.6383 8.21023Z"></path></svg><a href="https://www.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Visit Snowflake</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_2428)"><path d="M8.66666 7.96667H12.4867" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.5733 6.06006V9.88006" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 6.69999V13.7L13.76 11.7867H8.03332C7.46874 11.7882 6.91974 11.6016 6.47305 11.2563C6.02635 10.911 5.70743 10.4267 5.56666 9.87999C5.51029 9.66234 5.48339 9.43812 5.48666 9.21332V6.69999C5.48666 6.02457 5.75497 5.37681 6.23256 4.89922C6.71015 4.42163 7.35791 4.15332 8.03332 4.15332H13.12C13.7954 4.15332 14.4432 4.42163 14.9208 4.89922C15.3983 5.37681 15.6667 6.02457 15.6667 6.69999Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M11.8467 3.51334V4.18001H8.03332C7.35791 4.18001 6.71015 4.44832 6.23256 4.92591C5.75497 5.4035 5.48666 6.05126 5.48666 6.72668V8.63334H3.57332L1.66666 10.5133V3.51334C1.66666 2.83792 1.93497 2.19017 2.41256 1.71258C2.89015 1.23498 3.53791 0.966675 4.21332 0.966675H9.33332C10.0029 0.97544 10.6422 1.24761 11.1126 1.72426C11.583 2.20091 11.8467 2.84366 11.8467 3.51334Z" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_2428"><rect width="16" height="16" fill="white" transform="translate(0.666656)"></rect></clipPath></defs></svg><a href="https://community.snowflake.com/s/" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Join the conversation</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><path d="M6.4267 10.5467L4.51337 8.64002L6.4267 6.72668" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.2401 10.5467L12.1534 8.64002L10.2401 6.72668" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M8.96671 6.72668L7.70004 10.5467" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M14.0601 4.18V15H2.60672V1H10.8801L14.0601 4.18Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M14.0601 4.18V4.82H10.2401V1H10.8801L14.0601 4.18Z" stroke-width="1.5" stroke-miterlimit="10"></path></svg><a href="https://developers.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Develop with Snowflake</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><path d="M7.99999 6.09338L8.39332 6.92672L9.27332 7.06672L8.63999 7.71338L8.78665 8.64005L7.99999 8.20005L7.21332 8.64005L7.35999 7.71338L6.72665 7.06672L7.60665 6.92672L7.99999 6.09338Z" fill="#5D6A85"></path><path d="M11.82 6.09338L12.2133 6.92672L13.0933 7.06672L12.4533 7.71338L12.6067 8.64005L11.82 8.20005L11.0333 8.64005L11.18 7.71338L10.5467 7.06672L11.4267 6.92672L11.82 6.09338Z" fill="#5D6A85"></path><path d="M4.18001 6.09338L4.57334 6.92672L5.45334 7.06672L4.82001 7.71338L4.96668 8.64005L4.18001 8.20005L3.39334 8.64005L3.54668 7.71338L2.90668 7.06672L3.78668 6.92672L4.18001 6.09338Z" fill="#5D6A85"></path><path d="M1 5.45339V9.27339C1 9.6111 1.13415 9.93497 1.37295 10.1738C1.61175 10.4126 1.93562 10.5467 2.27333 10.5467H6.72667L8 11.8201L9.27333 10.5467H13.7267C14.0644 10.5467 14.3883 10.4126 14.6271 10.1738C14.8658 9.93497 15 9.6111 15 9.27339V5.45339C15 5.11568 14.8658 4.7918 14.6271 4.553C14.3883 4.31421 14.0644 4.18005 13.7267 4.18005H2.27333C1.93562 4.18005 1.61175 4.31421 1.37295 4.553C1.13415 4.7918 1 5.11568 1 5.45339Z" stroke-width="1.5" stroke-miterlimit="10"></path></svg><a href="/feedback" class="mx-1 hover:underline hover:text-primary">Share your feedback</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_2368)"><path d="M4.15999 7.3866H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M4.15999 12.5066H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M4.15999 9.94666H13.1067" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 0.993286H1.59999V15.06H15.6667V0.993286Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M15.6667 4.83329H11.4867H10.2067H1.59999V0.993286H15.6667V4.83329Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.51999 2.91333H4.79999" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M6.07332 2.91333H7.35332" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M8.63332 2.91333H9.91332" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_2368"><rect width="16" height="16" fill="white" transform="translate(0.666656)"></rect></clipPath></defs></svg><a href="https://www.snowflake.com/blog/" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Read the latest on our blog</a></div><div class="flex items-center w-full text-card-description gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none" class="stroke-gray-70 dark:stroke-gray-55"><g clip-path="url(#clip0_2319_1117)"><path d="M15.3334 0.986694H1.33337V11.1667H15.3334V0.986694Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M11.5134 11.1667C12.5664 11.1667 13.4201 10.3131 13.4201 9.26006C13.4201 8.20704 12.5664 7.35339 11.5134 7.35339C10.4604 7.35339 9.60672 8.20704 9.60672 9.26006C9.60672 10.3131 10.4604 11.1667 11.5134 11.1667Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M10.2401 11.1666H12.7867V14.3466L11.5134 13.7133L10.2401 14.3466V11.1666Z" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.88004 4.16663H12.7867" stroke-width="1.5" stroke-miterlimit="10"></path><path d="M3.88004 7.34668H8.33337" stroke-width="1.5" stroke-miterlimit="10"></path></g><defs><clipPath id="clip0_2319_1117"><rect width="16" height="16" fill="white" transform="translate(0.333374)"></rect></clipPath></defs></svg><a href="https://learn.snowflake.com" class="mx-1 hover:underline hover:text-primary" target="_blank" rel="noreferrer">Get your own certification</a></div></div><div class="pt-8 md:flex justify-between"><div class="flex space-x-4 text-xs mb-4 md:mb-0 text-secondary"><a href="https://www.snowflake.com/privacy-policy/" class="hover:text-primary hover:underline">Privacy Notice</a><a href="https://www.snowflake.com/legal/snowflake-site-terms/" class="hover:text-primary hover:underline">Site Terms</a><span>© <!-- -->2024<!-- --> Snowflake, Inc. <!-- -->All Rights Reserved<!-- -->.<!-- --></span></div></div></footer></div><aside class="w-full xl:w-64 text-sm xl:sticky xl:top-8 xl:pb-16 block xl:pl-8 max-h-[calc(100vh-107px)] overflow-y-auto mb-4 md:mb-0 print:hidden"><div class="mb-4 md:mb-8 onthispage border md:border-0 rounded-md px-3 py-2 md:p-0" role="complementary"><label for="on-this-page-checkbox"><div class="flex items-center"><div class="block md:hidden mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"></path></svg></div><p class="font-semibold text-header">On this page</p></div></label><input type="checkbox" id="on-this-page-checkbox" class="peer hidden"/><ol class="hidden peer-checked:block md:block"><li class="my-3 break-words hover:underline "><a href="#introduction">Introduction</a></li><li class="my-3 break-words hover:underline "><a href="#a-simple-example-that-identifies-a-sequence-of-rows">A Simple Example That Identifies a Sequence of Rows</a></li><li class="my-3 break-words hover:underline "><a href="#partitioning-and-sorting-the-rows">Partitioning and Sorting the Rows</a></li><li class="my-3 break-words hover:underline "><a href="#defining-the-pattern-of-rows-to-match">Defining the Pattern of Rows to Match</a></li><li class="my-3 break-words hover:underline "><a href="#specifying-output-rows">Specifying Output Rows</a></li><li class="my-3 break-words hover:underline "><a href="#returning-information-about-the-match">Returning Information About the Match</a></li><li class="my-3 break-words hover:underline "><a href="#specifying-where-to-search-for-the-next-match">Specifying Where to Search for the Next Match</a></li><li class="my-3 break-words hover:underline "><a href="#best-practices">Best Practices</a></li><li class="my-3 break-words hover:underline "><a href="#avoiding-analytic-errors">Avoiding Analytic Errors</a></li><li class="my-3 break-words hover:underline "><a href="#examples">Examples</a></li><li class="my-3 break-words hover:underline "><a href="#troubleshooting">Troubleshooting</a></li></ol></div><div class="mb-8 border md:border-0 rounded-md px-3 py-2 md:p-0"><label for="related-topics-checkbox"><div class="flex items-center"><div class="block md:hidden mr-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="caret-right" class="svg-inline--fa fa-caret-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"></path></svg></div><p class="font-semibold text-header">Related content</p></div></label><input type="checkbox" id="related-topics-checkbox" class="peer hidden"/><ol class="hidden peer-checked:block md:block"><li class="my-2 hover:underline"><a href="/user-guide/../sql-reference/constructs/match_recognize">MATCH_RECOGNIZE</a></li></ol></div></aside></div></div></main><div id="overlay-root" class="lg:hidden"></div></div><div id="popup-root"></div></div><div class="bottom-10 right-10 z-90 fixed print:hidden" id="language-picker"><div class="text-xs relative group"><div class="cursor-pointer bg-level-3 px-4 py-3 rounded-md">Language<!-- -->: <!-- --><strong>English</strong></div><ul class="list-group"><div class="z-50 px-4 py-1 w-28 rounded-lg bg-level-2 drop-shadow-xl group-hover:flex hidden flex flex-wrap-reverse absolute right-0 bottom-10 animate-fade-in-up"><li class="my-2 w-full text-right text-link"><a href="/en/user-guide/match-recognize-introduction" class="hover:text-link">English</a></li><li class="my-2 w-full text-right "><a href="/fr/user-guide/match-recognize-introduction" class="hover:text-link">Français</a></li><li class="my-2 w-full text-right "><a href="/de/user-guide/match-recognize-introduction" class="hover:text-link">Deutsch</a></li><li class="my-2 w-full text-right "><a href="/ja/user-guide/match-recognize-introduction" class="hover:text-link">日本語</a></li><li class="my-2 w-full text-right "><a href="/ko/user-guide/match-recognize-introduction" class="hover:text-link">한국어</a></li><li class="my-2 w-full text-right "><a href="/pt/user-guide/match-recognize-introduction" class="hover:text-link">Português</a></li></div></ul></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\n\n\n  \n  \u003csection id=\"identifying-sequences-of-rows-that-match-a-pattern\"\u003e\n\u003ch1\u003eIdentifying Sequences of Rows That Match a Pattern\u003ca class=\"headerlink\" href=\"#identifying-sequences-of-rows-that-match-a-pattern\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h1\u003e\n\n\n\u003csection id=\"introduction\"\u003e\n\u003ch2\u003eIntroduction\u003ca class=\"headerlink\" href=\"#introduction\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn some cases, you might need to identify sequences of table rows that match a pattern. For example, you might need to:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eDetermine which users followed a specific sequence of pages and actions on your website before opening a support ticket or\nmaking a purchase.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eFind the stocks with prices that followed a V-shaped or W-shaped recovery over a period of time.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eLook for patterns in sensor data that might indicate an upcoming system failure.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo identify sequences of rows that match a specific pattern, use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e subclause of the\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/from\"\u003e\u003cspan class=\"doc\"\u003eFROM\u003c/span\u003e\u003c/a\u003e clause.\u003c/p\u003e\n\u003cdiv class=\"admonition note\"\u003e\n\u003cp class=\"admonition-title\"\u003eNote\u003c/p\u003e\n\u003cp\u003eYou cannot use the MATCH_RECOGNIZE clause in a \u003cstrong\u003erecursive\u003c/strong\u003e \u003ca class=\"reference internal\" href=\"queries-cte\"\u003e\u003cspan class=\"doc\"\u003ecommon table expression (CTE)\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"a-simple-example-that-identifies-a-sequence-of-rows\"\u003e\n\u003ch2\u003eA Simple Example That Identifies a Sequence of Rows\u003ca class=\"headerlink\" href=\"#a-simple-example-that-identifies-a-sequence-of-rows\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAs an example, suppose that a table contains data about stock prices. Each row contains the closing price of each stock symbol on\na specific day. The table contains the following columns:\u003c/p\u003e\n\u003ctable class=\"docutils align-default\"\u003e\n\u003ccolgroup\u003e\n\u003ccol style=\"width: 50.0%\"\u003e\n\u003ccol style=\"width: 50.0%\"\u003e\n\u003c/colgroup\u003e\n\u003cthead\u003e\n\u003ctr class=\"row-odd\"\u003e\u003cth class=\"head\"\u003e\u003cp\u003eColumn Name\u003c/p\u003e\u003c/th\u003e\n\u003cth class=\"head\"\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr class=\"row-even\"\u003e\u003ctd\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice_date\u003c/span\u003e\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cp\u003eThe date of the closing price.\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr class=\"row-odd\"\u003e\u003ctd\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cp\u003eThe closing stock price on that date.\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eSuppose that you want to detect a pattern in which the stock price decreases and then increases, producing a “V” shape in the\ngraph of the stock price.\u003c/p\u003e\n\u003cfigure class=\"align-default\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/match-recognize-stock-chart.png\"\u003e\u003cimg alt=\"Chart of the Stock Price for \u0026quot;ABCD\u0026quot;\" src=\"../_images/match-recognize-stock-chart.png\" style=\"width: 660.0px; height: 435.0px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cp\u003e(This example does not account for cases in which the stock price does not change from day to day.)\u003c/p\u003e\n\u003cp\u003eIn this example, for a given stock symbol, you want to find sequences of rows where the value in the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e column decreases\nbefore increasing.\u003c/p\u003e\n\u003cfigure class=\"align-default\" id=\"label-match-recognize-figure-overlapping-matches\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/match-recognize-row-sequences.png\"\u003e\u003cimg alt=\"Sequence of rows that match the \u0026quot;V\u0026quot; pattern\" src=\"../_images/match-recognize-row-sequences.png\" style=\"width: 615.0px; height: 419.25px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cp\u003eFor each sequence of rows that matches this pattern, you want to return:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eA number that identifies the sequence (the first matching sequence, the second matching sequence, etc.).\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe day before the stock price decreased.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe last day when the stock price increased.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days in the “V” pattern.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days when the stock price decreased.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days when the stock price increased.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e+---------+--------------+------------+------------+------------------+---------------+---------------+\n| COMPANY | MATCH_NUMBER | START_DATE | END_DATE   | ROWS_IN_SEQUENCE | NUM_DECREASES | NUM_INCREASES |\n|---------+--------------+------------+------------+------------------+---------------+---------------|\n| ABCD    |            1 | 2020-10-01 | 2020-10-04 |                4 |             1 |             2 |\n| ABCD    |            2 | 2020-10-04 | 2020-10-08 |                5 |             1 |             3 |\n+---------+--------------+------------+------------+------------------+---------------+---------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"0\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eThe following figure illustrates the price decreases (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eNUM_DECREASES\u003c/span\u003e\u003c/code\u003e) and increases (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eNUM_INCREASES\u003c/span\u003e\u003c/code\u003e) within the “V” pattern\nthat the returned data captures. Note that \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eROWS_IN_SEQUENCE\u003c/span\u003e\u003c/code\u003e includes an initial row that is not counted in \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eNUM_DECREASES\u003c/span\u003e\u003c/code\u003e\nor \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eNUM_INCREASES\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003cfigure class=\"align-default\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/match-recognize-stock-chart-increases-decreases.png\"\u003e\u003cimg alt=\"The number of price decreases and increases in each \u0026quot;V\u0026quot; pattern\" src=\"../_images/match-recognize-stock-chart-increases-decreases.png\" style=\"width: 660.0px; height: 503.25px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cp\u003eTo produce this output, you can use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause shown below.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n      \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"ni\"\u003eFIRST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003estart_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"ni\"\u003eLAST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eend_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003erows_in_sequence\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e\u003cspan class=\"p\"\u003e.*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003enum_decreases\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\u003cspan class=\"p\"\u003e.*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003enum_increases\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eONE\u003c/span\u003e \u003cspan class=\"ni\"\u003eROW\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e \u003cspan class=\"ni\"\u003eSKIP\u003c/span\u003e \u003cspan class=\"ni\"\u003eTO\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAST\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_before_decrease\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\u003cspan class=\"p\"\u003e+)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n      \u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n      \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"1\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eAs shown above, the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause consists of many subclauses, each of which serves a different purpose (e.g.\nspecifying the pattern to match, specifying the data to return, etc.).\u003c/p\u003e\n\u003cp\u003eThe next sections explain each of the subclauses in this example.\u003c/p\u003e\n\u003csection id=\"setting-up-the-data-for-this-example\"\u003e\n\u003ch3\u003eSetting Up the Data For This Example\u003ca class=\"headerlink\" href=\"#setting-up-the-data-for-this-example\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eTo set up the data used in this example, run the following SQL statements:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ecreate\u003c/span\u003e \u003cspan class=\"ni\"\u003etable\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e \u003cspan class=\"ni\"\u003eTEXT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e \u003cspan class=\"ni\"\u003eDATE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"ni\"\u003eINT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"2\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003einsert\u003c/span\u003e \u003cspan class=\"ni\"\u003einto\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e \u003cspan class=\"ni\"\u003evalues\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-01'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-01'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e89\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-02'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e36\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-02'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e24\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-03'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e39\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-03'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e37\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-04'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-04'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e63\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-05'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-05'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e65\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-06'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e47\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-06'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e56\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-07'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e71\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-07'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-08'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e80\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-08'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e54\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-09'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e75\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-09'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-10'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e63\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003e'2020-10-10'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"3\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"step-1-specifying-the-order-and-grouping-of-rows\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-example-partition-order\"\u003e\u003c/span\u003e\u003ch3\u003eStep 1: Specifying the Order and Grouping of Rows\u003ca class=\"headerlink\" href=\"#step-1-specifying-the-order-and-grouping-of-rows\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe first step in identifying a sequence of rows is defining the grouping and sort order of the rows that you want to search. For\nthe example of finding a “V” pattern in the stock price for a company:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eThe rows should be grouped by company, since you want to find a pattern in the price for a given company.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eWithin each group of rows (the prices for a given company), the rows should be sorted by date in ascending order.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause, you use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eORDER\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e subclauses to specify the grouping and\norder of rows. For example:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"4\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003csection id=\"step-2-defining-the-pattern-to-match\"\u003e\n\u003ch3\u003eStep 2: Defining the Pattern to Match\u003ca class=\"headerlink\" href=\"#step-2-defining-the-pattern-to-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eNext, determine the pattern that matches the sequence of rows that you want to find.\u003c/p\u003e\n\u003cp\u003eTo specify this pattern, you use something similar to a \u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Regular_expression\"\u003eregular expression\u003c/a\u003e.\nIn regular expressions, you use a combination of literals and metacharacters to specify a pattern to match in a string.\u003c/p\u003e\n\u003cp\u003eFor example, to find a sequence of characters that includes:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eany single character, followed by\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eone or more uppercase letters, followed by\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eone or more lowercase letters\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eyou can use the following Perl-compatible regular expression:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e.[A-Z]+[a-z]+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"5\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003ewhere:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e.\u003c/span\u003e\u003c/code\u003e matches any single character.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e[A-Z]+\u003c/span\u003e\u003c/code\u003e matches one or more uppercase letters.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e[a-z]+\u003c/span\u003e\u003c/code\u003e matches one or more lowercase letters.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e+\u003c/span\u003e\u003c/code\u003e is a \u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Regular_expression#Basic_concepts\"\u003equantifier\u003c/a\u003e that specifies that one or more of the\npreceding characters need to match.\u003c/p\u003e\n\u003cp\u003eFor example, the regular expression above matches sequences of characters like:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e1Stock\u003c/span\u003e\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e@SFComputing\u003c/span\u003e\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e%Fn\u003c/span\u003e\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause, you use a similar expression to specify the pattern of rows to match. In this case, finding\nrows that match a “V” pattern involves finding a sequence of rows that includes:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003ethe row before the stock price decreases, followed by\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eone or more rows where the stock price decreases, followed by\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eone or more rows where the stock price increases\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can express this as the following row pattern:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003erow_before_decrease row_with_price_decrease+ row_with_price_increase+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"6\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eRow patterns consist of \u003cem\u003epattern variables\u003c/em\u003e, \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-quantifiers\"\u003e\u003cspan class=\"std std-ref\"\u003equantifiers\u003c/span\u003e\u003c/a\u003e (which are similar to those\nused in regular expressions), and \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-operators\"\u003e\u003cspan class=\"std std-ref\"\u003eoperators\u003c/span\u003e\u003c/a\u003e. A pattern variable defines an expression\nthat is evaluated against a row.\u003c/p\u003e\n\u003cp\u003eIn this row pattern:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e, and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e are pattern variables. The expressions for\nthese pattern variables should evaluate to:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eany row (the row before the stock price decreases)\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ea row where the stock price decreases\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ea row where the stock price increases\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e is similar to \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e.\u003c/span\u003e\u003c/code\u003e in a regular expression. In the following regular expression, \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e.\u003c/span\u003e\u003c/code\u003e matches any\nsingle character that appears before the first uppercase letter in the pattern.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e.[A-Z]+[a-z]+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"7\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eSimilarly, in the row pattern, \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e matches any single row that appears before the first row with a price\ndecrease.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e+\u003c/span\u003e\u003c/code\u003e quantifiers after \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e specify that one or more rows of each\nof these must match.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause, you use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclause to specify the row pattern to match:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_before_decrease\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\u003cspan class=\"p\"\u003e+)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"8\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eTo specify the expressions for the pattern variables, you use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e subclause:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"9\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003ewhere:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e does not need to be defined here because it should evaluate to any row.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e is defined as an expression for a row with a price decrease.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e is defined as an expression for a row with a price increase.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo compare the prices in different rows, the definitions of these variables use the\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions\"\u003e\u003cspan class=\"std std-ref\"\u003enavigational function\u003c/span\u003e\u003c/a\u003e \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e  to specify price for the previous row.\u003c/p\u003e\n\u003cp\u003eThe row pattern matches two sequences of rows, as illustrated below:\u003c/p\u003e\n\u003cfigure class=\"align-default\" id=\"label-match-recognize-figure-first-matching-sequence\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/match-recognize-first-pattern-match.png\"\u003e\u003cimg alt=\"First sequence of rows that match the \u0026quot;V\u0026quot; pattern\" src=\"../_images/match-recognize-first-pattern-match.png\" style=\"width: 720.0px; height: 419.25px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cfigure class=\"align-default\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/match-recognize-second-pattern-match.png\"\u003e\u003cimg alt=\"Second sequence of rows that match the \u0026quot;V\u0026quot; pattern\" src=\"../_images/match-recognize-second-pattern-match.png\" style=\"width: 720.0px; height: 419.25px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cp\u003eFor the first matching sequence of rows:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e matches the row with the stock price \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e50\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e matches the next row with the stock price \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e36\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e matches the next two rows with the stock prices \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e39\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e42\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor the second matching sequence of rows:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_before_decrease\u003c/span\u003e\u003c/code\u003e matches the row with the stock price \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e42\u003c/span\u003e\u003c/code\u003e. (This is the same row that is at the end of the first\nmatching sequence of rows.)\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e matches the next row with the stock price \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e30\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e matches the next two rows with the stock prices \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e47\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e71\u003c/span\u003e\u003c/code\u003e, and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e80\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003csection id=\"step-3-specifying-the-rows-to-return\"\u003e\n\u003ch3\u003eStep 3: Specifying the Rows to Return\u003ca class=\"headerlink\" href=\"#step-3-specifying-the-rows-to-return\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e can either return:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003ea single row that summarizes each matching sequence, or\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eeach row in each matching sequence\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor this example, you want to return a summary of each matching sequence. Use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e subclause to specify\nthat one row should be returned for each matching sequence.\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eONE\u003c/span\u003e \u003cspan class=\"ni\"\u003eROW\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"10\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"step-4-specifying-the-measures-to-select\"\u003e\n\u003ch3\u003eStep 4: Specifying the Measures to Select\u003ca class=\"headerlink\" href=\"#step-4-specifying-the-measures-to-select\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWhen you use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e does not return any of the columns in the table (except for the\ncolumn specified by \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e), even when \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e is in a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"pre\"\u003e*\u003c/span\u003e\u003c/code\u003e statement. To specify the\ndata to be returned by this statement, you must define \u003cem\u003emeasures\u003c/em\u003e. Measures are additional columns of data that are calculated for\neach matching sequence of rows (e.g. the starting date of the sequence, the ending date of the sequence, the number of days in the\nsequence, etc.).\u003c/p\u003e\n\u003cp\u003eUse the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause to specify these additional columns to return in the output. The general format for defining a\nmeasure is:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"gi\"\u003eexpression\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"gi\"\u003ecolumn_name\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"11\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003ewhere:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003eexpression\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e specifies the information about the sequence that you want to return. For the expression, you can use\nfunctions with columns from the table and pattern variables that you defined earlier.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003ecolumn_name\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e specifies the name of the column that will be returned in the output.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor this example, you can define the following measures:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eA number that identifies the sequence (the first matching sequence, the second matching sequence, etc.).\u003c/p\u003e\n\u003cp\u003eFor this measure, use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e function, which returns the number of the match. The numbers start with \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e1\u003c/span\u003e\u003c/code\u003e\nfor the first match for a \u003ca class=\"reference internal\" href=\"#label-match-recognize-introduction-example-partition-order\"\u003e\u003cspan class=\"std std-ref\"\u003epartition\u003c/span\u003e\u003c/a\u003e of rows. If there are\nmultiple partitions, the number starts with \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e1\u003c/span\u003e\u003c/code\u003e for each partition.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe day before the stock price decreased.\u003c/p\u003e\n\u003cp\u003eFor this measure, use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFIRST()\u003c/span\u003e\u003c/code\u003e function, which returns the value of the expression for the first row in the matching\nsequence. In this example, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFIRST(price_date)\u003c/span\u003e\u003c/code\u003e returns the value of the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice_date\u003c/span\u003e\u003c/code\u003e column in the first row in each\nmatching sequence, which is the date before the stock price decreased.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe last day when the stock price increased.\u003c/p\u003e\n\u003cp\u003eFor this measure, use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAST()\u003c/span\u003e\u003c/code\u003e function, which returns the value of the expression for the last row in the matching\nsequence.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days in the “V” pattern.\u003c/p\u003e\n\u003cp\u003eFor this measure, use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT(*)\u003c/span\u003e\u003c/code\u003e. Because you are specifying \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT(*)\u003c/span\u003e\u003c/code\u003e in the definition of a measure, the asterisk\n(\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e*\u003c/span\u003e\u003c/code\u003e) specifies that you want to count all of the rows in a matching sequence (not all of the rows in the table).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days when the stock decreased.\u003c/p\u003e\n\u003cp\u003eFor this measure, use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT(row_with_price_decrease.*)\u003c/span\u003e\u003c/code\u003e. The period followed by an asterisk (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e.*\u003c/span\u003e\u003c/code\u003e) specifies that you\nwant to count all of the rows in a matching sequence that match the pattern variable \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003erow_with_price_decrease\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe number of days when the stock increased.\u003c/p\u003e\n\u003cp\u003eFor this measure, use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT(row_with_price_increase.*)\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe following is the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause that defines the measures above:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n    \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFIRST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003estart_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eLAST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eend_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003enum_matching_rows\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_with_price_decrease\u003c/span\u003e\u003cspan class=\"p\"\u003e.*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003enum_decreases\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\u003cspan class=\"p\"\u003e.*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003enum_increases\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"12\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eThe following shows an example of the output with the selected measures:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e+---------+--------------+------------+------------+-------------------+---------------+---------------+\n| COMPANY | MATCH_NUMBER | START_DATE | END_DATE   | NUM_MATCHING_ROWS | NUM_DECREASES | NUM_INCREASES |\n|---------+--------------+------------+------------+-------------------+---------------+---------------|\n| ABCD    |            1 | 2020-10-01 | 2020-10-04 |                 4 |             1 |             2 |\n| ABCD    |            2 | 2020-10-04 | 2020-10-08 |                 5 |             1 |             3 |\n+---------+--------------+------------+------------+-------------------+---------------+---------------+\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"13\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eAs mentioned earlier, the output includes the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ecompany\u003c/span\u003e\u003c/code\u003e column because the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause specifies that column.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"step-5-specifying-where-to-continue-finding-the-next-match\"\u003e\n\u003ch3\u003eStep 5: Specifying Where to Continue Finding the Next Match\u003ca class=\"headerlink\" href=\"#step-5-specifying-where-to-continue-finding-the-next-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eAfter finding a matching sequence of rows, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e continues to find the next matching sequence. You can specify\nwhere \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e should start searching for the next matching sequence.\u003c/p\u003e\n\u003cp\u003eAs shown in the \u003ca class=\"reference internal\" href=\"#label-match-recognize-figure-overlapping-matches\"\u003e\u003cspan class=\"std std-ref\"\u003eillustration of matching sequences\u003c/span\u003e\u003c/a\u003e, a row can be part of\nmore than one matching sequence. In this example, the row for \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e2020-10-04\u003c/span\u003e\u003c/code\u003e is part of two “V” patterns.\u003c/p\u003e\n\u003cp\u003eFor this example, to find the next matching sequence, you can start from a row where the price increased. To specify this in the\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause, use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e \u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"ni\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e \u003cspan class=\"ni\"\u003eSKIP\u003c/span\u003e \u003cspan class=\"ni\"\u003eTO\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAST\u003c/span\u003e \u003cspan class=\"gi\"\u003erow_with_price_increase\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"14\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003ewhere \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eTO\u003c/span\u003e \u003cspan class=\"pre\"\u003eLAST\u003c/span\u003e \u003cspan class=\"pre\"\u003erow_with_price_increase\u003c/span\u003e\u003c/code\u003e specifies that you want to start searching at\n\u003ca class=\"reference internal\" href=\"#label-match-recognize-figure-first-matching-sequence\"\u003e\u003cspan class=\"std std-ref\"\u003ethe last row where the price increased\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"partitioning-and-sorting-the-rows\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-partitioning-ordering\"\u003e\u003c/span\u003e\u003ch2\u003ePartitioning and Sorting the Rows\u003ca class=\"headerlink\" href=\"#partitioning-and-sorting-the-rows\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe first step in identifying patterns across rows is putting the rows in an order that allows you to find your patterns. For\nexample, if you want to find a pattern of changes in stock prices over time for each company’s stock:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003ePartition the rows by company, so that you can search across each company’s stock prices.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSort the rows within each partition by date, so that you can find changes to a company’s stock price over time.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo partition the data and specify the order of rows, use the \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-partition-by\"\u003e\u003cspan class=\"std std-ref\"\u003ePARTITION BY\u003c/span\u003e\u003c/a\u003e and\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-order-by\"\u003e\u003cspan class=\"std std-ref\"\u003eORDER BY\u003c/span\u003e\u003c/a\u003e subclauses in \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e. For example:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"15\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003e(The \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause for \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e works the same way as the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause for\n\u003ca class=\"reference internal\" href=\"../sql-reference/functions-analytic\"\u003e\u003cspan class=\"doc\"\u003ewindow functions\u003c/span\u003e\u003c/a\u003e.)\u003c/p\u003e\n\u003cp\u003eAn additional benefit of partitioning is that it can take advantage of parallel processing.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"defining-the-pattern-of-rows-to-match\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-defining-pattern\"\u003e\u003c/span\u003e\u003ch2\u003eDefining the Pattern of Rows to Match\u003ca class=\"headerlink\" href=\"#defining-the-pattern-of-rows-to-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWith \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e, you can find a sequence of rows that match a pattern. You specify this pattern in terms of rows that\nmatch specific conditions.\u003c/p\u003e\n\u003cp\u003eIn the example of the table of daily stock prices for different companies, suppose that you want to find a sequence of three rows\nin which:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eOn a given day, the stock price for a company is less than 45.00.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eOn the next day, the stock price decreases by at least 10%.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eOn the following day, the stock price increases by at least 3%.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo find this sequence, you specify a pattern that matches three rows with the following conditions:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eIn the first row in the sequence, the value of the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e column must be less than 45.00.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eIn the second row, the value of the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e column must be less than or equal to 90% of the value of the previous row.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eIn the third row, the value of the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e column must be greater than or equal to 105% of the value of the previous row.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe second and third rows have conditions that require a comparison between column values in different rows. To compare the value\nin one row against the value in the previous or next row, use the functions \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e or \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLEAD()\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG(\u003c/span\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003ecolumn\u003c/span\u003e\u003c/em\u003e\u003cspan class=\"pre\"\u003e)\u003c/span\u003e\u003c/code\u003e returns the value of \u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003ecolumn\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e in the previous row.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLEAD(\u003c/span\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003ecolumn\u003c/span\u003e\u003c/em\u003e\u003cspan class=\"pre\"\u003e)\u003c/span\u003e\u003c/code\u003e returns the value of \u003ccode class=\"samp docutils literal notranslate\"\u003e\u003cem\u003e\u003cspan class=\"pre\"\u003ecolumn\u003c/span\u003e\u003c/em\u003e\u003c/code\u003e in the next row.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor this example, you can specify the conditions for the three rows as:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eThe first row in the sequence must have \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eprice\u003c/span\u003e \u003cspan class=\"pre\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"pre\"\u003e45.00\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe second row must have \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG(price)\u003c/span\u003e \u003cspan class=\"pre\"\u003e*\u003c/span\u003e \u003cspan class=\"pre\"\u003e0.90\u003c/span\u003e \u003cspan class=\"pre\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe third row must have \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG(price)\u003c/span\u003e \u003cspan class=\"pre\"\u003e*\u003c/span\u003e \u003cspan class=\"pre\"\u003e1.05\u003c/span\u003e \u003cspan class=\"pre\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWhen specifying the pattern for the sequence of these three rows, you use a pattern variable for each row that has a different\ncondition. Use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e subclause to define each pattern variable as a row that must meet a specified condition. The\nfollowing example defines three pattern variables for the three rows:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003edefine\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003elow_priced_stock\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003edecreased_10_percent\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003eincreased_05_percent\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"16\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eTo define the pattern itself, use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclause. In this subclause, use a regular expression to specify the\npattern to match. For the building blocks of the expression, use the pattern variables that you defined. For example, the\nfollowing pattern finds the sequence of three rows:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003epattern\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"gi\"\u003elow_priced_stock\u003c/span\u003e  \u003cspan class=\"gi\"\u003edecreased_10_percent\u003c/span\u003e  \u003cspan class=\"gi\"\u003eincreased_05_percent\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"17\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eThe SQL statement below uses the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclauses shown above:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 |    30 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"18\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe next sections explain how to define patterns that match specific numbers of rows and rows that appear at the beginning or end\nof a partition.\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ca class=\"reference internal\" href=\"#label-match-recognize-introduction-pattern-variable-quantifiers\"\u003e\u003cspan class=\"std std-ref\"\u003eUsing Quantifiers With Pattern Variables\u003c/span\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca class=\"reference internal\" href=\"#label-match-recognize-introduction-search-start-or-end-partition\"\u003e\u003cspan class=\"std std-ref\"\u003eMatching Patterns Relative to the Beginning or End of a Partition\u003c/span\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"admonition note\"\u003e\n\u003cp class=\"admonition-title\"\u003eNote\u003c/p\u003e\n\u003cp\u003eMATCH_RECOGNIZE uses \u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Backtracking\"\u003ebacktracking\u003c/a\u003e to match patterns. As is the case with other\n\u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Regular_expression#Implementations_and_running_times\"\u003eregular expression engines that use backtracking\u003c/a\u003e,\nsome combinations of patterns and data to match can take a long time to execute, which can result in high computation costs.\u003c/p\u003e\n\u003cp\u003eTo improve performance, define a pattern that is as specific as possible:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eMake sure that each row matches only one symbol or a small number of symbols\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAvoid using symbols that match every row (e.g. symbols not in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clause or symbols that are defined as true)\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eDefine an upper limit for quantifiers (e.g. \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e{,10}\u003c/span\u003e\u003c/code\u003e instead of \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e*\u003c/span\u003e\u003c/code\u003e).\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor example, the following pattern can result in increased costs if no rows match:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"gi\"\u003esymbol1\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eany_symbol\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"gi\"\u003esymbol2\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"19\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eIf there is an upper limit to the number of rows that you want to match, you can specify that limit in the quantifiers to\nimprove performance. In addition, rather than specifying that you want to find \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eany_symbol\u003c/span\u003e\u003c/code\u003e that follows \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esymbol1\u003c/span\u003e\u003c/code\u003e, you can\nlook for a row that is not \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003esymbol1\u003c/span\u003e\u003c/code\u003e  (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003enot_symbol1\u003c/span\u003e\u003c/code\u003e, in this example);\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"gi\"\u003esymbol1\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"ni\"\u003elimit\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"gi\"\u003enot_symbol1\u003c/span\u003e\u003cspan class=\"p\"\u003e{,\u003c/span\u003e\u003cspan class=\"ni\"\u003elimit\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"gi\"\u003esymbol2\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"20\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eIn general, you should monitor the query execution time to verify that the query is not taking longer than expected.\u003c/p\u003e\n\u003c/div\u003e\n\u003csection id=\"using-quantifiers-with-pattern-variables\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-pattern-variable-quantifiers\"\u003e\u003c/span\u003e\u003ch3\u003eUsing Quantifiers With Pattern Variables\u003ca class=\"headerlink\" href=\"#using-quantifiers-with-pattern-variables\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIn the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclause, you use a regular expression to specify a pattern of rows to match. You use pattern variables\nto identify rows in the sequence that meet specific conditions.\u003c/p\u003e\n\u003cp\u003eIf you need to match multiple rows that meet a specific condition, you can use a\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-quantifiers\"\u003e\u003cspan class=\"std std-ref\"\u003equantifier\u003c/span\u003e\u003c/a\u003e, as you would in a\n\u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Regular_expression#Basic_concepts\"\u003eregular expression\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eFor example, you can use the quantifier \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e+\u003c/span\u003e\u003c/code\u003e to specify that pattern must include one or more rows in which the stock price\ndecreases by 10%, followed by one or more rows in which the stock price increases by 5%:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003epattern\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003edecreased_10_percent\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eincreased_05_percent\u003c/span\u003e\u003cspan class=\"p\"\u003e+)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003edefine\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003edecreased_10_percent\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003eincreased_05_percent\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"21\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"matching-patterns-relative-to-the-beginning-or-end-of-a-partition\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-search-start-or-end-partition\"\u003e\u003c/span\u003e\u003ch3\u003eMatching Patterns Relative to the Beginning or End of a Partition\u003ca class=\"headerlink\" href=\"#matching-patterns-relative-to-the-beginning-or-end-of-a-partition\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eTo find a sequence of rows relative to the beginning or end of a partition, you can use the metacharacters \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e^\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$\u003c/span\u003e\u003c/code\u003e in the\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclause. These metacharacters in a row pattern have a similar purpose as\n\u003ca class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended\"\u003ethe same metacharacters have in a regular expression\u003c/a\u003e:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e^\u003c/span\u003e\u003c/code\u003e represents the beginning of a partition.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$\u003c/span\u003e\u003c/code\u003e represents the end of a partition.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe following pattern matches a stock with a price greater than 75.00 at the beginning of the partition:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(^\u003c/span\u003e \u003cspan class=\"gi\"\u003eGT75\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n    \u003cspan class=\"gi\"\u003eGT75\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e75\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"22\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eNote that \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e^\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$\u003c/span\u003e\u003c/code\u003e specify positions and do not represent the rows at those positions (much like \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e^\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$\u003c/span\u003e\u003c/code\u003e in a\nregular expression specify the position and not the characters at those positions). In \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"pre\"\u003e(^\u003c/span\u003e \u003cspan class=\"pre\"\u003eGT75)\u003c/span\u003e\u003c/code\u003e, the first row\n(not the second row) must have a price greater than 75.00. In \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"pre\"\u003e(GT75\u003c/span\u003e \u003cspan class=\"pre\"\u003e$)\u003c/span\u003e\u003c/code\u003e, the last row (not the second-to-last row)\nmust be greater than 75.\u003c/p\u003e\n\u003cp\u003eHere is a complete example with \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e^\u003c/span\u003e\u003c/code\u003e. Note that although the XYZ stock has a price higher than 60.00 in more than one\nrow in this partition, only the row at the start of the partition is considered a match.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(^\u003c/span\u003e \u003cspan class=\"gi\"\u003eGT60\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eGT60\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+---------+------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-01 |    89 |       1 |                1 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"23\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eHere is a complete example with \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e$\u003c/span\u003e\u003c/code\u003e.  Note that although the ABCD stock has a price higher than 50.00 in more than\none row in this partition, only the row at the end of the partition is considered a match.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eGT50\u003c/span\u003e \u003cspan class=\"p\"\u003e$)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eGT50\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+---------+------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-10 |    63 |       1 |                1 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"24\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"specifying-output-rows\"\u003e\n\u003ch2\u003eSpecifying Output Rows\u003ca class=\"headerlink\" href=\"#specifying-output-rows\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eStatements that use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e can choose which rows to output.\u003c/p\u003e\n\u003csection id=\"generating-one-row-for-each-match-vs-generating-all-rows-for-each-match\"\u003e\n\u003cspan id=\"label-one-row-per-match-vs-all-rows-per-match\"\u003e\u003c/span\u003e\u003ch3\u003eGenerating One Row for Each Match vs Generating All Rows for Each Match\u003ca class=\"headerlink\" href=\"#generating-one-row-for-each-match-vs-generating-all-rows-for-each-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWhen \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e finds a match, the output can be either one summary row for the entire match, or one row\nfor each data point in the pattern.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eALL\u003c/span\u003e \u003cspan class=\"pre\"\u003eROWS\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e specifies that the output include all rows in the match.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e specifies that the output include only one row for each match in each partition.\u003c/p\u003e\n\u003cp\u003eThe projection clause of the SELECT statement can use only the output of the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e.\nEffectively, this means that the SELECT statement can only use columns from the following subclauses of\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003c/div\u003e\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e subclause.\u003c/p\u003e\n\u003cp\u003eAll rows in a match are from the same partition, and therefore have the same value for the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e\nsubclause expressions.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause.\u003c/p\u003e\n\u003cp\u003eWhen you use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"pre\"\u003e...\u003c/span\u003e \u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e, the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause generates not only\nexpressions that return the same value for all rows in the match (e.g. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e), but also expressions\nthat can return different values for different rows in the match (e.g. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_SEQUENCE_NUMBER()\u003c/span\u003e\u003c/code\u003e). If you use\nexpressions that can return different values for different rows in the match, the output is not deterministic.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you are familiar with aggregate functions and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e, the following analogy might be helpful in\nunderstanding \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause in \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e groups data similarly to the way that \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e\ngroups data in a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSELECT\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause in a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"pre\"\u003e...\u003c/span\u003e \u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e allows aggregate functions, such as\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT()\u003c/span\u003e\u003c/code\u003e, that return the same value for each row in the match, as \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e does.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you use only aggregate functions and expressions that return the same value for each row in the match,\nthen \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e...\u003c/span\u003e \u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e behaves similarly to \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e and aggregate functions.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe default is \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThe following examples show the difference in outputs between \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eALL\u003c/span\u003e \u003cspan class=\"pre\"\u003eROWS\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e.\nThese two code examples are almost identical except for the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e...ROW(S)\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e clause. (In typical usage, a SQL\nstatement with \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e has different \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclauses than a SQL statement with\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eALL\u003c/span\u003e \u003cspan class=\"pre\"\u003eROWS\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e.)\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Num Rows In Match\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+-------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # | Num Rows In Match |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+---------+------------------+-------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-02 |    36 |       1 |                1 |                 1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-03 |    39 |       1 |                2 |                 2 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |       1 |                3 |                 3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 |    30 |       2 |                1 |                 1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |       2 |                2 |                 2 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 |    71 |       2 |                3 |                 3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+-------------------+\u003c/span\u003e\n\n\u003cspan class=\"py\"\u003e-- As you can see, the MATCH_SEQUENCE_NUMBER isn't useful when using\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- \"ONE ROW PER MATCH\". But the COUNT(*), which wasn't very useful in\u003c/span\u003e\n\u003cspan class=\"py\"\u003e-- \"ALL ROWS PER MATCH\", is useful here.\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"ni\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Num Rows In Match\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eONE\u003c/span\u003e \u003cspan class=\"ni\"\u003eROW\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'ABCD'\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+---------+------------------+-------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | Match # | Match Sequence # | Num Rows In Match |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+---------+------------------+-------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |       1 |                3 |                 3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |       2 |                3 |                 3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+---------+------------------+-------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"25\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/section\u003e\n\u003csection id=\"excluding-rows-from-the-output\"\u003e\n\u003ch3\u003eExcluding Rows from the Output\u003ca class=\"headerlink\" href=\"#excluding-rows-from-the-output\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eFor some queries, you might want to include only part of the pattern in the output. For example, you might want to\nfind patterns in which stocks rose many days in a row, but display only the peaks and some summary information\n(for example, the number of days of price increases before each peak).\u003c/p\u003e\n\u003cp\u003eYou can use \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-exclusions\"\u003e\u003cspan class=\"std std-ref\"\u003eexclusion syntax\u003c/span\u003e\u003c/a\u003e in the pattern to tell \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e to\nsearch for a particular pattern variable but not include it in the output. To include a pattern variable as part of\nthe pattern to search for, but not as part of the output, use the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e{-\u003c/span\u003e \u003cspan class=\"pre\"\u003e\u0026lt;pattern_variable\u0026gt;\u003c/span\u003e \u003cspan class=\"pre\"\u003e-}\u003c/span\u003e\u003c/code\u003e notation.\u003c/p\u003e\n\u003cp\u003eHere is a simple example that shows the difference between using exclusion syntax and not using it. This example\ncontains two queries, each of which searches for a stock price that started at less than $45,\nthen decreased, and then increased. The first query does not use exclusion syntax, and therefore shows all\nthe rows. The second query uses the exclusion syntax and does not show the day that the stock price fell.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 |    30 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"26\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"27\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe next example is more realistic. It searches for patterns in which a stock price rose one or more days in a row,\nand then fell one or more days in a row. Because the output could be quite large, this uses exclusion to show only\nthe first day the stock rose (if it rose more than one day in a row) and only the first\nday it dropped (if it dropped more than one day in a row). The pattern is shown below:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-})\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"28\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eThis pattern looks for the following events in order:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eA starting price less than 45.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAn UP, possibly followed immediately by others that are not included in the output.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eA DOWN, possibly followed immediately by others that are not included in the output.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHere are the code and output for versions of the preceding pattern without exclusion and with exclusion:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e   \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-02 |    24 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 |    37 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 |    63 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 |    65 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-06 |    56 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-07 |    50 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"29\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e  \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e  \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e  \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e  \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e   \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'XYZ'\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 |    37 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"30\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"returning-information-about-the-match\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-displaying-information-about-the-match\"\u003e\u003c/span\u003e\u003ch2\u003eReturning Information About the Match\u003ca class=\"headerlink\" href=\"#returning-information-about-the-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"basic-match-information\"\u003e\n\u003ch3\u003eBasic Match Information\u003ca class=\"headerlink\" href=\"#basic-match-information\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIn many cases, you want your query to list not only information from the table that contains the data, but also\ninformation about the patterns that were found. When you want information about the matches themselves, you specify\nthat information in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause can include the following functions, which are specific to \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e: Each time a match is found, it is assigned a sequential match number, starting from one. This\nfunction returns that match number.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_SEQUENCE_NUMBER()\u003c/span\u003e\u003c/code\u003e: Because a pattern usually involves more than one data point, you might want to know which\ndata point is associated with each value from the table. This function returns the sequential number of the data\npoint within the match.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCLASSIFIER()\u003c/span\u003e\u003c/code\u003e: The classifier is the name of the pattern variable that the row matched.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe query below includes a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause with the match number, match sequence number, and classifier.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n       \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Symbol Matched\"\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eCLASSIFIER\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Symbol Matched\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eLESS_THAN_45\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"gi\"\u003e45\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eDECREASED_10_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e90\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eINCREASED_05_PERCENT\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e05\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+----------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # | Symbol Matched       |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+---------+------------------+----------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |       1 |                1 | LESS_THAN_45         |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 |    30 |       1 |                2 | DECREASED_10_PERCENT |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |       1 |                3 | INCREASED_05_PERCENT |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+----------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"31\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause can produce much more information than this. For more details, see\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize\"\u003e\u003cspan class=\"doc\"\u003ethe MATCH_RECOGNIZE reference documentation\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"windows-window-frames-and-navigational-functions\"\u003e\n\u003ch3\u003eWindows, Window Frames, and Navigational Functions\u003ca class=\"headerlink\" href=\"#windows-window-frames-and-navigational-functions\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause operates on a “window” of rows. If the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e contains a \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e\u003c/code\u003e\nsubclause, then each \u003ca class=\"reference internal\" href=\"#label-match-recognize-introduction-partitioning-ordering\"\u003e\u003cspan class=\"std std-ref\"\u003epartition\u003c/span\u003e\u003c/a\u003e is one window. If there is\nno \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePARTITION\u003c/span\u003e\u003c/code\u003e subclause, then the entire input is one window.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e subclause of \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e specifies the symbols in order from left to right. For example:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ni\"\u003eSTART\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"32\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eIf you picture the data as a sequence of rows in ascending order from left to right, you can think of\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e as moving rightward (e.g. from the earliest date to the latest date in the stock price example),\nsearching for a pattern in the rows inside each window.\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e starts with the first row in the window and checks whether that row and the subsequent rows\nmatch the pattern.\u003c/p\u003e\n\u003cp\u003eIn the simplest case, after determining whether there’s a pattern match starting at the first row in the window,\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e moves rightward one row and repeats the process, checking whether the 2nd row is the beginning\nof an occurrence of the pattern. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e continues moving rightward until it reaches the end of the window.\u003c/p\u003e\n\u003cp\u003e(\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e can move rightward by more than one row. For example, you can tell \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e to start\nsearching for the next pattern after the end of the current pattern.)\u003c/p\u003e\n\u003cp\u003eYou can picture this loosely as though there were a “frame” moving rightward inside the window. The left-hand edge\nof that frame is at the first row in the set of rows currently being checked for a match. The right-hand edge\nof the frame is not defined until a match is found; once a match is found, the right-hand edge of the frame is\nthe last row in the match. For example, if the search pattern were \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003epattern\u003c/span\u003e \u003cspan class=\"pre\"\u003e(start\u003c/span\u003e \u003cspan class=\"pre\"\u003edown\u003c/span\u003e \u003cspan class=\"pre\"\u003eup)\u003c/span\u003e\u003c/code\u003e then the\nrow that matches the \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eup\u003c/span\u003e\u003c/code\u003e is the last row before the right-hand edge of the frame.\u003c/p\u003e\n\u003cp\u003e(If no match is found, then the right-hand edge of the frame is never defined and is never referenced.)\u003c/p\u003e\n\u003cp\u003eIn simple cases, you can picture a sliding window frame as illustrated below:\u003c/p\u003e\n\u003cfigure class=\"align-center\"\u003e\n\u003ca class=\"reference internal image-reference\" href=\"../_images/window-functions-sliding-frame.png\"\u003e\u003cimg alt=\"3-day sliding window frame in 7-day window\" src=\"../_images/window-functions-sliding-frame.png\" style=\"width: 1152.6px; height: 381.65px;\"\u003e\u003c/a\u003e\n\u003c/figure\u003e\n\u003cp\u003eYou have already seen \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions\"\u003e\u003cspan class=\"std std-ref\"\u003enavigational functions\u003c/span\u003e\u003c/a\u003e such as \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e\nused in expressions in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e subclause (e.g. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e \u003cspan class=\"pre\"\u003edown_10_percent\u003c/span\u003e \u003cspan class=\"pre\"\u003eas\u003c/span\u003e \u003cspan class=\"pre\"\u003eLAG(price)\u003c/span\u003e \u003cspan class=\"pre\"\u003e*\u003c/span\u003e \u003cspan class=\"pre\"\u003e0.9\u003c/span\u003e \u003cspan class=\"pre\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"pre\"\u003eprice\u003c/span\u003e\u003c/code\u003e).\nThe following query shows that navigational functions can also be used in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause. In this example,\nthe navigational functions show the edges (and thus the size) of the window frame that contains the current match.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003c/div\u003e\u003c/blockquote\u003e\n\u003cp\u003eEach output row from this query includes the values of the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLEAD()\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFIRST()\u003c/span\u003e\u003c/code\u003e, and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAST()\u003c/span\u003e\u003c/code\u003e\nnavigational functions for that row. The size of the window frame is the number of rows between \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFIRST()\u003c/span\u003e\u003c/code\u003e and\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAST()\u003c/span\u003e\u003c/code\u003e, including the first and last rows themselves.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e clauses in the query below select groups of three rows\n(October 1-3, October 2-4, October 3-5, etc.).\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n       \u003cspan class=\"vi\"\u003e\"First(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Lag(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Lead(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Last(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n       \u003cspan class=\"vi\"\u003e\"Match#\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MatchSeq#\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Classifier\"\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n                \u003cspan class=\"py\"\u003e-- Show the \"edges\" of the \"window frame\".\u003c/span\u003e\n                \u003cspan class=\"ni\"\u003eFIRST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"First(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Lag(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nd\"\u003eLEAD\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Lead(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"ni\"\u003eLAST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Last(price_date)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match#\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MatchSeq#\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nd\"\u003eCLASSIFIER\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Classifier\"\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e \u003cspan class=\"ni\"\u003eSKIP\u003c/span\u003e \u003cspan class=\"ni\"\u003eTO\u003c/span\u003e \u003cspan class=\"ni\"\u003eNEXT\u003c/span\u003e \u003cspan class=\"ni\"\u003eROW\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eCURRENT_ROW\u003c/span\u003e \u003cspan class=\"gi\"\u003eT2\u003c/span\u003e \u003cspan class=\"gi\"\u003eT3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n                \u003cspan class=\"gi\"\u003eCURRENT_ROW\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"gi\"\u003eT2\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"gi\"\u003eT3\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match#\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MatchSeq#\"\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | First(price_date) | Lag(price_date) | Lead(price_date) | Last(price_date) | Match# | MatchSeq# | Classifier  |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-01 | 2020-10-01        | NULL            | 2020-10-02       | 2020-10-01       |      1 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-02 | 2020-10-01        | 2020-10-01      | 2020-10-03       | 2020-10-02       |      1 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-03 | 2020-10-01        | 2020-10-02      | NULL             | 2020-10-03       |      1 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-02 | 2020-10-02        | NULL            | 2020-10-03       | 2020-10-02       |      2 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-03 | 2020-10-02        | 2020-10-02      | 2020-10-04       | 2020-10-03       |      2 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 | 2020-10-02        | 2020-10-03      | NULL             | 2020-10-04       |      2 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-03 | 2020-10-03        | NULL            | 2020-10-04       | 2020-10-03       |      3 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 | 2020-10-03        | 2020-10-03      | 2020-10-05       | 2020-10-04       |      3 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 | 2020-10-03        | 2020-10-04      | NULL             | 2020-10-05       |      3 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 | 2020-10-04        | NULL            | 2020-10-05       | 2020-10-04       |      4 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 | 2020-10-04        | 2020-10-04      | 2020-10-06       | 2020-10-05       |      4 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 | 2020-10-04        | 2020-10-05      | NULL             | 2020-10-06       |      4 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-05 | 2020-10-05        | NULL            | 2020-10-06       | 2020-10-05       |      5 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 | 2020-10-05        | 2020-10-05      | 2020-10-07       | 2020-10-06       |      5 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 | 2020-10-05        | 2020-10-06      | NULL             | 2020-10-07       |      5 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 | 2020-10-06        | NULL            | 2020-10-07       | 2020-10-06       |      6 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 | 2020-10-06        | 2020-10-06      | 2020-10-08       | 2020-10-07       |      6 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-08 | 2020-10-06        | 2020-10-07      | NULL             | 2020-10-08       |      6 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 | 2020-10-07        | NULL            | 2020-10-08       | 2020-10-07       |      7 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-08 | 2020-10-07        | 2020-10-07      | 2020-10-09       | 2020-10-08       |      7 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-09 | 2020-10-07        | 2020-10-08      | NULL             | 2020-10-09       |      7 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-08 | 2020-10-08        | NULL            | 2020-10-09       | 2020-10-08       |      8 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-09 | 2020-10-08        | 2020-10-08      | 2020-10-10       | 2020-10-09       |      8 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-10 | 2020-10-08        | 2020-10-09      | NULL             | 2020-10-10       |      8 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-01 | 2020-10-01        | NULL            | 2020-10-02       | 2020-10-01       |      1 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-02 | 2020-10-01        | 2020-10-01      | 2020-10-03       | 2020-10-02       |      1 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 | 2020-10-01        | 2020-10-02      | NULL             | 2020-10-03       |      1 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-02 | 2020-10-02        | NULL            | 2020-10-03       | 2020-10-02       |      2 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 | 2020-10-02        | 2020-10-02      | 2020-10-04       | 2020-10-03       |      2 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 | 2020-10-02        | 2020-10-03      | NULL             | 2020-10-04       |      2 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 | 2020-10-03        | NULL            | 2020-10-04       | 2020-10-03       |      3 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 | 2020-10-03        | 2020-10-03      | 2020-10-05       | 2020-10-04       |      3 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 | 2020-10-03        | 2020-10-04      | NULL             | 2020-10-05       |      3 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 | 2020-10-04        | NULL            | 2020-10-05       | 2020-10-04       |      4 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 | 2020-10-04        | 2020-10-04      | 2020-10-06       | 2020-10-05       |      4 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-06 | 2020-10-04        | 2020-10-05      | NULL             | 2020-10-06       |      4 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 | 2020-10-05        | NULL            | 2020-10-06       | 2020-10-05       |      5 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-06 | 2020-10-05        | 2020-10-05      | 2020-10-07       | 2020-10-06       |      5 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-07 | 2020-10-05        | 2020-10-06      | NULL             | 2020-10-07       |      5 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-06 | 2020-10-06        | NULL            | 2020-10-07       | 2020-10-06       |      6 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-07 | 2020-10-06        | 2020-10-06      | 2020-10-08       | 2020-10-07       |      6 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-08 | 2020-10-06        | 2020-10-07      | NULL             | 2020-10-08       |      6 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-07 | 2020-10-07        | NULL            | 2020-10-08       | 2020-10-07       |      7 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-08 | 2020-10-07        | 2020-10-07      | 2020-10-09       | 2020-10-08       |      7 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-09 | 2020-10-07        | 2020-10-08      | NULL             | 2020-10-09       |      7 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-08 | 2020-10-08        | NULL            | 2020-10-09       | 2020-10-08       |      8 |         1 | CURRENT_ROW |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-09 | 2020-10-08        | 2020-10-08      | 2020-10-10       | 2020-10-09       |      8 |         2 | T2          |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-10 | 2020-10-08        | 2020-10-09      | NULL             | 2020-10-10       |      8 |         3 | T3          |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------------------+-----------------+------------------+------------------+--------+-----------+-------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"33\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eThe output of this query also illustrates that \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLEAD()\u003c/span\u003e\u003c/code\u003e functions return NULL for expressions that\nattempt to reference rows outside the match group (i.e. outside the \u003ca class=\"reference internal\" href=\"../sql-reference/functions-analytic.html#label-window-frames\"\u003e\u003cspan class=\"std std-ref\"\u003ewindow frame\u003c/span\u003e\u003c/a\u003e).\u003c/p\u003e\n\u003cp\u003eThe rules for navigational functions in \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clauses are slightly different from the rules for\nnavigational functions in \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clauses. For example, the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePREV()\u003c/span\u003e\u003c/code\u003e function is available in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e clause\nbut currently not in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clause. Instead, you can use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eLAG()\u003c/span\u003e\u003c/code\u003e in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clause. The reference\ndocumentation for \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize\"\u003e\u003cspan class=\"doc\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/a\u003e lists the corresponding rule for each\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-navigational-functions\"\u003e\u003cspan class=\"std std-ref\"\u003enavigational function\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause can also include the following:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eAggregate functions. For example, if the pattern can match a varying number of rows (e.g. because it matches\n1 or more falling stock prices), then you might want to know the total number of rows in the match; you can\nshow this by using \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCOUNT(*)\u003c/span\u003e\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eGeneral expressions that operate on values in each row in the match. These can be mathematical expressions,\nlogical expressions, etc. For example, you could look at values in the row and print text descriptors such as\n“ABOVE AVERAGE”.\u003c/p\u003e\n\u003cp\u003eRemember that if you group rows (\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e), and if a column has different values for different rows\nin the group, the value selected for that column for that match is non-deterministic, and expressions based on that\nvalue are also likely to be non-deterministic.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor more information about the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMEASURES\u003c/span\u003e\u003c/code\u003e subclause, see the\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize\"\u003e\u003cspan class=\"doc\"\u003ereference documentation for MATCH_RECOGNIZE\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"specifying-where-to-search-for-the-next-match\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-skip-to\"\u003e\u003c/span\u003e\u003ch2\u003eSpecifying Where to Search for the Next Match\u003ca class=\"headerlink\" href=\"#specifying-where-to-search-for-the-next-match\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eBy default, after \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e finds a match, it starts looking for the next match immediately after the\nend of the most recent match. For example, if \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e finds a match in rows 2, 3, and 4, then\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e will start looking for the next match at row 5. This prevents overlapping matches.\u003c/p\u003e\n\u003cp\u003eHowever, you can choose alternative starting points.\u003c/p\u003e\n\u003cp\u003eConsider the following data:\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-none notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003eMonth  | Price | Price Relative to Previous Day\n=======|=======|===============================\n     1 |   200 |\n     2 |   100 | down\n     3 |   200 | up\n     4 |   100 | down\n     5 |   200 | up\n     6 |   100 | down\n     7 |   200 | up\n     8 |   100 | down\n     9 |   200 | up\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"34\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eSuppose you search the data for a \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eW\u003c/span\u003e\u003c/code\u003e pattern (down, up, down up). There are three \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eW\u003c/span\u003e\u003c/code\u003e shapes:\u003c/p\u003e\n\u003col class=\"arabic simple\"\u003e\n\u003cli\u003e\u003cp\u003eMonths: 1, 2, 3, 4, and 5.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eMonths: 3, 4, 5, 6, and 7.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eMonths: 5, 6, 7, 8, and 9.\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can use the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e\u003c/code\u003e clause to specify whether you want all patterns, or only non-overlapping patterns. The\n\u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e\u003c/code\u003e clause supports other options, as well. The \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e\u003c/code\u003e clause is documented in more detail in\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize\"\u003e\u003cspan class=\"doc\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"best-practices\"\u003e\n\u003ch2\u003eBest Practices\u003ca class=\"headerlink\" href=\"#best-practices\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eInclude an ORDER BY clause in your \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eRemember that this ORDER BY applies only within the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e clause. If you want the entire query to\nreturn results in a specific order, then use an additional \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eORDER\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause at the outermost level of the query.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ePattern variable names:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eUse meaningful pattern variable names to make your patterns easier to understand and debug.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eCheck for typographical errors in pattern variable names in both the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clauses.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAvoid using defaults for subclauses that have defaults. Make your choices explicit.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eTest your pattern with a small sample of data before scaling up to your full data set.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e, \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_SEQUENCE_NUMBER()\u003c/span\u003e\u003c/code\u003e, and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eCLASSIFIER()\u003c/span\u003e\u003c/code\u003e are very helpful in debugging.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eConsider using an \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eORDER\u003c/span\u003e \u003cspan class=\"pre\"\u003eBY\u003c/span\u003e\u003c/code\u003e clause in the outermost level of the query to force the output to be in order by\nusing \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_NUMBER()\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_SEQUENCE_NUMBER()\u003c/span\u003e\u003c/code\u003e. If the output data is in another order, then the output might\nnot appear to match the pattern.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003csection id=\"avoiding-analytic-errors\"\u003e\n\u003ch2\u003eAvoiding Analytic Errors\u003ca class=\"headerlink\" href=\"#avoiding-analytic-errors\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"correlation-vs-causality\"\u003e\n\u003ch3\u003eCorrelation vs Causality\u003ca class=\"headerlink\" href=\"#correlation-vs-causality\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eCorrelation does not guarantee causality. \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/code\u003e can return “false positives” (cases where you see a\npattern, but it is just a coincidence).\u003c/p\u003e\n\u003cp\u003ePattern matching can also result in “false negatives” (cases where there is a pattern in the real world, but the\npattern does not appear in the data sample).\u003c/p\u003e\n\u003cp\u003eIn most cases, finding a match (for example, finding a pattern that suggests insurance fraud) is just the first step\nin an analysis.\u003c/p\u003e\n\u003cp\u003eThe following factors typically increase the number of false positives:\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eLarge data sets.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSearching for a large number of patterns.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSearching for short or simple patterns.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe following factors typically increase the number of false negatives.\u003c/p\u003e\n\u003cul class=\"simple\"\u003e\n\u003cli\u003e\u003cp\u003eSmall data sets.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eNot searching for all the possible relevant patterns.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSearching for patterns that are more complex than necessary.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003csection id=\"order-insensitive-patterns\"\u003e\n\u003ch3\u003eOrder-Insensitive Patterns\u003ca class=\"headerlink\" href=\"#order-insensitive-patterns\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eAlthough most pattern matching requires that the data be in order (for example, by time), there are exceptions.\nFor example, if a person commits insurance fraud both in an automobile accident and in a home burglary, it doesn’t\nmatter which order the frauds occur in.\u003c/p\u003e\n\u003cp\u003eIf the pattern you’re looking for is not order-sensitive, then you can use operators such as\n“alternative” (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e|\u003c/span\u003e\u003c/code\u003e) and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePERMUTE\u003c/span\u003e\u003c/code\u003e to make your searches less order-sensitive.\u003c/p\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"examples\"\u003e\n\u003ch2\u003eExamples\u003ca class=\"headerlink\" href=\"#examples\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThis section contains additional examples.\u003c/p\u003e\n\u003cp\u003eYou can find still more examples in \u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize\"\u003e\u003cspan class=\"doc\"\u003eMATCH_RECOGNIZE\u003c/span\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003csection id=\"find-multi-day-price-increases\"\u003e\n\u003ch3\u003eFind Multi-Day Price Increases\u003ca class=\"headerlink\" href=\"#find-multi-day-price-increases\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe following query finds all the patterns in which the price of company ABCD rose two days in a row:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eFROM\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e\n       \u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePARTITION\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eMEASURES\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"nd\"\u003eMATCH_SEQUENCE_NUMBER\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eMINIMUM_37\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eMINIMUM_37\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"gi\"\u003e37\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003e00\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003eLAG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"Match Sequence #\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | Match # | Match Sequence # |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+---------+------------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |       1 |                1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 |    71 |       1 |                2 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-08 |    80 |       1 |                3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 |    37 |       1 |                1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 |    63 |       1 |                2 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 |    65 |       1 |                3 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+---------+------------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"35\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003csection id=\"demonstrate-the-permute-operator\"\u003e\n\u003ch4\u003eDemonstrate the PERMUTE Operator\u003ca class=\"headerlink\" href=\"#demonstrate-the-permute-operator\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThis example demonstrates the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePERMUTE\u003c/span\u003e\u003c/code\u003e operator in the pattern. Search for all upward and downward spikes in the\ncharts limiting the number of rising prices to two:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eselect\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch_recognize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003epartition\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003emeasures\u003c/span\u003e\n            \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MATCH_NUMBER\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"START\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003elast\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"END\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eups\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"PRICE_COUNT\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003elast\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nd\"\u003eclassifier\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'DOWN'\u003c/span\u003e \u003cspan class=\"gi\"\u003eup_spike\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eafter\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch\u003c/span\u003e \u003cspan class=\"ni\"\u003eskip\u003c/span\u003e \u003cspan class=\"ni\"\u003eto\u003c/span\u003e \u003cspan class=\"ni\"\u003enext\u003c/span\u003e \u003cspan class=\"ni\"\u003erow\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003epattern\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"nd\"\u003ePERMUTE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nf\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e+))\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003edefine\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+--------------+------------+------------+-----+-------------+----------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | MATCH_NUMBER | START      | END        | UPS | PRICE_COUNT | UP_SPIKE |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+--------------+------------+------------+-----+-------------+----------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |            1 | 2020-10-01 | 2020-10-04 |   2 |           4 | False    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |            2 | 2020-10-02 | 2020-10-05 |   2 |           4 | True     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |            3 | 2020-10-04 | 2020-10-07 |   2 |           4 | False    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |            4 | 2020-10-06 | 2020-10-10 |   2 |           5 | True     |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     |            1 | 2020-10-01 | 2020-10-04 |   2 |           4 | False    |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     |            2 | 2020-10-03 | 2020-10-07 |   2 |           5 | True     |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+--------------+------------+------------+-----+-------------+----------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"36\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"demonstrate-the-skip-to-next-row-option\"\u003e\n\u003ch3\u003eDemonstrate the SKIP TO NEXT ROW Option\u003ca class=\"headerlink\" href=\"#demonstrate-the-skip-to-next-row-option\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThis example demonstrates the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e \u003cspan class=\"pre\"\u003eTO\u003c/span\u003e \u003cspan class=\"pre\"\u003eNEXT\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e\u003c/code\u003e option. This query searches for W-shaped curves in each company’s chart.\nThe matches can overlap.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eselect\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch_recognize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003epartition\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003emeasures\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MATCH_NUMBER\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"START\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003elast\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"END\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"PRICE_COUNT\"\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eafter\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch\u003c/span\u003e \u003cspan class=\"ni\"\u003eskip\u003c/span\u003e \u003cspan class=\"ni\"\u003eto\u003c/span\u003e \u003cspan class=\"ni\"\u003enext\u003c/span\u003e \u003cspan class=\"ni\"\u003erow\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003epattern\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e+)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003edefine\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+--------------+------------+------------+-------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | MATCH_NUMBER | START      | END        | PRICE_COUNT |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+--------------+------------+------------+-------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    |            1 | 2020-10-01 | 2020-10-08 |           8 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     |            1 | 2020-10-01 | 2020-10-08 |           8 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     |            2 | 2020-10-05 | 2020-10-10 |           6 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     |            3 | 2020-10-06 | 2020-10-10 |           5 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+--------------+------------+------------+-------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"37\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003csection id=\"exclusion-syntax\"\u003e\n\u003ch4\u003eExclusion Syntax\u003ca class=\"headerlink\" href=\"#exclusion-syntax\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eThis example shows the exclusion syntax in the pattern. This pattern (like the previous pattern) searches for\n\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eW\u003c/span\u003e\u003c/code\u003e shapes, but this query’s output excludes falling prices. Note that in this query, matching continues past the\nlast row of a match:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cdiv\u003e\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eselect\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"ni\"\u003efrom\u003c/span\u003e \u003cspan class=\"gi\"\u003estock_price_history\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch_recognize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003epartition\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003emeasures\u003c/span\u003e\n            \u003cspan class=\"nd\"\u003ematch_number\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"MATCH_NUMBER\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nd\"\u003eclassifier\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003ecl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"ni\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e(*)\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"vi\"\u003e\"PRICE_COUNT\"\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003eall\u003c/span\u003e \u003cspan class=\"ni\"\u003erows\u003c/span\u003e \u003cspan class=\"ni\"\u003eper\u003c/span\u003e \u003cspan class=\"ni\"\u003ematch\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003epattern\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e\u003cspan class=\"p\"\u003e+)\u003c/span\u003e\n        \u003cspan class=\"ni\"\u003edefine\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eUP\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"gi\"\u003eDOWN\u003c/span\u003e \u003cspan class=\"ni\"\u003eas\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"ni\"\u003elag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eorder\u003c/span\u003e \u003cspan class=\"ni\"\u003eby\u003c/span\u003e \u003cspan class=\"gi\"\u003ecompany\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003eprice_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+--------------+---------+-------------+\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| COMPANY | PRICE_DATE | PRICE | MATCH_NUMBER | CL      | PRICE_COUNT |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e|---------+------------+-------+--------------+---------+-------------|\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-01 |    50 |            1 | ANY_ROW |           1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-03 |    39 |            1 | UP      |           3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-04 |    42 |            1 | UP      |           4 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-06 |    47 |            1 | UP      |           6 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-07 |    71 |            1 | UP      |           7 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| ABCD    | 2020-10-08 |    80 |            1 | UP      |           8 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-01 |    89 |            1 | ANY_ROW |           1 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-03 |    37 |            1 | UP      |           3 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-04 |    63 |            1 | UP      |           4 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-05 |    65 |            1 | UP      |           5 |\u003c/span\u003e\n\u003cspan class=\"no\"\u003e| XYZ     | 2020-10-08 |    54 |            1 | UP      |           8 |\u003c/span\u003e\n\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"no\"\u003e---------+------------+-------+--------------+---------+-------------+\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"38\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/div\u003e\u003c/blockquote\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"search-for-patterns-in-non-adjacent-rows\"\u003e\n\u003cspan id=\"label-match-recognize-introduction-search-for-patterns-in-non-adjacent-rows\"\u003e\u003c/span\u003e\u003ch3\u003eSearch for Patterns in Non-Adjacent Rows\u003ca class=\"headerlink\" href=\"#search-for-patterns-in-non-adjacent-rows\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIn some situations, you might want to look for patterns in non-contiguous rows. For example, if you are analyzing\nlog files, you might want to search for all patterns in which a fatal error was preceded by a particular sequence\nof warnings. There might not be a natural way to partition and sort the rows so that all of the relevant messages\n(rows) are in a single window and adjacent. In that situation, you might need a pattern that looks for\nparticular events, but doesn’t require that the events be contiguous in the data.\u003c/p\u003e\n\u003cp\u003eBelow is an example of \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e clauses that recognizes either contiguous or non-contiguous\nrows that fit the pattern. The symbol \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eANY_ROW\u003c/span\u003e\u003c/code\u003e is defined as TRUE (so it matches any row). The \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e*\u003c/span\u003e\u003c/code\u003e after each\noccurrence of \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eANY_ROW\u003c/span\u003e\u003c/code\u003e says to allow 0 or more of occurrences of \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eANY_ROW\u003c/span\u003e\u003c/code\u003e between the first warning and the\nsecond warning, and between the second warning and the fatal error log message. Thus the entire pattern says to\nsearch for \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eWARNING1\u003c/span\u003e\u003c/code\u003e, followed by any number of rows, followed by \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eWARNING2\u003c/span\u003e\u003c/code\u003e, followed by any number of rows,\nfollowed by \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eFATAL_ERROR\u003c/span\u003e\u003c/code\u003e. To omit the irrelevant rows from the output, the query uses\n\u003ca class=\"reference internal\" href=\"../sql-reference/constructs/match_recognize.html#label-match-recognize-exclusions\"\u003e\u003cspan class=\"std std-ref\"\u003eexclusion\u003c/span\u003e\u003c/a\u003e syntax (\u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e{-\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003e-}\u003c/span\u003e\u003c/code\u003e).\u003c/p\u003e\n\u003cdiv class=\"relative group text-sm\"\u003e\u003cdiv class=\"highlight-sqlexample-lower notranslate\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"ni\"\u003eMATCH_RECOGNIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eORDER\u003c/span\u003e \u003cspan class=\"ni\"\u003eBY\u003c/span\u003e \u003cspan class=\"gi\"\u003elog_message_timestamp\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eALL\u003c/span\u003e \u003cspan class=\"ni\"\u003eROWS\u003c/span\u003e \u003cspan class=\"ni\"\u003ePER\u003c/span\u003e \u003cspan class=\"ni\"\u003eMATCH\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003ePATTERN\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"gi\"\u003eWARNING1\u003c/span\u003e  \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e  \u003cspan class=\"gi\"\u003eWARNING2\u003c/span\u003e  \u003cspan class=\"p\"\u003e{-\u003c/span\u003e \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-}\u003c/span\u003e  \u003cspan class=\"gi\"\u003eFATAL_ERROR\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"ni\"\u003eDEFINE\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eANY_ROW\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"ni\"\u003eTRUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eWARNING1\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"nd\"\u003eSUBSTR\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003elog_message\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'WARNING: Available memory is less than 10%'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eWARNING2\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"nd\"\u003eSUBSTR\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003elog_message\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e41\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'WARNING: Available memory is less than 5%'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"gi\"\u003eFATAL_ERROR\u003c/span\u003e \u003cspan class=\"ni\"\u003eAS\u003c/span\u003e \u003cspan class=\"nd\"\u003eSUBSTR\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"gi\"\u003elog_message\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"gi\"\u003e11\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003e'FATAL ERROR'\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\u003cdiv data-codeblock-index=\"39\" class=\"copybutton\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 384 512\" class=\"copybutton-icon icon-copy\"\u003e\u003cpath d=\"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM112 192H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewbox=\"0 0 512 512\" class=\"copybutton-icon icon-copied hidden\"\u003e\u003cpath d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003cspan\u003eCopy\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003csection id=\"troubleshooting\"\u003e\n\u003ch2\u003eTroubleshooting\u003ca class=\"headerlink\" href=\"#troubleshooting\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h2\u003e\n\u003csection id=\"errors-when-using-one-row-per-match-and-specifying-columns-in-the-select-clause\"\u003e\n\u003ch3\u003eErrors When Using ONE ROW PER MATCH and Specifying Columns in the Select Clause\u003ca class=\"headerlink\" href=\"#errors-when-using-one-row-per-match-and-specifying-columns-in-the-select-clause\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e clause acts similarly to an aggregate function. This limits the output columns you can\nuse. For example, if you use \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eONE\u003c/span\u003e \u003cspan class=\"pre\"\u003eROW\u003c/span\u003e \u003cspan class=\"pre\"\u003ePER\u003c/span\u003e \u003cspan class=\"pre\"\u003eMATCH\u003c/span\u003e\u003c/code\u003e and each match contains three rows with different dates, then\nyou can’t specify the date column as an output column in the SELECT clause because no single date is correct for all\nthree rows.\u003c/p\u003e\n\u003c/section\u003e\n\u003csection id=\"unexpected-results\"\u003e\n\u003ch3\u003eUnexpected Results\u003ca class=\"headerlink\" href=\"#unexpected-results\" title=\"Link to this heading\"\u003e¶\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eCheck for typographical errors in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e and \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clauses.\u003c/p\u003e\n\u003cp\u003eIf a pattern variable name used in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e clause is not defined in the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clause (e.g. because the\nname is typed incorrectly in either the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003ePATTERN\u003c/span\u003e\u003c/code\u003e or \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eDEFINE\u003c/span\u003e\u003c/code\u003e clause), then no error is reported. Instead, the\npattern variable name is simply assumed to be true for each row.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eReview the \u003ccode class=\"code docutils literal notranslate\"\u003e\u003cspan class=\"pre\"\u003eSKIP\u003c/span\u003e\u003c/code\u003e clause to make sure that it is appropriate, for example to include or exclude overlapping patterns.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\u003c/section\u003e\n\n\n","headings":[{"label":"Introduction","depth":1,"href":"introduction"},{"label":"A Simple Example That Identifies a Sequence of Rows","depth":1,"href":"a-simple-example-that-identifies-a-sequence-of-rows"},{"label":"Partitioning and Sorting the Rows","depth":1,"href":"partitioning-and-sorting-the-rows"},{"label":"Defining the Pattern of Rows to Match","depth":1,"href":"defining-the-pattern-of-rows-to-match"},{"label":"Specifying Output Rows","depth":1,"href":"specifying-output-rows"},{"label":"Returning Information About the Match","depth":1,"href":"returning-information-about-the-match"},{"label":"Specifying Where to Search for the Next Match","depth":1,"href":"specifying-where-to-search-for-the-next-match"},{"label":"Best Practices","depth":1,"href":"best-practices"},{"label":"Avoiding Analytic Errors","depth":1,"href":"avoiding-analytic-errors"},{"label":"Examples","depth":1,"href":"examples"},{"label":"Troubleshooting","depth":1,"href":"troubleshooting"}],"mastheads":[{"label":"Getting Started","href":"/en/user-guide-getting-started","active":false},{"label":"Guides","href":"/en/guides","active":true},{"label":"Developer","href":"/en/developer","active":false},{"label":"Reference","href":"/en/reference","active":false},{"label":"Releases","href":"/en/release-notes/new-features","active":false},{"label":"Tutorials","href":"/en/tutorials","active":false}],"title":"Identifying Sequences of Rows That Match a Pattern | Snowflake Documentation","breadcrumbs":[{"label":"Guides","href":"/en/guides"},{"label":"Queries","href":"/en/guides-overview-queries"},{"label":"Match Recognize","href":"/en/user-guide/match-recognize-introduction"}],"relatedTopics":[{"label":"MATCH_RECOGNIZE","href":"/user-guide/../sql-reference/constructs/match_recognize","isExternal":false}],"notices":[],"relatedInfo":"","sqlExamples":[],"lang":"en","tree":{"depth":0,"label":"Guides","type":"masthead","href":"/en/guides","active":false,"parentRef":"/en/","children":[{"label":"Overview","type":"page","href":"/en/guides","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[]},{"type":"line"},{"label":"Connecting to Snowflake","type":"page","href":"/en/guides-overview-connecting","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Ecosystem","type":"page","href":"/en/user-guide/ecosystem","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"All Partners and Technologies","type":"page","href":"/en/user-guide/ecosystem-all","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Data Integration","type":"page","href":"/en/user-guide/ecosystem-etl","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Business Intelligence","type":"page","href":"/en/user-guide/ecosystem-bi","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Machine Learning and Data Science","type":"page","href":"/en/user-guide/ecosystem-analytics","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Security and Governance","type":"page","href":"/en/user-guide/ecosystem-security","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"SQL Development and Management","type":"page","href":"/en/user-guide/ecosystem-editors","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Native Programmatic Interfaces","type":"page","href":"/en/user-guide/ecosystem-lang","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]},{"label":"Snowflake Partner Connect","type":"page","href":"/en/user-guide/ecosystem-partner-connect","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ecosystem","children":[]}]},{"label":"Snowsight","type":"page","href":"/en/user-guide/ui-snowsight","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Getting started with Snowsight","type":"page","href":"/en/user-guide/ui-snowsight-gs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[{"label":"Cookies in the web interface","type":"page","href":"/en/user-guide/ui-snowsight-cookies","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight-gs","children":[]}]},{"label":"Exploring the navigation menu","type":"page","href":"/en/user-guide/ui-snowsight-navigation","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"About the Snowsight Upgrade","type":"page","href":"/en/user-guide/ui-snowsight-upgrade-guide","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Upgrading to Snowsight","type":"page","href":"/en/user-guide/ui-snowsight-upgrade-migrate","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Search Snowflake objects and resources","type":"page","href":"/en/user-guide/ui-snowsight-universal-search","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Getting started with worksheets","type":"page","href":"/en/user-guide/ui-snowsight-worksheets-gs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Managing and using worksheets","type":"page","href":"/en/user-guide/ui-snowsight-worksheets","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Querying data with SQL worksheets","type":"page","href":"/en/user-guide/ui-snowsight-query","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Using Snowflake Copilot in SQL worksheets","type":"page","href":"/en/user-guide/snowflake-copilot","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Visualizing worksheet results","type":"page","href":"/en/user-guide/ui-snowsight-visualizations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Visualizing data with dashboards","type":"page","href":"/en/user-guide/ui-snowsight-dashboards","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Filter query results in worksheets and dashboards","type":"page","href":"/en/user-guide/ui-snowsight-filters","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Explore and manage data","type":"page","href":"/en/user-guide/ui-snowsight-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Manage your user profile","type":"page","href":"/en/user-guide/ui-snowsight-profile","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Manage notification contacts","type":"page","href":"/en/user-guide/ui-snowsight-contacts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]},{"label":"Manage support cases","type":"page","href":"/en/user-guide/ui-support","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-snowsight","children":[]}]},{"label":"Classic Console","type":"page","href":"/en/user-guide/ui-using","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Monitoring Queries","type":"page","href":"/en/user-guide/ui-history","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-using","children":[]},{"label":"Changing Your Password / Switching Your (Session) Role / Logging Out","type":"page","href":"/en/user-guide/ui-menu","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-using","children":[]},{"label":"Managing Your User Preferences","type":"page","href":"/en/user-guide/ui-preferences","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-using","children":[]},{"label":"Using Worksheets for Queries / DML / DDL","type":"page","href":"/en/user-guide/ui-worksheet","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-using","children":[]},{"label":"General Usage Notes","type":"page","href":"/en/user-guide/ui-general","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/ui-using","children":[]}]},{"label":"SnowSQL","type":"page","href":"/en/user-guide/snowsql","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Installing","type":"page","href":"/en/user-guide/snowsql-install-config","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowsql","children":[]},{"label":"Configuring","type":"page","href":"/en/user-guide/snowsql-config","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowsql","children":[]},{"label":"Connecting","type":"page","href":"/en/user-guide/snowsql-start","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowsql","children":[]},{"label":"Using","type":"page","href":"/en/user-guide/snowsql-use","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowsql","children":[]}]},{"label":"Visual Studio Code SQL Extension","type":"page","href":"/en/user-guide/vscode-ext","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[]},{"label":"Client Download","type":"page","href":"/en/user-guide/snowflake-client-repository","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[]},{"label":"Client Configuration","type":"page","href":"/en/user-guide/gen-conn-config","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Viewing Snowflake Client Versions","type":"page","href":"/en/user-guide/snowflake-client-version-check","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]},{"label":"SnowCD (Connectivity Diagnostic Tool)","type":"page","href":"/en/user-guide/snowcd","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]},{"label":"Allowing Hostnames","type":"page","href":"/en/user-guide/hostname-allowlist","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]},{"label":"Limits on Query Text Size","type":"page","href":"/en/user-guide/query-size-limits","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]},{"label":"OCSP Configuration","type":"page","href":"/en/user-guide/ocsp","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]},{"label":"SQL Statements Supported for Preparation","type":"page","href":"/en/user-guide/sql-prepare","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/gen-conn-config","children":[]}]},{"type":"line"},{"label":"Connecting to Third-Party Systems","type":"page","href":"https://other-docs.snowflake.com/en/connectors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[]},{"label":"Snowflake Connector for Google Analytics Aggregate Data","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Cost Governance","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-pricing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Tasklist for the Snowflake Connector for Google Analytics Aggregate Data","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-tasks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Preparing your Google Analytics and Google Cloud Platform (GCP) accounts","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-prereqs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[{"label":"Configuring service account authentication for GCP","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-create-service-account-key","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-prereqs","children":[]},{"label":"Configuring OAuth authentication for GCP","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-create-client-id","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-prereqs","children":[]}]},{"label":"Installing and configuring the Snowflake Connector for GAAD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-installing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[{"label":"Configuring the GAAD using SQL","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-configuring-sql","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-installing","children":[]}]},{"label":"Managing the Snowflake Connector for GAAD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-managing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Role-Based Access Control for Connectors","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-rbac-access-control","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Monitoring Snowflake Connector for GAAD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-monitoring","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Setting up data ingestion for your Snowflake Connector for GAAD instance","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-setting-up-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Accessing fetched Google Analytics data","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-accessing-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]},{"label":"Troubleshooting the Snowflake Connector for GAAD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gaad/gaad-connector-about","children":[]}]},{"label":"Snowflake Connector for Google Analytics Raw Data","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Cost Governance","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-pricing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Task list for the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-tasks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Preparing your Google Analytics and Cloud Platform (GCP) accounts","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-prereqs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[{"label":"Configuring service account authentication for GCP","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-create-service-account-key","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-prereqs","children":[]},{"label":"Configuring OAuth authentication for GCP","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-create-client-id","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-prereqs","children":[]},{"label":"Configuring BigQuery Link for GA4 property","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-create-link","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-prereqs","children":[]}]},{"label":"Installing and configuring the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-installing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[{"label":"Configuring the GARD using SQL","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-configuring-sql","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-installing","children":[]}]},{"label":"Uninstalling and reinstalling the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-uninstalling-and-reinstalling","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Setting up data ingestion for your Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-setting-up-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Accessing data ingested by Snowflake Connector for GARD in Snowflake","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-accessing-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Data ingestion model for the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-data-ingestion-model","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Monitoring the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-monitoring","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Managing the Snowflake Connector for GARD in Snowflake","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-managing","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Role-Based Access Control for Connectors","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-rbac-access-control","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]},{"label":"Troubleshooting the Snowflake Connector for GARD","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/google/gard/gard-connector-about","children":[]}]},{"label":"Snowflake Connector for Google Looker Studio","type":"page","href":"https://other-docs.snowflake.com/en/connectors/google-looker-studio-connector","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[]},{"label":"Snowflake Connector for ServiceNow®","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-connecting","children":[{"label":"Cost Governance","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/cost-governance","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/about","children":[]},{"label":"ServiceNow® connector installation and configuration tasks","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/about","children":[{"label":"Preparing Your ServiceNow® instance","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/prereqs","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Installing and configuring the connector Using Snowsight","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/installing-snowsight","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Installing and configuring the connector Using SQL Commands","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/installing-sql","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Setting Up data ingestion for Your ServiceNow® Data","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/ingestion","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Accessing the ServiceNow® Data in Snowflake","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/accessing-data","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Monitoring the connector","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/monitoring","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Managing the connector","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/managing","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]},{"label":"Troubleshooting the connector","type":"page","href":"https://other-docs.snowflake.com/en/connectors/servicenow/troubleshooting","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/connectors/servicenow/tasks","children":[]}]}]}]},{"type":"line"},{"label":"Virtual warehouses","type":"page","href":"/en/user-guide/warehouses","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Overview","type":"page","href":"/en/user-guide/warehouses-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]},{"label":"Multicluster","type":"page","href":"/en/user-guide/warehouses-multicluster","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]},{"label":"Considerations","type":"page","href":"/en/user-guide/warehouses-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]},{"label":"Working with warehouses","type":"page","href":"/en/user-guide/warehouses-tasks","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]},{"label":"Query Acceleration Service","type":"page","href":"/en/user-guide/query-acceleration-service","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[{"label":"Tutorial","type":"page","href":"/en/user-guide/tutorials/query-acceleration-service","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/query-acceleration-service","children":[]}]},{"label":"Monitoring load","type":"page","href":"/en/user-guide/warehouses-load-monitoring","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]},{"label":"Snowpark-optimized warehouses","type":"page","href":"/en/user-guide/warehouses-snowpark-optimized","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/warehouses","children":[]}]},{"label":"Databases, Tables, \u0026 Views","type":"page","href":"/en/guides-overview-db","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Table Structures","type":"page","href":"/en/user-guide/tables-micro-partitions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[{"label":"Micro-Partitions \u0026 Data Clustering","type":"page","href":"/en/user-guide/tables-clustering-micropartitions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-micro-partitions","children":[]},{"label":"Cluster Keys \u0026 Clustered Tables","type":"page","href":"/en/user-guide/tables-clustering-keys","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-micro-partitions","children":[]},{"label":"Automatic Clustering","type":"page","href":"/en/user-guide/tables-auto-reclustering","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-micro-partitions","children":[]}]},{"label":"Temporary and Transient Tables","type":"page","href":"/en/user-guide/tables-temp-transient","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"External Tables","type":"page","href":"/en/user-guide/tables-external-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[{"label":"Automatic Refreshing","type":"page","href":"/en/user-guide/tables-external-auto","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-intro","children":[{"label":"Amazon S3","type":"page","href":"/en/user-guide/tables-external-s3","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-auto","children":[]},{"label":"Google Cloud Storage","type":"page","href":"/en/user-guide/tables-external-gcs","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-auto","children":[]},{"label":"Azure Blob Storage","type":"page","href":"/en/user-guide/tables-external-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-auto","children":[]}]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/tables-external-ts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-intro","children":[]},{"label":"Integrating Apache Hive Metastores","type":"page","href":"/en/user-guide/tables-external-hive","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-external-intro","children":[]}]},{"label":"Iceberg Tables","type":"page","href":"/en/user-guide/tables-iceberg","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[{"type":"category","depth":2,"label":"Configuration"},{"label":"Configure an External Volume","type":"page","href":"/en/user-guide/tables-iceberg-configure-external-volume","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"label":"Configure a Catalog Integration","type":"page","href":"/en/user-guide/tables-iceberg-configure-catalog-integration","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"type":"category","depth":2,"label":"Work with Iceberg Tables"},{"label":"Create","type":"page","href":"/en/user-guide/tables-iceberg-create","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"label":"Manage","type":"page","href":"/en/user-guide/tables-iceberg-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"label":"Convert","type":"page","href":"/en/user-guide/tables-iceberg-conversion","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"label":"Snowflake Iceberg Catalog SDK","type":"page","href":"/en/user-guide/tables-iceberg-catalog","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]},{"label":"Iceberg table data types","type":"page","href":"/en/user-guide/tables-iceberg-data-types","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-iceberg","children":[]}]},{"label":"Hybrid Tables","type":"page","href":"/en/user-guide/tables-hybrid","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[{"label":"Create a hybrid table","type":"page","href":"/en/user-guide/tables-hybrid-create","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]},{"label":"Understand limitations","type":"page","href":"/en/user-guide/tables-hybrid-limitations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]},{"label":"Understand performance","type":"page","href":"/en/user-guide/tables-hybrid-performance","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]},{"label":"Understand cost","type":"page","href":"/en/user-guide/tables-hybrid-cost","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]},{"label":"Monitor transactions","type":"page","href":"/en/user-guide/tables-hybrid-monitor-transactions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]},{"label":"Monitor workloads","type":"page","href":"/en/user-guide/tables-hybrid-monitor-workload","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tables-hybrid","children":[]}]},{"label":"Working with tables in Snowsight","type":"page","href":"/en/user-guide/ui-snowsight-data-databases-table","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Search Optimization Service","type":"page","href":"/en/user-guide/search-optimization-service","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[{"label":"Queries That Can Benefit","type":"page","href":"/en/user-guide/search-optimization/queries-that-benefit","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Configuring Search Optimization","type":"page","href":"/en/user-guide/search-optimization/enabling","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Point Lookup Queries","type":"page","href":"/en/user-guide/search-optimization/point-lookup-queries","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Substring and Regular Expression Queries","type":"page","href":"/en/user-guide/search-optimization/substring-queries","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Queries of Semi-Structured Data","type":"page","href":"/en/user-guide/search-optimization/semi-structured-queries","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Geospatial Queries","type":"page","href":"/en/user-guide/search-optimization/geospatial-queries","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Conjunctions and Disjunctions","type":"page","href":"/en/user-guide/search-optimization/conjunctions-disjunctions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Cost Estimation and Management","type":"page","href":"/en/user-guide/search-optimization/cost-estimation","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]},{"label":"Working With Search-Optimized Tables","type":"page","href":"/en/user-guide/search-optimization/working-with-tables","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/search-optimization-service","children":[]}]},{"type":"category","depth":1,"label":"Views"},{"label":"Views","type":"page","href":"/en/user-guide/views-introduction","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Secure Views","type":"page","href":"/en/user-guide/views-secure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Materialized Views","type":"page","href":"/en/user-guide/views-materialized","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Working with Views","type":"page","href":"/en/user-guide/ui-snowsight-data-databases-view","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"type":"category","depth":1,"label":"Considerations"},{"label":"Views, Materialized Views and Dynamic Tables","type":"page","href":"/en/user-guide/overview-view-mview-dts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Table Design","type":"page","href":"/en/user-guide/table-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Cloning","type":"page","href":"/en/user-guide/object-clone","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]},{"label":"Data Storage","type":"page","href":"/en/user-guide/tables-storage-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-db","children":[]}]},{"label":"Data Types","type":"page","href":"/en/data-types","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[]},{"type":"line"},{"label":"Data Loading","type":"page","href":"/en/guides-overview-loading-data","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Overview","type":"page","href":"/en/user-guide/data-load-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Feature Summary","type":"page","href":"/en/user-guide/intro-summary-loading","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Considerations","type":"page","href":"/en/user-guide/data-load-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Preparing Your Data Files","type":"page","href":"/en/user-guide/data-load-considerations-prepare","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-considerations","children":[]},{"label":"Planning a Data Load","type":"page","href":"/en/user-guide/data-load-considerations-plan","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-considerations","children":[]},{"label":"Staging Data","type":"page","href":"/en/user-guide/data-load-considerations-stage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-considerations","children":[]},{"label":"Loading Data","type":"page","href":"/en/user-guide/data-load-considerations-load","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-considerations","children":[]},{"label":"Managing Regular Data Loads","type":"page","href":"/en/user-guide/data-load-considerations-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-considerations","children":[]}]},{"label":"Preparing to Load Data","type":"page","href":"/en/user-guide/data-load-prepare","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Staging Files Using Snowsight","type":"page","href":"/en/user-guide/data-load-local-file-system-stage-ui","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Loading Data Using the Web Interface","type":"page","href":"/en/user-guide/data-load-web-ui","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Monitor data loading activity","type":"page","href":"/en/user-guide/data-load-monitor","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Bulk Loading"},{"label":"Local File System","type":"page","href":"/en/user-guide/data-load-local-file-system","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Choosing an Internal Stage","type":"page","href":"/en/user-guide/data-load-local-file-system-create-stage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-local-file-system","children":[]},{"label":"Staging Files","type":"page","href":"/en/user-guide/data-load-local-file-system-stage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-local-file-system","children":[]},{"label":"Copying Data from a Local File System","type":"page","href":"/en/user-guide/data-load-local-file-system-copy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-local-file-system","children":[]}]},{"label":"Amazon S3","type":"page","href":"/en/user-guide/data-load-s3","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Allowing the Virtual Private Cloud IDs","type":"page","href":"/en/user-guide/data-load-s3-allow","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3","children":[]},{"label":"Configuring Secure Access","type":"page","href":"/en/user-guide/data-load-s3-config","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3","children":[{"label":"Option 1: Configuring a Snowflake Storage Integration","type":"page","href":"/en/user-guide/data-load-s3-config-storage-integration","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3-config","children":[]},{"label":"Option 2: Configuring an AWS IAM Role (Deprecated)","type":"page","href":"/en/user-guide/data-load-s3-config-aws-iam-role","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3-config","children":[]},{"label":"Option 3: Configuring AWS IAM User Credentials","type":"page","href":"/en/user-guide/data-load-s3-config-aws-iam-user","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3-config","children":[]}]},{"label":"AWS Data File Encryption","type":"page","href":"/en/user-guide/data-load-s3-encrypt","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3","children":[]},{"label":"Creating an S3 Stage","type":"page","href":"/en/user-guide/data-load-s3-create-stage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3","children":[]},{"label":"Copying Data from an S3 Stage","type":"page","href":"/en/user-guide/data-load-s3-copy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-s3","children":[]}]},{"label":"Google Cloud Storage","type":"page","href":"/en/user-guide/data-load-gcs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Configuring a Snowflake Storage Integration","type":"page","href":"/en/user-guide/data-load-gcs-config","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-gcs","children":[]},{"label":"Google Cloud Storage Data File Encryption","type":"page","href":"/en/user-guide/data-load-gcs-encrypt","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-gcs","children":[]},{"label":"Copying Data from a Google Cloud Storage Stage","type":"page","href":"/en/user-guide/data-load-gcs-copy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-gcs","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/data-load-gcs-ts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-gcs","children":[]}]},{"label":"Microsoft Azure","type":"page","href":"/en/user-guide/data-load-azure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Allowing the VNet Subnet IDs","type":"page","href":"/en/user-guide/data-load-azure-allow","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-azure","children":[]},{"label":"Configuring an Azure Container for Loading Data","type":"page","href":"/en/user-guide/data-load-azure-config","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-azure","children":[]},{"label":"Creating an Azure Stage","type":"page","href":"/en/user-guide/data-load-azure-create-stage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-azure","children":[]},{"label":"Copying Data from an Azure Stage","type":"page","href":"/en/user-guide/data-load-azure-copy","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-azure","children":[]}]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/data-load-bulk-ts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Snowpipe"},{"label":"Overview","type":"page","href":"/en/user-guide/data-load-snowpipe-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Auto Ingest","type":"page","href":"/en/user-guide/data-load-snowpipe-auto","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Automating for Amazon S3","type":"page","href":"/en/user-guide/data-load-snowpipe-auto-s3","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-auto","children":[]},{"label":"Automating for Google Cloud Storage","type":"page","href":"/en/user-guide/data-load-snowpipe-auto-gcs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-auto","children":[]},{"label":"Automating for Microsoft Azure","type":"page","href":"/en/user-guide/data-load-snowpipe-auto-azure","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-auto","children":[]}]},{"label":"REST Endpoints","type":"page","href":"/en/user-guide/data-load-snowpipe-rest-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Preparing to Load Data","type":"page","href":"/en/user-guide/data-load-snowpipe-rest-gs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-rest-overview","children":[]},{"label":"Load Data Using REST API","type":"page","href":"/en/user-guide/data-load-snowpipe-rest-load","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-rest-overview","children":[]},{"label":"Load Data Using AWS Lambda","type":"page","href":"/en/user-guide/data-load-snowpipe-rest-lambda","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-rest-overview","children":[]},{"label":"Snowpipe REST API","type":"page","href":"/en/user-guide/data-load-snowpipe-rest-apis","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-rest-overview","children":[]}]},{"label":"Error Notifications","type":"page","href":"/en/user-guide/data-load-snowpipe-errors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Enabling for Amazon SNS","type":"page","href":"/en/user-guide/data-load-snowpipe-errors-sns","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-errors","children":[]},{"label":"Enabling for Microsoft Azure Event Grid","type":"page","href":"/en/user-guide/data-load-snowpipe-errors-azure","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-errors","children":[]},{"label":"Enabling for Google Pub/Sub","type":"page","href":"/en/user-guide/data-load-snowpipe-errors-gcs","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-snowpipe-errors","children":[]}]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/data-load-snowpipe-ts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Managing","type":"page","href":"/en/user-guide/data-load-snowpipe-manage","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Snowpipe Costs","type":"page","href":"/en/user-guide/data-load-snowpipe-billing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Snowpipe Streaming"},{"label":"Overview","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Configurations and Examples","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-configuration","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Recommendations","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-recommendation","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Snowpipe Streaming Costs","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-billing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Kafka Connector with Snowpipe Streaming","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-kafka","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Schema Detection and Evolution for Kafka Connector with Snowpipe Streaming","type":"page","href":"/en/user-guide/data-load-snowpipe-streaming-kafka-schema-detection","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Loading Semi-Structured Data"},{"label":"Introduction","type":"page","href":"/en/user-guide/semistructured-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Supported Formats","type":"page","href":"/en/user-guide/semistructured-data-formats","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Considerations","type":"page","href":"/en/user-guide/semistructured-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Accessing Unstructured Data"},{"label":"Introduction","type":"page","href":"/en/user-guide/unstructured-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Directory Tables","type":"page","href":"/en/user-guide/data-load-dirtables","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Manage","type":"page","href":"/en/user-guide/data-load-dirtables-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables","children":[]},{"label":"Query","type":"page","href":"/en/user-guide/data-load-dirtables-query","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables","children":[]},{"label":"Automated Refresh","type":"page","href":"/en/user-guide/data-load-dirtables-auto","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables","children":[{"label":"Amazon S3","type":"page","href":"/en/user-guide/data-load-dirtables-auto-s3","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables-auto","children":[]},{"label":"Google Cloud Storage","type":"page","href":"/en/user-guide/data-load-dirtables-auto-gcs","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables-auto","children":[]},{"label":"Azure Blob Storage","type":"page","href":"/en/user-guide/data-load-dirtables-auto-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables-auto","children":[]}]},{"label":"Build Data Pipelines","type":"page","href":"/en/user-guide/data-load-dirtables-pipeline","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/data-load-dirtables","children":[]}]},{"label":"REST API","type":"page","href":"/en/user-guide/data-load-unstructured-rest-api","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Processing with UDF and Procedure Handlers","type":"page","href":"/en/user-guide/unstructured-data-java","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Sharing","type":"page","href":"/en/user-guide/unstructured-data-sharing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/unstructured-ts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Accessing Data in Other Storage"},{"label":"Amazon S3-compatible Storage","type":"page","href":"/en/user-guide/data-load-s3-compatible-storage","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Querying and Transforming Data"},{"label":"Querying Data in Staged Files","type":"page","href":"/en/user-guide/querying-stage","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Querying Metadata for Staged Files","type":"page","href":"/en/user-guide/querying-metadata","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Transforming Data During Load","type":"page","href":"/en/user-guide/data-load-transform","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Evolving Table Schema Automatically","type":"page","href":"/en/user-guide/data-load-schema-evolution","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"type":"category","depth":1,"label":"Continuous Data Pipelines"},{"label":"Overview","type":"page","href":"/en/user-guide/data-pipelines-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]},{"label":"Dynamic tables","type":"page","href":"/en/user-guide/dynamic-tables-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Best practices","type":"page","href":"/en/user-guide/dynamic-tables-best-practices","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Understanding dynamic table refresh","type":"page","href":"/en/user-guide/dynamic-tables-refresh","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Dynamic tables compared to streams \u0026 tasks, and materialized views","type":"page","href":"/en/user-guide/dynamic-tables-comparison","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Understanding cost","type":"page","href":"/en/user-guide/dynamic-tables-cost","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Dynamic table states","type":"page","href":"/en/user-guide/dynamic-tables-states","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Dynamic tables and streams","type":"page","href":"/en/user-guide/dynamic-tables-and-streams","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"About working with dynamic tables","type":"page","href":"/en/user-guide/dynamic-tables-tasks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[{"label":"Dynamic tables access control","type":"page","href":"/en/user-guide/dynamic-tables-tasks-privileges","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-tasks","children":[]},{"label":"Create dynamic tables","type":"page","href":"/en/user-guide/dynamic-tables-tasks-create","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-tasks","children":[]},{"label":"About managing dynamic tables","type":"page","href":"/en/user-guide/dynamic-tables-tasks-manage","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-tasks","children":[]},{"label":"Manage dynamic tables refresh","type":"page","href":"/en/user-guide/dynamic-tables-tasks-manage-refresh","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-tasks","children":[]},{"label":"Monitor dynamic tables","type":"page","href":"/en/user-guide/dynamic-tables-tasks-monitor","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-tasks","children":[]}]},{"label":"Limitations","type":"page","href":"/en/user-guide/dynamic-tables-limitations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]},{"label":"Troubleshoot","type":"page","href":"/en/user-guide/dynamic-tables-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/dynamic-tables-about","children":[]}]},{"label":"Streams","type":"page","href":"/en/user-guide/streams-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Managing","type":"page","href":"/en/user-guide/streams-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/streams-intro","children":[]},{"label":"Examples","type":"page","href":"/en/user-guide/streams-examples","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/streams-intro","children":[]}]},{"label":"Tasks","type":"page","href":"/en/user-guide/tasks-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[{"label":"Enabling Error Notifications","type":"page","href":"/en/user-guide/tasks-errors","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-intro","children":[{"label":"Enabling Error Notifications using AWS SNS","type":"page","href":"/en/user-guide/tasks-errors-aws","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-errors","children":[]},{"label":"Enabling Error Notifications using MS Azure Grid Events","type":"page","href":"/en/user-guide/tasks-errors-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-errors","children":[]},{"label":"Enabling Error Notifications for Tasks using Google Pub/Sub","type":"page","href":"/en/user-guide/tasks-errors-gpc","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-errors","children":[]},{"label":"Integrating Task Error Notifications with Tasks","type":"page","href":"/en/user-guide/tasks-errors-integrate","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-errors","children":[]},{"label":"Task Error Payload Example","type":"page","href":"/en/user-guide/tasks-errors-payload","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-errors","children":[]}]},{"label":"Tasks in Snowsight","type":"page","href":"/en/user-guide/ui-snowsight-tasks","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-intro","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/tasks-ts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/tasks-intro","children":[]}]},{"label":"Examples","type":"page","href":"/en/user-guide/data-pipelines-examples","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-loading-data","children":[]}]},{"label":"Data Unloading","type":"page","href":"/en/guides-overview-unloading-data","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Overview","type":"page","href":"/en/user-guide/data-unload-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Features","type":"page","href":"/en/user-guide/intro-summary-unloading","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Considerations","type":"page","href":"/en/user-guide/data-unload-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Preparing to Unload Data","type":"page","href":"/en/user-guide/data-unload-prepare","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Unloading into a Snowflake Stage","type":"page","href":"/en/user-guide/data-unload-snowflake","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Unloading into Amazon S3","type":"page","href":"/en/user-guide/data-unload-s3","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Unloading into Google Cloud Storage","type":"page","href":"/en/user-guide/data-unload-gcs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]},{"label":"Unloading into Microsoft Azure","type":"page","href":"/en/user-guide/data-unload-azure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-unloading-data","children":[]}]},{"type":"line"},{"label":"Queries","type":"page","href":"/en/guides-overview-queries","active":false,"depth":0,"isInitiallyOpen":true,"parentRef":"/en/guides","children":[{"label":"Joins","type":"page","href":"/en/user-guide/querying-joins","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[{"label":"Joining Time-Series Data","type":"page","href":"/en/user-guide/querying-time-series-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-joins","children":[]},{"label":"Eliminating Redundant Joins","type":"page","href":"/en/user-guide/join-elimination","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-joins","children":[]}]},{"label":"Subqueries","type":"page","href":"/en/user-guide/querying-subqueries","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Querying Hierarchical Data","type":"page","href":"/en/user-guide/queries-hierarchical","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Common Table Expressions (CTE)","type":"page","href":"/en/user-guide/queries-cte","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Querying Semi-structured Data","type":"page","href":"/en/user-guide/querying-semistructured","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Window Functions","type":"page","href":"/en/user-guide/functions-window-using","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Match Recognize","type":"page","href":"/en/user-guide/match-recognize-introduction","active":true,"depth":1,"isInitiallyOpen":true,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Sequences","type":"page","href":"/en/user-guide/querying-sequences","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Persisted Query Results","type":"page","href":"/en/user-guide/querying-persisted-results","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Distinct Counts","type":"page","href":"/en/user-guide/querying-distinct-counts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[{"label":"Estimation","type":"page","href":"/en/user-guide/querying-approximate-cardinality","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]},{"label":"Bitmaps for Hierarchical Aggregations","type":"page","href":"/en/user-guide/querying-bitmaps-for-distinct-counts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]},{"label":"Arrays for Hierarchical Aggregations","type":"page","href":"/en/user-guide/querying-arrays-for-distinct-counts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]}]},{"label":"Similarity Estimation","type":"page","href":"/en/user-guide/querying-approximate-similarity","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Frequency Estimation","type":"page","href":"/en/user-guide/querying-approximate-frequent-values","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Estimating Percentile Values","type":"page","href":"/en/user-guide/querying-approximate-percentile-values","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Monitor query activity with Query History","type":"page","href":"/en/user-guide/ui-snowsight-activity","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Query Profile","type":"page","href":"/en/user-guide/ui-query-profile","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Query Hash","type":"page","href":"/en/user-guide/query-hash","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Cancel Statements","type":"page","href":"/en/user-guide/querying-cancel-statements","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]}]},{"label":"Snowflake Cortex","type":"page","href":"/en/user-guide/snowflake-cortex/overview","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Large Language Model Functions","type":"page","href":"/en/user-guide/snowflake-cortex/llm-functions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowflake-cortex/overview","children":[]},{"label":"ML Functions","type":"page","href":"/en/guides-overview-ml-functions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/snowflake-cortex/overview","children":[{"label":"Anomaly Detection","type":"page","href":"/en/user-guide/snowflake-cortex/ml-functions/anomaly-detection","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-ml-functions","children":[]},{"label":"Classification","type":"page","href":"/en/user-guide/snowflake-cortex/ml-functions/classification","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-ml-functions","children":[]},{"label":"Contribution Explorer","type":"page","href":"/en/user-guide/snowflake-cortex/ml-functions/contribution-explorer","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-ml-functions","children":[]},{"label":"Forecasting","type":"page","href":"/en/user-guide/snowflake-cortex/ml-functions/forecasting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-ml-functions","children":[]}]}]},{"label":"Data Sharing \u0026 Collaboration","type":"page","href":"/en/guides-overview-sharing","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Introduction to Secure Data Sharing","type":"page","href":"/en/user-guide/data-sharing-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"About listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/collaboration-listings-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"About Snowflake Marketplace","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/collaboration-marketplace-about","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Legal requirements for providers and consumers of listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/collaboration-listings-legal","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Snowflake Data Clean Rooms","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/introduction","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[{"label":"Getting started","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/getting-started","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]},{"label":"Web app","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/web-app-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[{"label":"Quick tour","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/web-app-tour","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/web-app-introduction","children":[]},{"label":"Tutorial","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/tutorials/cleanroom-web-app-tutorial","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/web-app-introduction","children":[]}]},{"label":"Developer edition","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[{"label":"Provider API reference guide","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/provider","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Consumer API reference guide","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/consumer","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Differential privacy","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/differential-privacy","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"type":"section","isOpen":false,"depth":3,"children":[{"label":"Provider data analysis","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/basic-flow-data-analysis","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Overlap analysis","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/basic-flow-overlap","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Custom analysis templates","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/custom-templates","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Secure Python-based templates","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/python-based-templates","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Machine learning","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/machine-learning","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Secure Python UDTF-based templates","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/python-udtf","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Snowpark","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/snowpark","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]},{"label":"Register clean room in web app","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/demo-flows/register-cleanroom-in-ui","active":false,"depth":4,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction","children":[]}],"label":"Supported flows","parentRef":"https://other-docs.snowflake.com/en/cleanrooms/developer-introduction"}]},{"label":"Managed accounts","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/managed-accounts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]},{"label":"Adding Snowflake data","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/adding-tables","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]},{"type":"section","isOpen":false,"depth":2,"children":[{"label":"Amazon S3","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/external-data-aws","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]},{"label":"Azure Blob Storage","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/external-data-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]},{"label":"Google Cloud Storage","type":"page","href":"https://other-docs.snowflake.com/en/cleanrooms/external-data-gcp","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction","children":[]}],"label":"Adding external data","parentRef":"https://other-docs.snowflake.com/en/cleanrooms/introduction"}]},{"type":"category","depth":1,"label":"Using listings as a provider"},{"label":"Becoming a provider of listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-becoming","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Accessing Provider Studio","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-studio-accessing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Managing your provider profile","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-profiles-managing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Preparing data for a listing","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-preparing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Creating and publishing a listing","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-creating-publishing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Configuring listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-reference","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Configuring Cross-Cloud Auto-fulfillment","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-auto-fulfillment","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[{"label":"Managing Auto-fulfillment costs","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-understand-cost-auto-fulfillment","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/collaboration/provider-listings-auto-fulfillment","children":[]},{"label":"Troubleshooting Auto-fulfillment","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-auto-fulfillment-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"https://other-docs.snowflake.com/en/collaboration/provider-listings-auto-fulfillment","children":[]}]},{"label":"Paid listings pricing models","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-pricing-model","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Managing listing requests","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-managing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Modifying published listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-modifying","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Defining listing referral links","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-referral-link","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Removing listings as a provider","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-removing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Monitoring usage of your listing","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-listings-monitor-studio","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Monetization usage views","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/provider-monetization-usage","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"type":"category","depth":1,"label":"Using listings as a consumer"},{"label":"Becoming a consumer of listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/consumer-becoming","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Exploring listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/consumer-listings-exploring","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Accessing and installing listings as a consumer","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/consumer-listings-access","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Paying for listings","type":"page","href":"https://other-docs.snowflake.com/en/collaboration/consumer-listings-paying","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"type":"category","depth":1,"label":"Data sharing for providers"},{"label":"Getting started","type":"page","href":"/en/user-guide/data-sharing-gs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Working with shares","type":"page","href":"/en/user-guide/data-sharing-provider","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Sharing data from multiple databases","type":"page","href":"/en/user-guide/data-sharing-multiple-db","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Sharing data across regions and cloud platforms","type":"page","href":"/en/user-guide/secure-data-sharing-across-regions-platforms","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Using secure objects to control data access","type":"page","href":"/en/user-guide/data-sharing-secure-views","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Sharing data protected by a policy","type":"page","href":"/en/user-guide/data-sharing-policy-protected-data","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"type":"category","depth":1,"label":"Data sharing for consumers"},{"label":"Consuming shared data","type":"page","href":"/en/user-guide/data-share-consumers","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"type":"category","depth":1,"label":"General data sharing tasks"},{"label":"Managing reader accounts","type":"page","href":"/en/user-guide/data-sharing-reader-create","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Configuring reader accounts","type":"page","href":"/en/user-guide/data-sharing-reader-config","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Enabling non-Admins to perform sharing tasks","type":"page","href":"/en/user-guide/security-access-privileges-shares","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Granting privileges to other roles","type":"page","href":"/en/user-guide/data-exchange-marketplace-privileges","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Sharing from Business Critical to non-Business Critical","type":"page","href":"/en/user-guide/override_share_restrictions","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"type":"category","depth":1,"label":"Data Exchange"},{"label":"About","type":"page","href":"/en/user-guide/data-exchange","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Admin and membership","type":"page","href":"/en/user-guide/data-exchange-roles","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Accessing a Data Exchange","type":"page","href":"/en/user-guide/data-exchange-accessing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Becoming a data provider","type":"page","href":"/en/user-guide/data-exchange-becoming-a-provider","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Managing data listings","type":"page","href":"/en/user-guide/data-exchange-managing-data-listings","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Configuring and using Data Exchanges","type":"page","href":"/en/user-guide/data-exchange-using","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]},{"label":"Requesting a new Data Exchange","type":"page","href":"/en/user-guide/data-exchange-requesting","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-sharing","children":[]}]},{"type":"line"},{"label":"Alerts \u0026 Notifications","type":"page","href":"/en/guides-overview-alerts","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Snowflake Alerts","type":"page","href":"/en/user-guide/alerts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-alerts","children":[]},{"label":"Email Notifications","type":"page","href":"/en/user-guide/email-stored-procedures","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-alerts","children":[]},{"label":"Snowpipe Error Notifications","type":"page","href":"/en/user-guide/data-load-snowpipe-errors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-alerts","children":[]},{"label":"Tasks Error Notifications","type":"page","href":"/en/user-guide/tasks-errors","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-alerts","children":[]}]},{"type":"line"},{"label":"Security","type":"page","href":"/en/guides-overview-secure","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"type":"category","depth":1,"label":"Authentication"},{"label":"Identifier-first login","type":"page","href":"/en/user-guide/identifier-first-login","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Authentication policies","type":"page","href":"/en/user-guide/authentication-policies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"API authentication and secrets","type":"page","href":"/en/user-guide/api-authentication","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Federated authentication and SSO","type":"page","href":"/en/user-guide/admin-security-fed-auth-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"Configuring an identity provider","type":"page","href":"/en/user-guide/admin-security-fed-auth-configure-idp","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]},{"label":"Configuring Snowflake to use federated authentication","type":"page","href":"/en/user-guide/admin-security-fed-auth-security-integration","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]},{"label":"Using multiple identity providers","type":"page","href":"/en/user-guide/admin-security-fed-auth-security-integration-multiple","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]},{"label":"Managing federated authentication","type":"page","href":"/en/user-guide/admin-security-fed-auth-use","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/errors-saml","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]},{"label":"Migrating to a SAML2 security integration","type":"page","href":"/en/user-guide/admin-security-fed-auth-configure-snowflake","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/admin-security-fed-auth-overview","children":[]}]},{"label":"Key-pair authentication and rotation","type":"page","href":"/en/user-guide/key-pair-auth","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"Troubleshooting","type":"page","href":"/en/user-guide/key-pair-auth-troubleshooting","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/key-pair-auth","children":[]}]},{"label":"Multi-factor authentication (MFA)","type":"page","href":"/en/user-guide/security-mfa","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"OAuth","type":"page","href":"/en/user-guide/oauth-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"Snowflake OAuth","type":"page","href":"/en/user-guide/oauth-snowflake-overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-intro","children":[{"label":"Partner applications","type":"page","href":"/en/user-guide/oauth-partner","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-snowflake-overview","children":[]},{"label":"Custom client integration","type":"page","href":"/en/user-guide/oauth-custom","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-snowflake-overview","children":[]},{"label":"Managing user consent","type":"page","href":"/en/user-guide/oauth-consent","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-snowflake-overview","children":[]}]},{"label":"External OAuth","type":"page","href":"/en/user-guide/oauth-ext-overview","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-intro","children":[{"label":"Azure integration","type":"page","href":"/en/user-guide/oauth-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]},{"label":"Okta integration","type":"page","href":"/en/user-guide/oauth-okta","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]},{"label":"PingFederate integration","type":"page","href":"/en/user-guide/oauth-pingfed","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]},{"label":"Power BI integration","type":"page","href":"/en/user-guide/oauth-powerbi","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]},{"label":"Custom authorization server","type":"page","href":"/en/user-guide/oauth-ext-custom","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]},{"label":"Partner applications","type":"page","href":"/en/user-guide/oauth-ext-partner","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/oauth-ext-overview","children":[]}]}]},{"type":"category","depth":1,"label":"Networking and private connectivity"},{"label":"Network policies","type":"page","href":"/en/user-guide/network-policies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Network rules","type":"page","href":"/en/user-guide/network-rules","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"AWS VPC interface endpoints for internal stages","type":"page","href":"/en/user-guide/private-internal-stages-aws","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Azure private endpoints for internal stages","type":"page","href":"/en/user-guide/private-internal-stages-azure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"AWS PrivateLink","type":"page","href":"/en/user-guide/admin-security-privatelink","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Azure Private Link","type":"page","href":"/en/user-guide/privatelink-azure","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"Google Cloud Private Service Connect","type":"page","href":"/en/user-guide/private-service-connect-google","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"type":"category","depth":1,"label":"Administration and authorization"},{"label":"Sessions and session policies","type":"page","href":"/en/user-guide/session-policies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]},{"label":"SCIM support","type":"page","href":"/en/user-guide/scim-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"API references","type":"page","href":"/en/user-guide/scim-api-references","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-intro","children":[{"label":"User API reference","type":"page","href":"/en/user-guide/scim-user-api-reference","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-api-references","children":[]},{"label":"Group API reference","type":"page","href":"/en/user-guide/scim-group-api-reference","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-api-references","children":[]}]},{"label":"Security integrations","type":"page","href":"/en/user-guide/scim-security-integrations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-intro","children":[{"label":"Okta integration","type":"page","href":"/en/user-guide/scim-okta","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-security-integrations","children":[]},{"label":"Azure integration","type":"page","href":"/en/user-guide/scim-azure","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-security-integrations","children":[]},{"label":"Custom integration","type":"page","href":"/en/user-guide/scim-custom","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/scim-security-integrations","children":[]}]}]},{"label":"Access control","type":"page","href":"/en/user-guide/security-access-control-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"Considerations","type":"page","href":"/en/user-guide/security-access-control-considerations","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-access-control-overview","children":[]},{"label":"Privileges","type":"page","href":"/en/user-guide/security-access-control-privileges","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-access-control-overview","children":[]},{"label":"Configuring","type":"page","href":"/en/user-guide/security-access-control-configure","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-access-control-overview","children":[]}]},{"label":"Encryption","type":"page","href":"/en/user-guide/security-encryption-end-to-end","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[{"label":"Key management","type":"page","href":"/en/user-guide/security-encryption-manage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-encryption-end-to-end","children":[]},{"label":"Tri-Secret Secure","type":"page","href":"/en/user-guide/security-encryption-tss","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-encryption-end-to-end","children":[]}]},{"label":"Tri-Secret Secure","type":"page","href":"/en/user-guide/security-encryption-tss","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-secure","children":[]}]},{"label":"Data Governance","type":"page","href":"/en/guides-overview-govern","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"type":"category","depth":1,"label":"Data Quality Monitoring"},{"label":"Introduction","type":"page","href":"/en/user-guide/data-quality-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"label":"System DMFs","type":"page","href":"/en/user-guide/data-quality-system-dmfs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"label":"Working with DMFs","type":"page","href":"/en/user-guide/data-quality-working","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"label":"Tutorial: Getting started with DMFs","type":"page","href":"/en/user-guide/tutorials/data-quality-tutorial-start","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"type":"category","depth":1,"label":"Data Sensitivity \u0026 Access Visibility"},{"label":"Object Tagging","type":"page","href":"/en/user-guide/object-tagging","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"label":"Data Classification","type":"page","href":"/en/user-guide/classify-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[{"label":"Use Data Classification","type":"page","href":"/en/user-guide/classify-using","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/classify-intro","children":[]},{"label":"Data Classification: Classic APIs","type":"page","href":"/en/user-guide/classify-classic","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/classify-intro","children":[]}]},{"label":"Custom Classification","type":"page","href":"/en/user-guide/classify-custom","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"type":"category","depth":1,"label":"Data Access Policies"},{"label":"Masking Policies","type":"page","href":"/en/user-guide/security-column-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[{"label":"Dynamic Data Masking","type":"page","href":"/en/user-guide/security-column-ddm-intro","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-intro","children":[{"label":"Using Dynamic Data Masking","type":"page","href":"/en/user-guide/security-column-ddm-use","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-ddm-intro","children":[]}]},{"label":"External Tokenization","type":"page","href":"/en/user-guide/security-column-ext-token-intro","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-intro","children":[{"label":"Using External Tokenization","type":"page","href":"/en/user-guide/security-column-ext-token-use","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-ext-token-intro","children":[]}]},{"label":"Tag-based Masking","type":"page","href":"/en/user-guide/tag-based-masking-policies","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-intro","children":[]},{"label":"Advanced","type":"page","href":"/en/user-guide/security-column-advanced","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-column-intro","children":[]}]},{"label":"Row Access Policies","type":"page","href":"/en/user-guide/security-row-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[{"label":"Using Row Access Policies","type":"page","href":"/en/user-guide/security-row-using","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/security-row-intro","children":[]}]},{"type":"category","depth":1,"label":"Data Lineage \u0026 Dependencies"},{"label":"Access History","type":"page","href":"/en/user-guide/access-history","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]},{"label":"Object Dependencies","type":"page","href":"/en/user-guide/object-dependencies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-govern","children":[]}]},{"label":"Privacy","type":"page","href":"/en/guides-overview-privacy","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Aggregation Policies","type":"page","href":"/en/user-guide/aggregation-policies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-privacy","children":[]},{"label":"Projection Policies","type":"page","href":"/en/user-guide/projection-policies","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-privacy","children":[]}]},{"type":"line"},{"label":"Organizations \u0026 Accounts","type":"page","href":"/en/guides-overview-manage","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"type":"category","depth":1,"label":"Organizations"},{"label":"Introduction","type":"page","href":"/en/user-guide/organizations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"Getting Started","type":"page","href":"/en/user-guide/organizations-gs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"Managing Accounts","type":"page","href":"/en/user-guide/organizations-manage-accounts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[{"label":"Creating an Account","type":"page","href":"/en/user-guide/organizations-manage-accounts-create","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]},{"label":"Viewing a List of Accounts","type":"page","href":"/en/user-guide/organizations-manage-accounts-view","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]},{"label":"Renaming an Account","type":"page","href":"/en/user-guide/organizations-manage-accounts-rename","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]},{"label":"Managing Account URLs","type":"page","href":"/en/user-guide/organizations-manage-accounts-urls","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]},{"label":"Working with Editions","type":"page","href":"/en/user-guide/organizations-manage-accounts-editions","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]},{"label":"Dropping an Account","type":"page","href":"/en/user-guide/organizations-manage-accounts-delete","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/organizations-manage-accounts","children":[]}]},{"type":"category","depth":1,"label":"Accounts"},{"label":"Connecting to Your Accounts","type":"page","href":"/en/user-guide/organizations-connect","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"Account Identifiers","type":"page","href":"/en/user-guide/admin-account-identifier","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"Trial Accounts","type":"page","href":"/en/user-guide/admin-trial-account","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"Parameter Management","type":"page","href":"/en/user-guide/admin-account-management","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]},{"label":"User Management","type":"page","href":"/en/user-guide/admin-user-management","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-manage","children":[]}]},{"label":"Business Continuity \u0026 Data Recovery","type":"page","href":"/en/user-guide/replication-intro","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"type":"category","depth":1,"label":"Replication"},{"label":"Introduction","type":"page","href":"/en/user-guide/account-replication-intro","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Considerations","type":"page","href":"/en/user-guide/account-replication-considerations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Configuration","type":"page","href":"/en/user-guide/account-replication-config","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Security Integrations and Network Policy Replication","type":"page","href":"/en/user-guide/account-replication-security-integrations","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Stage, Pipe, and Load History Replication","type":"page","href":"/en/user-guide/account-replication-stages-pipes-load-history","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Understanding Cost","type":"page","href":"/en/user-guide/account-replication-cost","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"type":"category","depth":1,"label":"Failover"},{"label":"Account Failover","type":"page","href":"/en/user-guide/account-replication-failover-failback","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"type":"category","depth":1,"label":"Client Redirect"},{"label":"Overview","type":"page","href":"/en/user-guide/client-redirect","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"type":"category","depth":1,"label":"Data Recovery"},{"label":"Time Travel","type":"page","href":"/en/user-guide/data-time-travel","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Fail-safe","type":"page","href":"/en/user-guide/data-failsafe","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]},{"label":"Storage Costs","type":"page","href":"/en/user-guide/data-cdp-storage-costs","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/user-guide/replication-intro","children":[]}]},{"type":"line"},{"label":"Performance Optimization","type":"page","href":"/en/guides-overview-performance","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"label":"Exploring Execution Times","type":"page","href":"/en/user-guide/performance-query-exploring","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-performance","children":[]},{"label":"Optimizing Warehouses for Performance","type":"page","href":"/en/user-guide/performance-query-warehouse","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-performance","children":[{"label":"Reducing Queues","type":"page","href":"/en/user-guide/performance-query-warehouse-queue","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]},{"label":"Resolving Memory Spillage","type":"page","href":"/en/user-guide/performance-query-warehouse-memory","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]},{"label":"Increasing Warehouse Size","type":"page","href":"/en/user-guide/performance-query-warehouse-size","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]},{"label":"Trying Query Acceleration","type":"page","href":"/en/user-guide/performance-query-warehouse-qas","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]},{"label":"Optimizing the Cache","type":"page","href":"/en/user-guide/performance-query-warehouse-cache","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]},{"label":"Limiting Concurrent Queries","type":"page","href":"/en/user-guide/performance-query-warehouse-max-concurrency","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/performance-query-warehouse","children":[]}]},{"label":"Optimizing Storage for Performance","type":"page","href":"/en/user-guide/performance-query-storage","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-performance","children":[]}]},{"label":"Cost \u0026 Billing","type":"page","href":"/en/guides-overview-cost","active":false,"depth":0,"isInitiallyOpen":false,"parentRef":"/en/guides","children":[{"type":"category","depth":1,"label":"Cost Management"},{"label":"Overview","type":"page","href":"/en/user-guide/cost-management-overview","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]},{"label":"Understanding cost","type":"page","href":"/en/user-guide/cost-understanding-overall","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[{"label":"Understanding compute cost","type":"page","href":"/en/user-guide/cost-understanding-compute","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-understanding-overall","children":[]},{"label":"Understanding storage cost","type":"page","href":"/en/user-guide/cost-understanding-data-storage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-understanding-overall","children":[]},{"label":"Understanding data transfer cost","type":"page","href":"/en/user-guide/cost-understanding-data-transfer","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-understanding-overall","children":[]}]},{"label":"Exploring cost","type":"page","href":"/en/user-guide/cost-exploring-overall","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[{"label":"Exploring compute cost","type":"page","href":"/en/user-guide/cost-exploring-compute","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-exploring-overall","children":[]},{"label":"Exploring storage cost","type":"page","href":"/en/user-guide/cost-exploring-data-storage","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-exploring-overall","children":[]},{"label":"Exploring data transfer cost","type":"page","href":"/en/user-guide/cost-exploring-data-transfer","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-exploring-overall","children":[]}]},{"label":"Optimizing cost","type":"page","href":"/en/user-guide/cost-optimize","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]},{"label":"Monitoring cost","type":"page","href":"/en/user-guide/cost-monitoring","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[{"label":"Budgets","type":"page","href":"/en/user-guide/budgets","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-monitoring","children":[{"label":"Understanding cost","type":"page","href":"/en/user-guide/budgets/cost","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/budgets","children":[]},{"label":"Using budgets","type":"page","href":"/en/user-guide/budgets/config","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/budgets","children":[]},{"label":"Troubleshooting","type":"page","href":"/en/user-guide/budgets/troubleshoot","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/budgets","children":[]},{"label":"Tutorial","type":"page","href":"/en/user-guide/tutorials/budgets","active":false,"depth":3,"isInitiallyOpen":false,"parentRef":"/en/user-guide/budgets","children":[]}]},{"label":"Resource monitors","type":"page","href":"/en/user-guide/resource-monitors","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/cost-monitoring","children":[]}]},{"label":"Attributing cost","type":"page","href":"/en/user-guide/cost-attributing","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]},{"label":"Controlling cost","type":"page","href":"/en/user-guide/cost-controlling","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]},{"type":"category","depth":1,"label":"Billing"},{"label":"Accessing Usage Statements","type":"page","href":"/en/user-guide/billing-usage-statement","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]},{"label":"Reconciling Usage Statements","type":"page","href":"/en/user-guide/billing-reconcile","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-cost","children":[]}]}]},"categories":[],"activeNodeParent":{"label":"Queries","type":"page","href":"/en/guides-overview-queries","active":false,"depth":0,"isInitiallyOpen":true,"parentRef":"/en/guides","children":[{"label":"Joins","type":"page","href":"/en/user-guide/querying-joins","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[{"label":"Joining Time-Series Data","type":"page","href":"/en/user-guide/querying-time-series-data","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-joins","children":[]},{"label":"Eliminating Redundant Joins","type":"page","href":"/en/user-guide/join-elimination","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-joins","children":[]}]},{"label":"Subqueries","type":"page","href":"/en/user-guide/querying-subqueries","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Querying Hierarchical Data","type":"page","href":"/en/user-guide/queries-hierarchical","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Common Table Expressions (CTE)","type":"page","href":"/en/user-guide/queries-cte","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Querying Semi-structured Data","type":"page","href":"/en/user-guide/querying-semistructured","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Window Functions","type":"page","href":"/en/user-guide/functions-window-using","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Match Recognize","type":"page","href":"/en/user-guide/match-recognize-introduction","active":true,"depth":1,"isInitiallyOpen":true,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Sequences","type":"page","href":"/en/user-guide/querying-sequences","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Persisted Query Results","type":"page","href":"/en/user-guide/querying-persisted-results","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Distinct Counts","type":"page","href":"/en/user-guide/querying-distinct-counts","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[{"label":"Estimation","type":"page","href":"/en/user-guide/querying-approximate-cardinality","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]},{"label":"Bitmaps for Hierarchical Aggregations","type":"page","href":"/en/user-guide/querying-bitmaps-for-distinct-counts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]},{"label":"Arrays for Hierarchical Aggregations","type":"page","href":"/en/user-guide/querying-arrays-for-distinct-counts","active":false,"depth":2,"isInitiallyOpen":false,"parentRef":"/en/user-guide/querying-distinct-counts","children":[]}]},{"label":"Similarity Estimation","type":"page","href":"/en/user-guide/querying-approximate-similarity","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Frequency Estimation","type":"page","href":"/en/user-guide/querying-approximate-frequent-values","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Estimating Percentile Values","type":"page","href":"/en/user-guide/querying-approximate-percentile-values","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Monitor query activity with Query History","type":"page","href":"/en/user-guide/ui-snowsight-activity","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Query Profile","type":"page","href":"/en/user-guide/ui-query-profile","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Query Hash","type":"page","href":"/en/user-guide/query-hash","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]},{"label":"Cancel Statements","type":"page","href":"/en/user-guide/querying-cancel-statements","active":false,"depth":1,"isInitiallyOpen":false,"parentRef":"/en/guides-overview-queries","children":[]}]},"snowsightDomain":"https://app.snowflake.com","_nextI18Next":{"initialI18nStore":{"en":{"common":{}}},"initialLocale":"en","ns":["common"],"userConfig":{"i18n":{"defaultLocale":"en","locales":["en","fr","de","ja","ko","pt"]},"default":{"i18n":{"defaultLocale":"en","locales":["en","fr","de","ja","ko","pt"]}}}}},"__N_SSP":true},"page":"/[...path]","query":{"path":["user-guide","match-recognize-introduction"]},"buildId":"ICZ5MtOK9ZoGg60IkLaJy","isFallback":false,"dynamicIds":[4304],"gssp":true,"customServer":true,"locale":"en","locales":["en","fr","de","ja","ko","pt"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>